  <p>The <dfn id=dom-cva-checkvalidity><code>checkValidity()</code></dfn> method, when
  invoked, must run these steps:</p>

  <ol><li>
    <p>If this element is a <a href=#candidate-for-constraint-validation id=the-constraint-validation-api:candidate-for-constraint-validation-2>candidate for constraint validation</a> and does not <a href=#concept-fv-valid id=the-constraint-validation-api:concept-fv-valid>satisfy its constraints</a>, then:</p>

    <ol><li><p><a href=https://dom.spec.whatwg.org/#concept-event-fire id=the-constraint-validation-api:concept-event-fire data-x-internal=concept-event-fire>Fire an event</a> named <code id=the-constraint-validation-api:event-invalid-3><a href=#event-invalid>invalid</a></code> at this element, with the <code id=the-constraint-validation-api:dom-event-cancelable><a data-x-internal=dom-event-cancelable href=https://dom.spec.whatwg.org/#dom-event-cancelable>cancelable</a></code> attribute initialized to true (though canceling
     has no effect).<li><p>Return false.</ol>

   <li><p>Return true.</ol>

  <p>The <dfn id=dom-cva-reportvalidity><code>reportValidity()</code></dfn> method, when
  invoked, must run these steps:

  <ol><li>
    <p>If this element is a <a href=#candidate-for-constraint-validation id=the-constraint-validation-api:candidate-for-constraint-validation-3>candidate for constraint validation</a> and does not <a href=#concept-fv-valid id=the-constraint-validation-api:concept-fv-valid-2>satisfy its constraints</a>, then:

    <ol><li><p>Let <var>report</var> be the result of <a href=https://dom.spec.whatwg.org/#concept-event-fire id=the-constraint-validation-api:concept-event-fire-2 data-x-internal=concept-event-fire>firing an
     event</a> named <code id=the-constraint-validation-api:event-invalid-4><a href=#event-invalid>invalid</a></code> at this element, with the <code id=the-constraint-validation-api:dom-event-cancelable-2><a data-x-internal=dom-event-cancelable href=https://dom.spec.whatwg.org/#dom-event-cancelable>cancelable</a></code> attribute initialized to true.<li><p>If <var>report</var> is true, then report the problems with the constraints of this
     element to the user. When reporting the problem with the constraints to the user, the user
     agent may run the <a href=#focusing-steps id=the-constraint-validation-api:focusing-steps>focusing steps</a> for this element, and may change the scrolling
     position of the document, or perform some other action that brings this element to the user's
     attention. User agents may report more than one constraint violation, if this element suffers
     from multiple problems at once. If this element is not <a href=#being-rendered id=the-constraint-validation-api:being-rendered>being rendered</a>, then the
     user agent may, instead of notifying the user, <a href=#report-the-error id=the-constraint-validation-api:report-the-error>report the error</a> for the
     <a href=#running-script id=the-constraint-validation-api:running-script>running script</a>.</p>

     <li><p>Return false.</ol>

   <li><p>Return true.</ol>

  <p>The <dfn id=dom-cva-validationmessage><code>validationMessage</code></dfn> attribute's
  getter must run these steps:<p>

  <ol><li><p>If this element is not a <a href=#candidate-for-constraint-validation id=the-constraint-validation-api:candidate-for-constraint-validation-4>candidate for constraint validation</a> or if this
   element <a href=#concept-fv-valid id=the-constraint-validation-api:concept-fv-valid-3>satisfies its constraints</a>, then return the empty
   string.<li><p>Return a suitably localized message that the user agent would show the user if this were
   the only form control with a validity constraint problem. If the user agent would not actually
   show a textual message in such a situation (e.g., it would show a graphical cue instead), then
   return a suitably localized message that expresses (one or more of) the validity constraint(s)
   that the control does not satisfy. If the element is a <a href=#candidate-for-constraint-validation id=the-constraint-validation-api:candidate-for-constraint-validation-5>candidate for constraint
   validation</a> and is <a href=#suffering-from-a-custom-error id=the-constraint-validation-api:suffering-from-a-custom-error-2>suffering from a custom error</a>, then the
   <a href=#custom-validity-error-message id=the-constraint-validation-api:custom-validity-error-message-2>custom validity error message</a> should be present in the return value.</ol>

  




  <h5 id=security-forms>4.10.20.4 Security<a href=#security-forms class=self-link></a></h5>

  <p id=security-0>Servers should not rely on client-side validation. Client-side validation can
  be intentionally bypassed by hostile users, and unintentionally bypassed by users of older user
  agents or automated tools that do not implement these features. The constraint validation features
  are only intended to improve the user experience, not to provide any kind of security
  mechanism.</p>





  <h4 id=form-submission-2>4.10.21 <dfn>Form submission</dfn><a href=#form-submission-2 class=self-link></a></h4>

  

  <h5 id=introduction-5>4.10.21.1 Introduction<a href=#introduction-5 class=self-link></a></h5>

  

  <p><i>This section is non-normative.</i></p>

  <p>When a form is submitted, the data in the form is converted into the structure specified by the
  <a href=#concept-fs-enctype id=introduction-5:concept-fs-enctype>enctype</a>, and then sent to the destination specified by the
  <a href=#concept-fs-action id=introduction-5:concept-fs-action>action</a> using the given <a href=#concept-fs-method id=introduction-5:concept-fs-method>method</a>.</p>

  <p>For example, take the following form:</p>

  <pre>&lt;form action="/find.cgi" method=get>
 &lt;input type=text name=t>
 &lt;input type=search name=q>
 &lt;input type=submit>
&lt;/form></pre>

  <p>If the user types in "cats" in the first field and "fur" in the second, and then hits the
  submit button, then the user agent will load <code>/find.cgi?t=cats&amp;q=fur</code>.</p>

  <p>On the other hand, consider this form:</p>

  <pre>&lt;form action="/find.cgi" method=post enctype="multipart/form-data">
 &lt;input type=text name=t>
 &lt;input type=search name=q>
 &lt;input type=submit>
&lt;/form></pre>

  <p>Given the same user input, the result on submission is quite different: the user agent instead
  does an HTTP POST to the given URL, with as the entity body something like the following text:</p>

  <pre>------kYFrd4jNJEgCervE
Content-Disposition: form-data; name="t"

cats
------kYFrd4jNJEgCervE
Content-Disposition: form-data; name="q"

fur
------kYFrd4jNJEgCervE--</pre>



  

  <h5 id=implicit-submission>4.10.21.2 Implicit submission<a href=#implicit-submission class=self-link></a></h5>

  <p>A <code id=implicit-submission:the-form-element><a href=#the-form-element>form</a></code> element's <dfn id=default-button>default button</dfn> is the first <a href=#concept-submit-button id=implicit-submission:concept-submit-button>submit button</a> in <a id=implicit-submission:tree-order href=https://dom.spec.whatwg.org/#concept-tree-order data-x-internal=tree-order>tree order</a> whose <a href=#form-owner id=implicit-submission:form-owner>form
  owner</a> is that <code id=implicit-submission:the-form-element-2><a href=#the-form-element>form</a></code> element.</p>

  <p>If the user agent supports letting the user submit a form implicitly (for example, on some
  platforms hitting the "enter" key while a text control is <a href=#focused id=implicit-submission:focused>focused</a> implicitly submits
  the form), then doing so for a form, whose <a href=#default-button id=implicit-submission:default-button>default button</a> has <a id=implicit-submission:activation-behaviour href=https://dom.spec.whatwg.org/#eventtarget-activation-behavior data-x-internal=activation-behaviour>activation
  behavior</a> and is not <a href=#concept-fe-disabled id=implicit-submission:concept-fe-disabled>disabled</a>, must cause the user
  agent to <a href=#fire-a-click-event id=implicit-submission:fire-a-click-event>fire a <code>click</code> event</a> at that <a href=#default-button id=implicit-submission:default-button-2>default
  button</a>.</p>

  <p class=note>There are pages on the Web that are only usable if there is a way to implicitly
  submit forms, so user agents are strongly encouraged to support this.</p>

  <p>If the form has
  no <a href=#concept-submit-button id=implicit-submission:concept-submit-button-2>submit button</a>, then the implicit submission
  mechanism must do nothing if the form has more than one <i>field that blocks implicit
  submission</i>, and must <a href=#concept-form-submit id=implicit-submission:concept-form-submit>submit</a> the <code id=implicit-submission:the-form-element-3><a href=#the-form-element>form</a></code>
  element from the <code id=implicit-submission:the-form-element-4><a href=#the-form-element>form</a></code> element itself otherwise.</p>

  <p>For the purpose of the previous paragraph, an element is a <i>field that blocks implicit
  submission</i> of a <code id=implicit-submission:the-form-element-5><a href=#the-form-element>form</a></code> element if it is an <code id=implicit-submission:the-input-element><a href=#the-input-element>input</a></code> element whose
  <a href=#form-owner id=implicit-submission:form-owner-2>form owner</a> is that <code id=implicit-submission:the-form-element-6><a href=#the-form-element>form</a></code> element and whose <code id=implicit-submission:attr-input-type><a href=#attr-input-type>type</a></code> attribute is in one of the following states:
  <a href="#text-(type=text)-state-and-search-state-(type=search)" id="implicit-submission:text-(type=text)-state-and-search-state-(type=search)">Text</a>,
  <a href="#text-(type=text)-state-and-search-state-(type=search)" id="implicit-submission:text-(type=text)-state-and-search-state-(type=search)-2">Search</a>,
  <a href="#url-state-(type=url)" id="implicit-submission:url-state-(type=url)">URL</a>,
  <a href="#telephone-state-(type=tel)" id="implicit-submission:telephone-state-(type=tel)">Telephone</a>,
  <a href="#e-mail-state-(type=email)" id="implicit-submission:e-mail-state-(type=email)">E-mail</a>,
  <a href="#password-state-(type=password)" id="implicit-submission:password-state-(type=password)">Password</a>,
  <a href="#date-state-(type=date)" id="implicit-submission:date-state-(type=date)">Date</a>,
  <a href="#month-state-(type=month)" id="implicit-submission:month-state-(type=month)">Month</a>,
  <a href="#week-state-(type=week)" id="implicit-submission:week-state-(type=week)">Week</a>,
  <a href="#time-state-(type=time)" id="implicit-submission:time-state-(type=time)">Time</a>,
  <a href="#local-date-and-time-state-(type=datetime-local)" id="implicit-submission:local-date-and-time-state-(type=datetime-local)">Local Date and Time</a>,
  <a href="#number-state-(type=number)" id="implicit-submission:number-state-(type=number)">Number</a>
  </p>

  


  

  <h5 id=form-submission-algorithm>4.10.21.3 Form submission algorithm<a href=#form-submission-algorithm class=self-link></a></h5>

  <p>When a <code id=form-submission-algorithm:the-form-element><a href=#the-form-element>form</a></code> element <var>form</var> is <dfn id=concept-form-submit>submitted</dfn> from an element <var>submitter</var>
  (typically a button), optionally with a <var>submitted from <code id=form-submission-algorithm:dom-form-submit><a href=#dom-form-submit>submit()</a></code> method</var> flag set, the user agent must run the
  following steps:</p>

  <ol><li><p>Let <var>form document</var> be the <var>form</var>'s
   <a id=form-submission-algorithm:node-document href=https://dom.spec.whatwg.org/#concept-node-document data-x-internal=node-document>node document</a>.<li id=sandboxSubmitBlocked><p>If <var>form document</var> is not <a id=form-submission-algorithm:connected href=https://dom.spec.whatwg.org/#connected data-x-internal=connected>connected</a>, has
   no associated <a href=#concept-document-bc id=form-submission-algorithm:concept-document-bc>browsing context</a>, or its <a href=#active-sandboxing-flag-set id=form-submission-algorithm:active-sandboxing-flag-set>active
   sandboxing flag set</a> has its <a href=#sandboxed-forms-browsing-context-flag id=form-submission-algorithm:sandboxed-forms-browsing-context-flag>sandboxed forms browsing context flag</a> set, then
   abort these steps without doing anything.<li><p>Let <var>form browsing context</var> be the <a href=#concept-document-bc id=form-submission-algorithm:concept-document-bc-2>browsing
   context</a> of <var>form document</var>.<li><p>If the <var>submitted from <code id=form-submission-algorithm:dom-form-submit-2><a href=#dom-form-submit>submit()</a></code>
   method</var> flag is not set, and the <var>submitter</var> element's <a href=#concept-fs-novalidate id=form-submission-algorithm:concept-fs-novalidate>no-validate state</a> is false, then <a href=#interactively-validate-the-constraints id=form-submission-algorithm:interactively-validate-the-constraints>interactively
   validate the constraints</a> of <var>form</var> and examine the result: if the result
   is negative (the constraint validation concluded that there were invalid fields and probably
   informed the user of this) then <a href=https://dom.spec.whatwg.org/#concept-event-fire id=form-submission-algorithm:concept-event-fire data-x-internal=concept-event-fire>fire an event</a> named
   <code id=form-submission-algorithm:event-invalid><a href=#event-invalid>invalid</a></code> at the <var>form</var> element and then abort these
   steps.<li>
    <p>If the <var>submitted from <code id=form-submission-algorithm:dom-form-submit-3><a href=#dom-form-submit>submit()</a></code> method</var> flag
    is not set, then:

    <ol><li><p>Let <var>continue</var> be the result of <a href=https://dom.spec.whatwg.org/#concept-event-fire id=form-submission-algorithm:concept-event-fire-2 data-x-internal=concept-event-fire>firing an
     event</a> named <code id=form-submission-algorithm:event-submit><a href=#event-submit>submit</a></code> at <var>form</var>, with the
     <code id=form-submission-algorithm:dom-event-bubbles><a data-x-internal=dom-event-bubbles href=https://dom.spec.whatwg.org/#dom-event-bubbles>bubbles</a></code> attribute initialized to true and the <code id=form-submission-algorithm:dom-event-cancelable><a data-x-internal=dom-event-cancelable href=https://dom.spec.whatwg.org/#dom-event-cancelable>cancelable</a></code> attribute initialized to true.<li><p>If <var>continue</var> is false, then abort these steps.
    </ol>

   

   

   <li><p>Let <var>form data set</var> be the result of <a href=#constructing-the-form-data-set id=form-submission-algorithm:constructing-the-form-data-set>constructing the form data
   set</a> for <var>form</var> in the context of <var>submitter</var>.<li><p>Let <var>encoding</var> be the result of <a href=#picking-an-encoding-for-the-form id=form-submission-algorithm:picking-an-encoding-for-the-form>picking an encoding for the
   form</a>.</p>

   <li><p>Let <var>action</var> be the <var>submitter</var> element's <a href=#concept-fs-action id=form-submission-algorithm:concept-fs-action>action</a>.<li>

    <p>If <var>action</var> is the empty string, let <var>action</var> be the <a href=https://dom.spec.whatwg.org/#concept-document-url id="form-submission-algorithm:the-document's-address" data-x-internal="the-document's-address">URL</a> of the <var>form document</var>.</p>

    

   <li><p><a href=#parse-a-url id=form-submission-algorithm:parse-a-url>Parse</a> the <a id=form-submission-algorithm:url href=https://url.spec.whatwg.org/#concept-url data-x-internal=url>URL</a> <var>action</var>, relative
   to the <var>submitter</var> element's <a id=form-submission-algorithm:node-document-2 href=https://dom.spec.whatwg.org/#concept-node-document data-x-internal=node-document>node document</a>. If this fails, abort these
   steps.<li><p>Let <var>parsed action</var> be the <a href=#resulting-url-record id=form-submission-algorithm:resulting-url-record>resulting URL record</a>.<li><p>Let <var>scheme</var> be the <a href=https://url.spec.whatwg.org/#concept-url-scheme id=form-submission-algorithm:concept-url-scheme data-x-internal=concept-url-scheme>scheme</a> of
   <var>parsed action</var>.<li><p>Let <var>enctype</var> be the <var>submitter</var> element's <a href=#concept-fs-enctype id=form-submission-algorithm:concept-fs-enctype>enctype</a>.<li><p>Let <var>method</var> be the <var>submitter</var> element's <a href=#concept-fs-method id=form-submission-algorithm:concept-fs-method>method</a>.<li><p>Let <var>target</var> be the <var>submitter</var> element's <a href=#concept-fs-target id=form-submission-algorithm:concept-fs-target>target</a>.<li><p>If the user indicated a specific <a href=#browsing-context id=form-submission-algorithm:browsing-context>browsing context</a> to use when submitting the
   form, then let <var>target browsing context</var> be that <a href=#browsing-context id=form-submission-algorithm:browsing-context-2>browsing context</a>.
   Otherwise, apply <a href=#the-rules-for-choosing-a-browsing-context-given-a-browsing-context-name id=form-submission-algorithm:the-rules-for-choosing-a-browsing-context-given-a-browsing-context-name>the rules for choosing a browsing context given a browsing context
   name</a> using <var>target</var> as the name and <var>form browsing
   context</var> as the context in which the algorithm is executed, and let <var>target
   browsing context</var> be the resulting <a href=#browsing-context id=form-submission-algorithm:browsing-context-3>browsing context</a>.<li><p>If <var>target browsing context</var> was created in the previous step, or,
   alternatively, if the <var>form document</var> has not yet <a href=#completely-loaded id=form-submission-algorithm:completely-loaded>completely
   loaded</a> and the <var>submitted from <code id=form-submission-algorithm:dom-form-submit-4><a href=#dom-form-submit>submit()</a></code>
   method</var> flag is set, then let <var>replace</var> be true. Otherwise, let it be
   false.<li>

    <p>If the value of <var>method</var> is <a href=#attr-fs-method-dialog id=form-submission-algorithm:attr-fs-method-dialog>dialog</a> then jump to the <a href=#submit-dialog id=form-submission-algorithm:submit-dialog>submit
    dialog</a> steps.</p>

    <p>Otherwise, select the appropriate row in the table below based on the value of <var>scheme</var> as given by the first cell of each row. Then, select the appropriate cell
    on that row based on the value of <var>method</var> as given in the first cell of each
    column. Then, jump to the steps named in that cell and defined below the table.</p>

    <table><thead><tr><td>
      <th> <a href=#attr-fs-method-get id=form-submission-algorithm:attr-fs-method-get>GET</a>
      <th> <a href=#attr-fs-method-post id=form-submission-algorithm:attr-fs-method-post>POST</a>
     <tbody><tr><th> <code>http</code>
      <td> <a href=#submit-mutate-action id=form-submission-algorithm:submit-mutate-action>Mutate action URL</a>
      <td> <a href=#submit-body id=form-submission-algorithm:submit-body>Submit as entity body</a>
     <tr><th> <code>https</code>
      <td> <a href=#submit-mutate-action id=form-submission-algorithm:submit-mutate-action-2>Mutate action URL</a>
      <td> <a href=#submit-body id=form-submission-algorithm:submit-body-2>Submit as entity body</a>
     <tr><th> <code>ftp</code>
      <td> <a href=#submit-get-action id=form-submission-algorithm:submit-get-action>Get action URL</a>
      <td> <a href=#submit-get-action id=form-submission-algorithm:submit-get-action-2>Get action URL</a>
     <tr><th> <code>javascript</code>
      <td> <a href=#submit-get-action id=form-submission-algorithm:submit-get-action-3>Get action URL</a>
      <td> <a href=#submit-get-action id=form-submission-algorithm:submit-get-action-4>Get action URL</a>
     <tr><th> <code>data</code>
      <td> <a href=#submit-mutate-action id=form-submission-algorithm:submit-mutate-action-3>Mutate action URL</a>
      <td> <a href=#submit-get-action id=form-submission-algorithm:submit-get-action-5>Get action URL</a>
     <tr><th> <code>mailto</code>
      <td> <a href=#submit-mailto-headers id=form-submission-algorithm:submit-mailto-headers>Mail with headers</a>
      <td> <a href=#submit-mailto-body id=form-submission-algorithm:submit-mailto-body>Mail as body</a>
    </table>

    <p>If <var>scheme</var> is not one of those listed in this table, then the behavior is
    not defined by this specification. User agents should, in the absence of another specification
    defining this, act in a manner analogous to that defined in this specification for similar
    schemes.</p>

    <p>Each <code id=form-submission-algorithm:the-form-element-2><a href=#the-form-element>form</a></code> element has a <dfn id=planned-navigation>planned navigation</dfn>, which is either null or a
    <a href=#concept-task id=form-submission-algorithm:concept-task>task</a>; when the <code id=form-submission-algorithm:the-form-element-3><a href=#the-form-element>form</a></code> is first created, its
    <a href=#planned-navigation id=form-submission-algorithm:planned-navigation>planned navigation</a> must be set to null. In the behaviors described below, when the
    user agent is required to <dfn id=plan-to-navigate>plan to navigate</dfn> to a particular resource <var>destination</var>, it must run the following steps:</p>

    <ol><li><p>If the <code id=form-submission-algorithm:the-form-element-4><a href=#the-form-element>form</a></code> has a non-null <a href=#planned-navigation id=form-submission-algorithm:planned-navigation-2>planned navigation</a>, remove it from
     its <a href=#task-queue id=form-submission-algorithm:task-queue>task queue</a>.<li>

      <p>Let the <code id=form-submission-algorithm:the-form-element-5><a href=#the-form-element>form</a></code>'s <a href=#planned-navigation id=form-submission-algorithm:planned-navigation-3>planned navigation</a> be a new <a href=#concept-task id=form-submission-algorithm:concept-task-2>task</a> that consists of running the following steps:</p>

      <ol><li><p>Let the <code id=form-submission-algorithm:the-form-element-6><a href=#the-form-element>form</a></code>'s <a href=#planned-navigation id=form-submission-algorithm:planned-navigation-4>planned navigation</a> be null.<li><p><a href=#navigate id=form-submission-algorithm:navigate>Navigate</a> <var>target browsing context</var> to
       <var>destination</var>. If <var>replace</var> is true, then <var>target browsing
       context</var> must be navigated with <a href=#replacement-enabled id=form-submission-algorithm:replacement-enabled>replacement enabled</a>.</p>

      </ol>

      <p>For the purposes of this task, <var>target browsing context</var> and <var>replace</var> are the variables that were set up when the overall form submission
      algorithm was run, with their values as they stood when this <a href=#planned-navigation id=form-submission-algorithm:planned-navigation-5>planned navigation</a>
      was <a href=#queue-a-task id=form-submission-algorithm:queue-a-task>queued</a>.</p>

     <li>

      <p><a href=#queue-a-task id=form-submission-algorithm:queue-a-task-2>Queue the task</a> that is the <code id=form-submission-algorithm:the-form-element-7><a href=#the-form-element>form</a></code>'s new
      <a href=#planned-navigation id=form-submission-algorithm:planned-navigation-6>planned navigation</a>.</p>

      <p>The <a href=#task-source id=form-submission-algorithm:task-source>task source</a> for this task is the <a href=#dom-manipulation-task-source id=form-submission-algorithm:dom-manipulation-task-source>DOM manipulation task
      source</a>.</p>

     </ol>

    <p>The behaviors are as follows:</p>

    <dl><dt><dfn id=submit-mutate-action>Mutate action URL</dfn>
     <dd>

      <p>Let <var>query</var> be the result of running the
      <a id=form-submission-algorithm:application/x-www-form-urlencoded-serializer href=https://url.spec.whatwg.org/#concept-urlencoded-serializer data-x-internal=application/x-www-form-urlencoded-serializer><code>application/x-www-form-urlencoded</code> serializer</a> with <var>form data
      set</var> and <var>encoding</var>.</p>

      <p>Set <var>parsed action</var>'s <a href=https://url.spec.whatwg.org/#concept-url-query id=form-submission-algorithm:concept-url-query data-x-internal=concept-url-query>query</a>
      component to <var>query</var>.</p>

      <p><a href=#plan-to-navigate id=form-submission-algorithm:plan-to-navigate>Plan to navigate</a> to <var>parsed action</var>.</p>

     <dt><dfn id=submit-body>Submit as entity body</dfn>
     <dd>
      <p>Switch on <var>enctype</var>:

      <dl class=switch><dt><code id=form-submission-algorithm:attr-fs-enctype-urlencoded><a href=#attr-fs-enctype-urlencoded>application/x-www-form-urlencoded</a></code><dd>
        <p>Let <var>body</var> be the result of running the
        <a id=form-submission-algorithm:application/x-www-form-urlencoded-serializer-2 href=https://url.spec.whatwg.org/#concept-urlencoded-serializer data-x-internal=application/x-www-form-urlencoded-serializer><code>application/x-www-form-urlencoded</code> serializer</a> with <var>form
        data set</var> and <var>encoding</var>.</p>

        <p>Set <var>body</var> to the result of <a href=https://encoding.spec.whatwg.org/#utf-8-encode id=form-submission-algorithm:utf-8-encode data-x-internal=utf-8-encode>encoding</a>
        <var>body</var>.</p>

        <p>Let <var>MIME type</var> be "<code id=form-submission-algorithm:application/x-www-form-urlencoded><a data-x-internal=application/x-www-form-urlencoded href=https://url.spec.whatwg.org/#concept-urlencoded>application/x-www-form-urlencoded</a></code>".</p>
       <dt><code id=form-submission-algorithm:attr-fs-enctype-formdata><a href=#attr-fs-enctype-formdata>multipart/form-data</a></code><dd>
        <p>Let <var>body</var> be the result of running the <a href=#multipart/form-data-encoding-algorithm id=form-submission-algorithm:multipart/form-data-encoding-algorithm><code>multipart/form-data</code> encoding algorithm</a> with <var>form data set</var>
        and <var>encoding</var>.</p>

        <p>Let <var>MIME type</var> be the concatenation of the string "<code>multipart/form-data;</code>", a U+0020 SPACE character, the string "<code>boundary=</code>", and the <a href=#multipart/form-data-boundary-string id=form-submission-algorithm:multipart/form-data-boundary-string><code>multipart/form-data</code>
        boundary string</a> generated by the <a href=#multipart/form-data-encoding-algorithm id=form-submission-algorithm:multipart/form-data-encoding-algorithm-2><code>multipart/form-data</code>
        encoding algorithm</a>.</p>
       <dt><code id=form-submission-algorithm:attr-fs-enctype-text><a href=#attr-fs-enctype-text>text/plain</a></code><dd>
        <p>Let <var>body</var> be the result of running the <a href=#text/plain-encoding-algorithm id=form-submission-algorithm:text/plain-encoding-algorithm><code>text/plain</code>
        encoding algorithm</a> with <var>form data set</var> and <var>encoding</var>.</p>

        <p>Set <var>body</var> to the result of <a href=https://encoding.spec.whatwg.org/#encode id=form-submission-algorithm:encode data-x-internal=encode>encoding</a>
        <var>body</var> using <var>encoding</var>.</p>

        <p>Let <var>MIME type</var> be "<code>text/plain</code>".</p>
       </dl>

      <p><a href=#plan-to-navigate id=form-submission-algorithm:plan-to-navigate-2>Plan to navigate</a> to a new <a href=https://fetch.spec.whatwg.org/#concept-request id=form-submission-algorithm:concept-request data-x-internal=concept-request>request</a> whose
      <a href=https://fetch.spec.whatwg.org/#concept-request-url id=form-submission-algorithm:concept-request-url data-x-internal=concept-request-url>url</a> is <var>parsed action</var>, <a href=https://fetch.spec.whatwg.org/#concept-request-method id=form-submission-algorithm:concept-request-method data-x-internal=concept-request-method>method</a> is <var>method</var>, <a href=https://fetch.spec.whatwg.org/#concept-request-header-list id=form-submission-algorithm:concept-request-header-list data-x-internal=concept-request-header-list>header list</a> consists of `<code>Content-Type</code>`/<var>MIME type</var>, and <a href=https://fetch.spec.whatwg.org/#concept-request-body id=form-submission-algorithm:concept-request-body data-x-internal=concept-request-body>body</a> is <var>body</var>.</p>

     <dt><dfn id=submit-get-action>Get action URL</dfn>
     <dd>

      <p><a href=#plan-to-navigate id=form-submission-algorithm:plan-to-navigate-3>Plan to navigate</a> to <var>parsed action</var>.</p>

      <p class=note>The <var>form data set</var> is discarded.</p>

     <dt><dfn id=submit-mailto-headers>Mail with headers</dfn>
     <dd>
      <p>Let <var>headers</var> be the result of running the
      <a id=form-submission-algorithm:application/x-www-form-urlencoded-serializer-3 href=https://url.spec.whatwg.org/#concept-urlencoded-serializer data-x-internal=application/x-www-form-urlencoded-serializer><code>application/x-www-form-urlencoded</code> serializer</a> with <var>form data
      set</var> and <var>encoding</var>.</p>

      <p>Replace occurrences of U+002B PLUS SIGN characters (+) in <var>headers</var> with
      the string "<code>%20</code>".</p>

      <p>Set <var>parsed action</var>'s <a href=https://url.spec.whatwg.org/#concept-url-query id=form-submission-algorithm:concept-url-query-2 data-x-internal=concept-url-query>query</a> to
      <var>headers</var>.</p>

      <p><a href=#plan-to-navigate id=form-submission-algorithm:plan-to-navigate-4>Plan to navigate</a> to <var>parsed action</var>.</p>
     <dt><dfn id=submit-mailto-body>Mail as body</dfn>
     <dd>
      <p>Switch on <var>enctype</var>:

      <dl class=switch><dt><code id=form-submission-algorithm:attr-fs-enctype-text-2><a href=#attr-fs-enctype-text>text/plain</a></code><dd>
        <p>Let <var>body</var> be the result of running the <a href=#text/plain-encoding-algorithm id=form-submission-algorithm:text/plain-encoding-algorithm-2><code>text/plain</code> encoding algorithm</a> with <var>form data set</var> and
        <var>encoding</var>.</p>

        <p>Set <var>body</var> to the result of concatenating the result of <a href=https://url.spec.whatwg.org/#utf-8-percent-encode id=form-submission-algorithm:utf-8-percent-encode data-x-internal=utf-8-percent-encode>UTF-8 percent encoding</a> each code point in <var>body</var>, using the
        <a id=form-submission-algorithm:default-encode-set href=https://url.spec.whatwg.org/#default-encode-set data-x-internal=default-encode-set>default encode set</a>. <a href=#refsURL>[URL]</a></p>
       <dt>Otherwise<dd><p>Let <var>body</var> be the result of running the
       <a id=form-submission-algorithm:application/x-www-form-urlencoded-serializer-4 href=https://url.spec.whatwg.org/#concept-urlencoded-serializer data-x-internal=application/x-www-form-urlencoded-serializer><code>application/x-www-form-urlencoded</code> serializer</a> with <var>form data
       set</var> and <var>encoding</var>.</dl>

      <p>If <var>parsed action</var>'s <a href=https://url.spec.whatwg.org/#concept-url-query id=form-submission-algorithm:concept-url-query-3 data-x-internal=concept-url-query>query</a> is null, then
      set it to the empty string.

      <p>If <var>parsed action</var>'s <a href=https://url.spec.whatwg.org/#concept-url-query id=form-submission-algorithm:concept-url-query-4 data-x-internal=concept-url-query>query</a> is not the
      empty string, then append a single U+0026 AMPERSAND character (&amp;) to it.

      <p>Append "<code>body=</code>" to <var>parsed action</var>'s <a href=https://url.spec.whatwg.org/#concept-url-query id=form-submission-algorithm:concept-url-query-5 data-x-internal=concept-url-query>query</a>.</p>

      <p>Append <var>body</var> to <var>parsed action</var>'s <a href=https://url.spec.whatwg.org/#concept-url-query id=form-submission-algorithm:concept-url-query-6 data-x-internal=concept-url-query>query</a>.</p>

      <p><a href=#plan-to-navigate id=form-submission-algorithm:plan-to-navigate-5>Plan to navigate</a> to <var>parsed action</var>.</p>
     <dt><dfn id=submit-dialog>Submit dialog</dfn>
     <dd>

      <p>Let <var>subject</var> be the nearest ancestor <code id=form-submission-algorithm:the-dialog-element><a href=#the-dialog-element>dialog</a></code> element of <var>form</var>, if any.</p>

      <p>If there isn't one, or if it does not have an <code id=form-submission-algorithm:attr-dialog-open><a href=#attr-dialog-open>open</a></code>
      attribute, do nothing. Otherwise, proceed as follows:</p>

      <p>If <var>submitter</var> is an <code id=form-submission-algorithm:the-input-element><a href=#the-input-element>input</a></code> element whose <code id=form-submission-algorithm:attr-input-type><a href=#attr-input-type>type</a></code> attribute is in the <a href="#image-button-state-(type=image)" id="form-submission-algorithm:image-button-state-(type=image)">Image Button</a> state, then let <var>result</var>
      be the string formed by concatenating the <a href=#concept-input-type-image-coordinate id=form-submission-algorithm:concept-input-type-image-coordinate>selected coordinate</a>'s <var>x</var>-component, expressed as a base-ten number using <a href=#ascii-digits id=form-submission-algorithm:ascii-digits>ASCII digits</a>, a
      U+002C COMMA character (,), and the <a href=#concept-input-type-image-coordinate id=form-submission-algorithm:concept-input-type-image-coordinate-2>selected
      coordinate</a>'s <var>y</var>-component, expressed in the same way as the <var>x</var>-component.</p>

      <p>Otherwise, if <var>submitter</var> has a <a href=#concept-fe-value id=form-submission-algorithm:concept-fe-value>value</a>, then let <var>result</var> be that <a href=#concept-fe-value id=form-submission-algorithm:concept-fe-value-2>value</a>.</p>

      <p>Otherwise, there is no <var>result</var>.</p>

      <p>Then, <a href=#close-the-dialog id=form-submission-algorithm:close-the-dialog>close the dialog</a> <var>subject</var>. If there is a <var>result</var>, let that be the return value.</p>

     </dl>

   </ol>


  <h5 id=constructing-form-data-set>4.10.21.4 Constructing the form data set<a href=#constructing-form-data-set class=self-link></a></h5>

  <p>The algorithm to <dfn id=constructing-the-form-data-set data-lt="constructing the form data set" data-export="">construct the form data set</dfn> for a form
  <var>form</var> optionally in the context of a submitter <var>submitter</var> is as follows. If
  not specified otherwise, <var>submitter</var> is null.</p>

  <ol><li><p>Let <var>controls</var> be a list of all the <a href=#category-submit id=constructing-form-data-set:category-submit>submittable elements</a> whose <a href=#form-owner id=constructing-form-data-set:form-owner>form owner</a> is <var>form</var>, in <a id=constructing-form-data-set:tree-order href=https://dom.spec.whatwg.org/#concept-tree-order data-x-internal=tree-order>tree order</a>.<li><p>Let the <var>form data set</var> be a list of name-value-type tuples, initially
   empty.<li>

    <p><i>Loop</i>: For each element <var>field</var> in <var>controls</var>, in
    <a id=constructing-form-data-set:tree-order-2 href=https://dom.spec.whatwg.org/#concept-tree-order data-x-internal=tree-order>tree order</a>, run the following substeps:</p>

    <ol><li>

      <p>If any of the following conditions are met, then skip these substeps for this element:</p>

      <ul><li>The <var>field</var> element has a <code id=constructing-form-data-set:the-datalist-element><a href=#the-datalist-element>datalist</a></code> element ancestor.<li>The <var>field</var> element is <a href=#concept-fe-disabled id=constructing-form-data-set:concept-fe-disabled>disabled</a>.<li>The <var>field</var> element is a <a href=#concept-button id=constructing-form-data-set:concept-button>button</a> but
       it is not <var>submitter</var>.<li>The <var>field</var> element is an <code id=constructing-form-data-set:the-input-element><a href=#the-input-element>input</a></code> element whose <code id=constructing-form-data-set:attr-input-type><a href=#attr-input-type>type</a></code> attribute is in the <a href="#checkbox-state-(type=checkbox)" id="constructing-form-data-set:checkbox-state-(type=checkbox)">Checkbox</a> state and whose <a href=#concept-fe-checked id=constructing-form-data-set:concept-fe-checked>checkedness</a> is false.<li>The <var>field</var> element is an <code id=constructing-form-data-set:the-input-element-2><a href=#the-input-element>input</a></code> element whose <code id=constructing-form-data-set:attr-input-type-2><a href=#attr-input-type>type</a></code> attribute is in the <a href="#radio-button-state-(type=radio)" id="constructing-form-data-set:radio-button-state-(type=radio)">Radio Button</a> state and whose <a href=#concept-fe-checked id=constructing-form-data-set:concept-fe-checked-2>checkedness</a> is false.<li>The <var>field</var> element is not an <code id=constructing-form-data-set:the-input-element-3><a href=#the-input-element>input</a></code> element whose <code id=constructing-form-data-set:attr-input-type-3><a href=#attr-input-type>type</a></code> attribute is in the <a href="#image-button-state-(type=image)" id="constructing-form-data-set:image-button-state-(type=image)">Image Button</a> state, and either the <var>field</var> element does not have a <code id=constructing-form-data-set:attr-fe-name><a href=#attr-fe-name>name</a></code> attribute
       specified, or its <code id=constructing-form-data-set:attr-fe-name-2><a href=#attr-fe-name>name</a></code> attribute's value is the empty
       string.<li>The <var>field</var> element is an <code id=constructing-form-data-set:the-object-element><a href=#the-object-element>object</a></code> element that is not using
       a <a href=#plugin id=constructing-form-data-set:plugin>plugin</a>.</ul>

      <p>Otherwise, process <var>field</var> as follows:</p>

     <li><p>Let <var>type</var> be the value of the <code>type</code> IDL
     attribute of <var>field</var>.<li>

      <p>If the <var>field</var> element is an <code id=constructing-form-data-set:the-input-element-4><a href=#the-input-element>input</a></code> element whose <code id=constructing-form-data-set:attr-input-type-4><a href=#attr-input-type>type</a></code> attribute is in the <a href="#image-button-state-(type=image)" id="constructing-form-data-set:image-button-state-(type=image)-2">Image Button</a> state, then run these further nested
      substeps:</p>

      <ol><li><p>If the <var>field</var> element has a <code id=constructing-form-data-set:attr-fe-name-3><a href=#attr-fe-name>name</a></code>
       attribute specified and its value is not the empty string, let <var>name</var> be
       that value followed by a single U+002E FULL STOP character (.). Otherwise, let <var>name</var> be the empty string.<li><p>Let <var>name<sub>x</sub></var> be the string consisting of the
       concatenation of <var>name</var> and a single U+0078 LATIN SMALL LETTER X character
       (x).<li><p>Let <var>name<sub>y</sub></var> be the string consisting of the
       concatenation of <var>name</var> and a single U+0079 LATIN SMALL LETTER Y character
       (y).<li><p>The <var>field</var> element is <var>submitter</var>, and before
       this algorithm was invoked the user <a href=#concept-input-type-image-coordinate id=constructing-form-data-set:concept-input-type-image-coordinate>indicated a coordinate</a>. Let <var>x</var> be the <var>x</var>-component of the coordinate selected by the
       user, and let <var>y</var> be the <var>y</var>-component of the coordinate
       selected by the user.<li><p>Append an entry to the <var>form data set</var> with the name <var>name<sub>x</sub></var>, the value <var>x</var>, and the type <var>type</var>.<li><p>Append an entry to the <var>form data set</var> with the name <var>name<sub>y</sub></var> and the value <var>y</var>, and the type
       <var>type</var>.<li><p>Skip the remaining substeps for this element: if there are any more elements in <var>controls</var>, return to the top of the <i>loop</i> step, otherwise, jump to the
       <i>end</i> step below.</ol>

     <li><p>Let <var>name</var> be the value of the <var>field</var> element's
     <code id=constructing-form-data-set:attr-fe-name-4><a href=#attr-fe-name>name</a></code> attribute.<li><p>If the <var>field</var> element is a <code id=constructing-form-data-set:the-select-element><a href=#the-select-element>select</a></code> element, then for each
     <code id=constructing-form-data-set:the-option-element><a href=#the-option-element>option</a></code> element in the <code id=constructing-form-data-set:the-select-element-2><a href=#the-select-element>select</a></code> element's <a href=#concept-select-option-list id=constructing-form-data-set:concept-select-option-list>list of options</a> whose <a href=#concept-option-selectedness id=constructing-form-data-set:concept-option-selectedness>selectedness</a> is true and that is not <a href=#concept-option-disabled id=constructing-form-data-set:concept-option-disabled>disabled</a>, append an entry to the <var>form data
     set</var> with the <var>name</var> as the name, the <a href=#concept-option-value id=constructing-form-data-set:concept-option-value>value</a> of the <code id=constructing-form-data-set:the-option-element-2><a href=#the-option-element>option</a></code> element as the value, and
     <var>type</var> as the type.<li>

      <p>Otherwise, if the <var>field</var> element is an <code id=constructing-form-data-set:the-input-element-5><a href=#the-input-element>input</a></code> element whose
      <code id=constructing-form-data-set:attr-input-type-5><a href=#attr-input-type>type</a></code> attribute is in the <a href="#checkbox-state-(type=checkbox)" id="constructing-form-data-set:checkbox-state-(type=checkbox)-2">Checkbox</a> state or the <a href="#radio-button-state-(type=radio)" id="constructing-form-data-set:radio-button-state-(type=radio)-2">Radio Button</a> state, then run these further nested
      substeps:</p>

      <ol><li><p>If the <var>field</var> element has a <code id=constructing-form-data-set:attr-input-value><a href=#attr-input-value>value</a></code> attribute specified, then let <var>value</var>
       be the value of that attribute; otherwise, let <var>value</var> be the string "<code>on</code>".<li><p>Append an entry to the <var>form data set</var> with <var>name</var>
       as the name, <var>value</var> as the value, and <var>type</var> as the
       type.</ol>

     <li><p>Otherwise, if the <var>field</var> element is an <code id=constructing-form-data-set:the-input-element-6><a href=#the-input-element>input</a></code> element
     whose <code id=constructing-form-data-set:attr-input-type-6><a href=#attr-input-type>type</a></code> attribute is in the <a href="#file-upload-state-(type=file)" id="constructing-form-data-set:file-upload-state-(type=file)">File Upload</a> state, then for each file <a href=#concept-input-type-file-selected id=constructing-form-data-set:concept-input-type-file-selected>selected</a> in the <code id=constructing-form-data-set:the-input-element-7><a href=#the-input-element>input</a></code> element,
     append an entry to the <var>form data set</var> with the <var>name</var> as
     the name, the file (consisting of the name, the type, and the body) as the value, and <var>type</var> as the type. If there are no <a href=#concept-input-type-file-selected id=constructing-form-data-set:concept-input-type-file-selected-2>selected files</a>, then append an entry to the
     <var>form data set</var> with the <var>name</var> as the name, the empty
     string as the value, and <code id=constructing-form-data-set:application/octet-stream><a data-x-internal=application/octet-stream href=https://tools.ietf.org/html/rfc2046#section-4.5.1>application/octet-stream</a></code> as the type.<li><p>Otherwise, if the <var>field</var> element is an <code id=constructing-form-data-set:the-object-element-2><a href=#the-object-element>object</a></code> element:
     try to obtain a form submission value from the <a href=#plugin id=constructing-form-data-set:plugin-2>plugin</a>, and if that is successful,
     append an entry to the <var>form data set</var> with <var>name</var> as the
     name, the returned form submission value as the value, and the string "<code>object</code>" as the type.<li><p>Otherwise, append an entry to the <var>form data set</var> with <var>name</var> as the name, the <a href=#concept-fe-value id=constructing-form-data-set:concept-fe-value>value</a> of the <var>field</var> element as the value, and <var>type</var> as the type.<li>

      <p>If the element has a <code id=constructing-form-data-set:attr-fe-dirname><a href=#attr-fe-dirname>dirname</a></code> attribute, and that
      attribute's value is not the empty string, then run these substeps:</p>

      <ol><li><p>Let <var>dirname</var> be the value of the element's <code id=constructing-form-data-set:attr-fe-dirname-2><a href=#attr-fe-dirname>dirname</a></code> attribute.<li><p>Let <var>dir</var> be the string "<code>ltr</code>" if <a href=#the-directionality id=constructing-form-data-set:the-directionality>the
       directionality</a> of the element is '<a href=#concept-ltr id=constructing-form-data-set:concept-ltr>ltr</a>', and "<code>rtl</code>" otherwise (i.e. when <a href=#the-directionality id=constructing-form-data-set:the-directionality-2>the directionality</a> of the element is
       '<a href=#concept-rtl id=constructing-form-data-set:concept-rtl>rtl</a>').<li><p>Append an entry to the <var>form data set</var> with <var>dirname</var> as the name, <var>dir</var> as the value, and the string
       "<code>direction</code>" as the type.</ol>

      <p class=note>An element can only have a <code id=constructing-form-data-set:attr-fe-dirname-3><a href=#attr-fe-dirname>dirname</a></code>
      attribute if it is a <code id=constructing-form-data-set:the-textarea-element><a href=#the-textarea-element>textarea</a></code> element or an <code id=constructing-form-data-set:the-input-element-8><a href=#the-input-element>input</a></code> element whose
      <code id=constructing-form-data-set:attr-input-type-7><a href=#attr-input-type>type</a></code> attribute is in either the <a href="#text-(type=text)-state-and-search-state-(type=search)" id="constructing-form-data-set:text-(type=text)-state-and-search-state-(type=search)">Text</a> state or the <a href="#text-(type=text)-state-and-search-state-(type=search)" id="constructing-form-data-set:text-(type=text)-state-and-search-state-(type=search)-2">Search</a> state.</p>

     </ol>

   <li>

    <p><i>End</i>: For the name of each entry in the <var>form data set</var>, and for the
    value of each entry in the <var>form data set</var> whose type is not "<code>file</code>" or "<code>textarea</code>", replace every occurrence of a U+000D
    CARRIAGE RETURN (CR) character not followed by a U+000A LINE FEED (LF) character, and every
    occurrence of a U+000A LINE FEED (LF) character not preceded by a U+000D CARRIAGE RETURN (CR)
    character, by a two-character string consisting of a U+000D CARRIAGE RETURN U+000A LINE FEED
    (CRLF) character pair.</p>

    <p class=note>In the case of the <a href=#concept-fe-value id=constructing-form-data-set:concept-fe-value-2>value</a> of
    <code id=constructing-form-data-set:the-textarea-element-2><a href=#the-textarea-element>textarea</a></code> elements, this newline normalization is already performed during the
    conversion of the control's <a href=#concept-textarea-raw-value id=constructing-form-data-set:concept-textarea-raw-value>raw value</a> into the
    control's <a href=#concept-fe-value id=constructing-form-data-set:concept-fe-value-3>value</a> (which also performs any necessary line
    wrapping). In the case of <code id=constructing-form-data-set:the-input-element-9><a href=#the-input-element>input</a></code> elements <code id=constructing-form-data-set:attr-input-type-8><a href=#attr-input-type>type</a></code>
    attributes in the <a href="#file-upload-state-(type=file)" id="constructing-form-data-set:file-upload-state-(type=file)-2">File Upload</a> state, the value is not
    normalized.</p>

   <li><p>Replace the name of each entry in the <var>form data set</var>, and the value of each
   entry in the <var>form data set</var> whose type is not "<code>file</code>", with the
   results of <a id=constructing-form-data-set:converting-to-a-sequence-of-unicode-scalar-values href=https://heycam.github.io/webidl/#dfn-obtain-unicode data-x-internal=converting-to-a-sequence-of-unicode-scalar-values>converting to a sequence of Unicode scalar values</a>.<li><p>Return the <var>form data set</var>.</ol>

  


  

  <h5 id=selecting-a-form-submission-encoding>4.10.21.5 Selecting a form submission encoding<a href=#selecting-a-form-submission-encoding class=self-link></a></h5>

  <p>If the user agent is to <dfn id=picking-an-encoding-for-the-form>pick an encoding for a
  form</dfn>, it must run the following steps:</p>

  <ol><li><p>Let <var>encoding</var> be the <a id="selecting-a-form-submission-encoding:document's-character-encoding" href=https://dom.spec.whatwg.org/#concept-document-encoding data-x-internal="document's-character-encoding">document's character encoding</a>.<li>
    <p>If the <code id=selecting-a-form-submission-encoding:the-form-element><a href=#the-form-element>form</a></code> element has an <code id=selecting-a-form-submission-encoding:attr-form-accept-charset><a href=#attr-form-accept-charset>accept-charset</a></code> attribute, set <var>encoding</var> to
    the return value of running these substeps:</p>

    <ol><li><p>Let <var>input</var> be the value of the <code id=selecting-a-form-submission-encoding:the-form-element-2><a href=#the-form-element>form</a></code> element's <code id=selecting-a-form-submission-encoding:attr-form-accept-charset-2><a href=#attr-form-accept-charset>accept-charset</a></code> attribute.<li><p>Let <var>candidate encoding labels</var> be the result of <a href=#split-a-string-on-spaces id=selecting-a-form-submission-encoding:split-a-string-on-spaces>splitting <var>input</var> on spaces</a>.<li><p>Let <var>candidate encodings</var> be an empty list of <a href=https://encoding.spec.whatwg.org/#encoding id=selecting-a-form-submission-encoding:encoding data-x-internal=encoding>character
     encodings</a>.<li><p>For each token in <var>candidate encoding labels</var> in turn (in the order in which
     they were found in <var>input</var>), <a href=https://encoding.spec.whatwg.org/#concept-encoding-get id=selecting-a-form-submission-encoding:getting-an-encoding data-x-internal=getting-an-encoding>get an encoding</a>
     for the token and, if this does not result in failure, append the <a id=selecting-a-form-submission-encoding:encoding-2 href=https://encoding.spec.whatwg.org/#encoding data-x-internal=encoding>encoding</a> to
     <var>candidate encodings</var>.<li><p>If <var>candidate encodings</var> is empty, return <a id=selecting-a-form-submission-encoding:utf-8 href=https://encoding.spec.whatwg.org/#utf-8 data-x-internal=utf-8>UTF-8</a>.<li><p>Return the first encoding in <var>candidate encodings</var>.</ol>
   <li><p>Return the result of <a href=https://encoding.spec.whatwg.org/#get-an-output-encoding id=selecting-a-form-submission-encoding:get-an-output-encoding data-x-internal=get-an-output-encoding>getting an output
   encoding</a> from <var>encoding</var>.</ol>

  


  <h5 id=url-encoded-form-data>4.10.21.6 URL-encoded form data<a href=#url-encoded-form-data class=self-link></a></h5>

  <p id=application-x-www-form-urlencoded-encoding-algorithm><span id=application/x-www-form-urlencoded-encoding-algorithm></span>See the WHATWG URL standard for
  details on <code id=url-encoded-form-data:application/x-www-form-urlencoded><a data-x-internal=application/x-www-form-urlencoded href=https://url.spec.whatwg.org/#concept-urlencoded>application/x-www-form-urlencoded</a></code>. <a href=#refsURL>[URL]</a></p>


  <h5 id=multipart-form-data>4.10.21.7 Multipart form data<a href=#multipart-form-data class=self-link></a></h5><div class=status><input onclick=toggleStatus(this) value= type=button><p class=bugs><strong>Spec bugs:</strong> <a href="https://www.w3.org/Bugs/Public/show_bug.cgi?id=16909" title="multipart/form-data: field name encoding is not specified; browsers do incompatible things">16909</a></div>

  

  

  

  <p>The <dfn id=multipart/form-data-encoding-algorithm data-export=""><code>multipart/form-data</code> encoding algorithm</dfn>, given a
  <var>form data set</var> and <var>encoding</var>, is as follows:</p>

  <ol><li><p>Let <var>result</var> be the empty string.<li><p>Let <var>charset</var> be the <a href=https://encoding.spec.whatwg.org/#name id=multipart-form-data:encoding-name data-x-internal=encoding-name>name</a> of
   <var>encoding</var>.<li>

    <p>For each entry in the <var>form data set</var>, perform these substeps:</p>

    <ol><li><p>If the entry's name is "<code id=multipart-form-data:attr-fe-name-charset><a href=#attr-fe-name-charset>_charset_</a></code>" and its
     type is "<code>hidden</code>", replace its value with <var>charset</var>.<li><p>For each character in the entry's name and value that cannot be expressed using the
     selected character encoding, replace the character by a string consisting of a U+0026 AMPERSAND
     character (&amp;), a U+0023 NUMBER SIGN character (#), one or more <a href=#ascii-digits id=multipart-form-data:ascii-digits>ASCII digits</a>
     representing the Unicode code point of the character in base ten, and finally a U+003B
     SEMICOLON character (;).</ol>

   <li>

    <p>Encode the (now mutated) <var>form data set</var> using the rules described by RFC 7578,
    <cite>Returning Values from Forms: <code>multipart/form-data</code></cite>, and return
    the resulting byte stream. <a href=#refsRFC7578>[RFC7578]</a></p>

    <p>Each entry in the <var>form data set</var> is a <i>field</i>, the name of the entry is the
    <i>field name</i> and the value of the entry is the <i>field value</i>.</p>

    <p>The order of parts must be the same as the order of fields in the <var>form data set</var>.
    Multiple entries with the same name must be treated as distinct fields.</p>

    <p>The parts of the generated <code id=multipart-form-data:multipart/form-data><a href=#multipart/form-data>multipart/form-data</a></code> resource that correspond to
    non-file fields must not have a `<code id=multipart-form-data:content-type><a href=#content-type>Content-Type</a></code>` header specified. Their names and
    values must be encoded using the character encoding selected above.</p>

    <p>File names included in the generated <code id=multipart-form-data:multipart/form-data-2><a href=#multipart/form-data>multipart/form-data</a></code> resource (as part of
    file fields) must use the character encoding selected above, though the precise name may be
    approximated if necessary (e.g. newlines could be removed from file names, quotes could be
    changed to "%22", and characters not expressible in the selected character encoding could be
    replaced by other characters).

    <p>The boundary used by the user agent in generating the return value of this algorithm is the
    <dfn id=multipart/form-data-boundary-string data-export=""><code>multipart/form-data</code> boundary string</dfn>. (This value is used
    to generate the MIME type of the form submission payload generated by this algorithm.)</p>

   </ol>

  

  <p>For details on how to interpret <code id=multipart-form-data:multipart/form-data-3><a href=#multipart/form-data>multipart/form-data</a></code> payloads, see RFC 7578. <a href=#refsRFC7578>[RFC7578]</a></p>


  <h5 id=plain-text-form-data>4.10.21.8 Plain text form data<a href=#plain-text-form-data class=self-link></a></h5>

  

  <p>The <dfn id=text/plain-encoding-algorithm><code>text/plain</code> encoding algorithm</dfn>, given a <var>form data
  set</var> and <var>encoding</var>, is as follows:</p>

  <ol><li><p>Let <var>result</var> be the empty string.<li><p>Let <var>charset</var> be the <a href=https://encoding.spec.whatwg.org/#name id=plain-text-form-data:encoding-name data-x-internal=encoding-name>name</a> of
   <var>encoding</var>.<li>

    <p>For each entry in the <var>form data set</var>, perform these substeps:</p>

    <ol><li><p>If the entry's name is "<code id=plain-text-form-data:attr-fe-name-charset><a href=#attr-fe-name-charset>_charset_</a></code>" and its
     type is "<code>hidden</code>", replace its value with <var>charset</var>.<li><p>If the entry's type is "<code>file</code>", replace its value with the file's
     name only.<li><p>Append the entry's name to <var>result</var>.<li><p>Append a single U+003D EQUALS SIGN character (=) to <var>result</var>.<li><p>Append the entry's value to <var>result</var>.<li><p>Append a U+000D CARRIAGE RETURN (CR) U+000A LINE FEED (LF) character pair to <var>result</var>.</ol>

   <li><p>Return <var>result</var>.</ol>

  

  <p>Payloads using the <code id=plain-text-form-data:text/plain><a data-x-internal=text/plain href=https://tools.ietf.org/html/rfc2046#section-4.1.3>text/plain</a></code> format are intended to be human readable. They are
  not reliably interpretable by computer, as the format is ambiguous (for example, there is no way
  to distinguish a literal newline in a value from the newline at the end of the value).</p>



  

  <h4 id=resetting-a-form>4.10.22 Resetting a form<a href=#resetting-a-form class=self-link></a></h4>

  <p>When a <code id=resetting-a-form:the-form-element><a href=#the-form-element>form</a></code> element <var>form</var> is <dfn id=concept-form-reset>reset</dfn>, run these steps:</p>

  <ol><li><p>Let <var>reset</var> be the result of <a href=https://dom.spec.whatwg.org/#concept-event-fire id=resetting-a-form:concept-event-fire data-x-internal=concept-event-fire>firing an
   event</a> named <code id=resetting-a-form:event-reset><a href=#event-reset>reset</a></code> at <var>form</var>, with the <code id=resetting-a-form:dom-event-bubbles><a data-x-internal=dom-event-bubbles href=https://dom.spec.whatwg.org/#dom-event-bubbles>bubbles</a></code> and <code id=resetting-a-form:dom-event-cancelable><a data-x-internal=dom-event-cancelable href=https://dom.spec.whatwg.org/#dom-event-cancelable>cancelable</a></code> attributes initialized to true.<li><p>If <var>reset</var> is true, then invoke the <a href=#concept-form-reset-control id=resetting-a-form:concept-form-reset-control>reset algorithm</a> of each <a href=#category-reset id=resetting-a-form:category-reset>resettable element</a> whose <a href=#form-owner id=resetting-a-form:form-owner>form owner</a> is
   <var>form</var>.</ol>

  <p>Each <a href=#category-reset id=resetting-a-form:category-reset-2>resettable element</a> defines its own <dfn id=concept-form-reset-control>reset algorithm</dfn>. Changes made to form controls as part of
  these algorithms do not count as changes caused by the user (and thus, e.g., do not cause <code id=resetting-a-form:event-input><a href=#event-input>input</a></code> events to fire).</p>

  



  <h3 id=interactive-elements>4.11 Interactive elements<a href=#interactive-elements class=self-link></a></h3>

  <h4 id=the-details-element>4.11.1 The <dfn><code>details</code></dfn> element<a href=#the-details-element class=self-link></a></h4><div class=status><input onclick=toggleStatus(this) value= type=button><p class=bugs><strong>Spec bugs:</strong> <a href="https://www.w3.org/Bugs/Public/show_bug.cgi?id=25550" title="Shouldn't <details> also allow intermixed script-supporting elements (before the <summary>)?">25550</a><p class=support><strong>Support:</strong> details<span class="and_chr yes"><span>Chrome for Android</span> <span>55+</span></span><span class="chrome yes"><span>Chrome</span> <span>12+</span></span><span class="ios_saf yes"><span>iOS Safari</span> <span>6.0+</span></span><span class="and_uc yes"><span>UC Browser for Android</span> <span>11+</span></span><span class="firefox yes"><span>Firefox</span> <span>49+</span></span><span class="ie no"><span>IE</span> <span>None</span></span><span class="samsung yes"><span>Samsung Internet</span> <span>4+</span></span><span class="android yes"><span>Android Browser</span> <span>4+</span></span><span class="safari yes"><span>Safari</span> <span>6+</span></span><span class="edge no"><span>Edge</span> <span>None</span></span><span class="opera yes"><span>Opera</span> <span>15+</span></span><p class=caniuse>Source: <a href="http://caniuse.com/#feat=details">caniuse.com</a></div>

  <dl class=element><dt><a href=#concept-element-categories id=the-details-element:concept-element-categories>Categories</a>:<dd><a href=#flow-content-2 id=the-details-element:flow-content-2>Flow content</a>.<dd><a href=#sectioning-root id=the-details-element:sectioning-root>Sectioning root</a>.<dd><a href=#interactive-content-2 id=the-details-element:interactive-content-2>Interactive content</a>.<dd><a href=#palpable-content-2 id=the-details-element:palpable-content-2>Palpable content</a>.<dt><a href=#concept-element-contexts id=the-details-element:concept-element-contexts>Contexts in which this element can be used</a>:<dd>Where <a href=#flow-content-2 id=the-details-element:flow-content-2-2>flow content</a> is expected.<dt><a href=#concept-element-content-model id=the-details-element:concept-element-content-model>Content model</a>:<dd>One <code id=the-details-element:the-summary-element><a href=#the-summary-element>summary</a></code> element followed by <a href=#flow-content-2 id=the-details-element:flow-content-2-3>flow content</a>.<dt><a href=#concept-element-tag-omission id=the-details-element:concept-element-tag-omission>Tag omission in text/html</a>:<dd>Neither tag is omissible.<dt><a href=#concept-element-attributes id=the-details-element:concept-element-attributes>Content attributes</a>:<dd><a href=#global-attributes id=the-details-element:global-attributes>Global attributes</a><dd><code id=the-details-element:attr-details-open><a href=#attr-details-open>open</a></code>  Whether the details are visible<dt><a href=#concept-element-dom id=the-details-element:concept-element-dom>DOM interface</a>:<dd>
<pre class=idl>[<a href=#htmlconstructor id=the-details-element:htmlconstructor>HTMLConstructor</a>]
interface <dfn id=htmldetailselement>HTMLDetailsElement</dfn> : <a href=#htmlelement id=the-details-element:htmlelement>HTMLElement</a> {
  [<a href=#cereactions id=the-details-element:cereactions>CEReactions</a>] attribute boolean <a href=#dom-details-open id=the-details-element:dom-details-open>open</a>;
};</pre>
   </dl>

  <p>The <code id=the-details-element:the-details-element><a href=#the-details-element>details</a></code> element <a href=#represents id=the-details-element:represents>represents</a> a disclosure widget from which the
  user can obtain additional information or controls.</p>

  <p class=note>The <code id=the-details-element:the-details-element-2><a href=#the-details-element>details</a></code> element is not appropriate for footnotes. Please see <a href=#footnotes>the section on footnotes</a> for details on how to mark up footnotes.</p>

  <p>The first <code id=the-details-element:the-summary-element-2><a href=#the-summary-element>summary</a></code> element child of the element, if any,
  <a href=#represents id=the-details-element:represents-2>represents</a> the summary or legend of the details. If there is no
  child <code id=the-details-element:the-summary-element-3><a href=#the-summary-element>summary</a></code> element, the user agent should provide its own legend (e.g.
  "Details").</p>

  <p>The rest of the element's contents <a href=#represents id=the-details-element:represents-3>represents</a> the additional information or
  controls.</p>

  <p>The <dfn id=attr-details-open><code>open</code></dfn> content attribute is a <a href=#boolean-attribute id=the-details-element:boolean-attribute>boolean
  attribute</a>. If present, it indicates that both the summary and the additional information is
  to be shown to the user. If the attribute is absent, only the summary is to be shown.</p>

  

  <p>When the element is created, if the attribute is absent, the additional information should be
  hidden; if the attribute is present, that information should be shown. Subsequently, if the
  attribute is removed, then the information should be hidden; if the attribute is added, the
  information should be shown.</p>

  <p>The user agent should allow the user to request that the additional information be shown or
  hidden. To honor a request for the details to be shown, the user agent must <a href=https://dom.spec.whatwg.org/#concept-element-attributes-set-value id=the-details-element:concept-element-attributes-set-value data-x-internal=concept-element-attributes-set-value>set</a> the <code id=the-details-element:attr-details-open-2><a href=#attr-details-open>open</a></code> attribute on the element to the empty string. To honor a
  request for the information to be hidden, the user agent must <a href=https://dom.spec.whatwg.org/#concept-element-attributes-remove id=the-details-element:concept-element-attributes-remove data-x-internal=concept-element-attributes-remove>remove</a> the <code id=the-details-element:attr-details-open-3><a href=#attr-details-open>open</a></code> attribute from the element.</p>

  <p class=note>This ability to request that additional information be shown or hidden may simply
  be the <a id=the-details-element:activation-behaviour href=https://dom.spec.whatwg.org/#eventtarget-activation-behavior data-x-internal=activation-behaviour>activation behavior</a> of the appropriate <code id=the-details-element:the-summary-element-4><a href=#the-summary-element>summary</a></code> element, in the
  case such an element exists. However, if no such element exists, user agents should still provide
  this ability through some other user interface affordance.</p>

  <p>Whenever the <code id=the-details-element:attr-details-open-4><a href=#attr-details-open>open</a></code> attribute is added to or removed from
  a <code id=the-details-element:the-details-element-3><a href=#the-details-element>details</a></code> element, the user agent must <a href=#queue-a-task id=the-details-element:queue-a-task>queue a task</a> that runs the
  following steps, which are known as the <dfn id=details-notification-task-steps>details notification task steps</dfn>, for this
  <code id=the-details-element:the-details-element-4><a href=#the-details-element>details</a></code> element:</p>

  <ol><li>

    <p>If another <a href=#concept-task id=the-details-element:concept-task>task</a> has been <a href=#queue-a-task id=the-details-element:queue-a-task-2>queued</a> to run the <a href=#details-notification-task-steps id=the-details-element:details-notification-task-steps>details notification task steps</a> for this
    <code id=the-details-element:the-details-element-5><a href=#the-details-element>details</a></code> element, then abort these steps.</p>

    <p class=note>When the <code id=the-details-element:attr-details-open-5><a href=#attr-details-open>open</a></code> attribute is toggled
    several times in succession, these steps essentially get coalesced so that only one event is
    fired.</p>

   <li><p><a href=https://dom.spec.whatwg.org/#concept-event-fire id=the-details-element:concept-event-fire data-x-internal=concept-event-fire>Fire an event</a> named <code id=the-details-element:event-toggle><a href=#event-toggle>toggle</a></code> at the <code id=the-details-element:the-details-element-6><a href=#the-details-element>details</a></code> element.</ol>

  <p>The <a href=#task-source id=the-details-element:task-source>task source</a> for this task must be the <a href=#dom-manipulation-task-source id=the-details-element:dom-manipulation-task-source>DOM manipulation task
  source</a>.</p>

  <p>The <dfn id=dom-details-open><code>open</code></dfn> IDL attribute must
  <a href=#reflect id=the-details-element:reflect>reflect</a> the <code id=the-details-element:attr-details-open-6><a href=#attr-details-open>open</a></code> content attribute.</p>

  

  <div class=example>

   <p>The following example shows the <code id=the-details-element:the-details-element-7><a href=#the-details-element>details</a></code> element being used to hide technical
   details in a progress report.</p>

   <pre>&lt;section class="progress window">
 &lt;h1>Copying "Really Achieving Your Childhood Dreams"&lt;/h1>
 &lt;details>
  &lt;summary>Copying... &lt;progress max="375505392" value="97543282">&lt;/progress> 25%&lt;/summary>
  &lt;dl>
   &lt;dt>Transfer rate:&lt;/dt> &lt;dd>452KB/s&lt;/dd>
   &lt;dt>Local filename:&lt;/dt> &lt;dd>/home/rpausch/raycd.m4v&lt;/dd>
   &lt;dt>Remote filename:&lt;/dt> &lt;dd>/var/www/lectures/raycd.m4v&lt;/dd>
   &lt;dt>Duration:&lt;/dt> &lt;dd>01:16:27&lt;/dd>
   &lt;dt>Color profile:&lt;/dt> &lt;dd>SD (6-1-6)&lt;/dd>
   &lt;dt>Dimensions:&lt;/dt> &lt;dd>320240&lt;/dd>
  &lt;/dl>
 &lt;/details>
&lt;/section></pre>

  </div>

  <div class=example>

   <p>The following shows how a <code id=the-details-element:the-details-element-8><a href=#the-details-element>details</a></code> element can be used to hide some controls by
   default:</p>

   <pre>&lt;details>
 &lt;summary>&lt;label for=fn>Name &amp; Extension:&lt;/label>&lt;/summary>
 &lt;p>&lt;input type=text id=fn name=fn value="Pillar Magazine.pdf">
 &lt;p>&lt;label>&lt;input type=checkbox name=ext checked> Hide extension&lt;/label>
&lt;/details></pre>

   <p>One could use this in conjunction with other <code id=the-details-element:the-details-element-9><a href=#the-details-element>details</a></code> in a list to allow the user
   to collapse a set of fields down to a small set of headings, with the ability to open each
   one.</p>

   <p class=details-example><img src=/images/sample-details-1.png width=345 alt="" height=611><img src=/images/sample-details-2.png width=345 alt="" height=666></p>

   <p>In these examples, the summary really just summarizes what the controls can change, and not
   the actual values, which is less than ideal.</p>

  </div>

  <div class=example>

   <p>Because the <code id=the-details-element:attr-details-open-7><a href=#attr-details-open>open</a></code> attribute is added and removed
   automatically as the user interacts with the control, it can be used in CSS to style the element
   differently based on its state. Here, a stylesheet is used to animate the color of the summary
   when the element is opened or closed:</p>

   <pre>&lt;style>
 details > summary { transition: color 1s; color: black; }
 details[open] > summary { color: red; }
&lt;/style>
&lt;details>
 &lt;summary>Automated Status: Operational&lt;/summary>
 &lt;p>Velocity: 12m/s&lt;/p>
 &lt;p>Direction: North&lt;/p>
&lt;/details></pre>

  </div>


  <h4 id=the-summary-element>4.11.2 The <dfn><code>summary</code></dfn> element<a href=#the-summary-element class=self-link></a></h4>

  <dl class=element><dt><a href=#concept-element-categories id=the-summary-element:concept-element-categories>Categories</a>:<dd>None.<dt><a href=#concept-element-contexts id=the-summary-element:concept-element-contexts>Contexts in which this element can be used</a>:<dd>As the first child of a <code id=the-summary-element:the-details-element><a href=#the-details-element>details</a></code> element.<dt><a href=#concept-element-content-model id=the-summary-element:concept-element-content-model>Content model</a>:<dd>Either: <a href=#phrasing-content-2 id=the-summary-element:phrasing-content-2>phrasing content</a>.<dd>Or: one element of <a href=#heading-content-2 id=the-summary-element:heading-content-2>heading content</a>.<dt><a href=#concept-element-tag-omission id=the-summary-element:concept-element-tag-omission>Tag omission in text/html</a>:<dd>Neither tag is omissible.<dt><a href=#concept-element-attributes id=the-summary-element:concept-element-attributes>Content attributes</a>:<dd><a href=#global-attributes id=the-summary-element:global-attributes>Global attributes</a><dt><a href=#concept-element-dom id=the-summary-element:concept-element-dom>DOM interface</a>:<dd>Uses <code id=the-summary-element:htmlelement><a href=#htmlelement>HTMLElement</a></code>.</dl>

  <p>The <code id=the-summary-element:the-summary-element><a href=#the-summary-element>summary</a></code> element <a href=#represents id=the-summary-element:represents>represents</a> a summary, caption, or legend for the
  rest of the contents of the <code id=the-summary-element:the-summary-element-2><a href=#the-summary-element>summary</a></code> element's parent <code id=the-summary-element:the-details-element-2><a href=#the-details-element>details</a></code>
  element, if any.</p>

  

  <p>The <a id=the-summary-element:activation-behaviour href=https://dom.spec.whatwg.org/#eventtarget-activation-behavior data-x-internal=activation-behaviour>activation behavior</a> of <code id=the-summary-element:the-summary-element-3><a href=#the-summary-element>summary</a></code> elements is to run the following
  steps:</p>

  <ol><li><p>If this <code id=the-summary-element:the-summary-element-4><a href=#the-summary-element>summary</a></code> element has no parent node, then abort these steps.<li><p>Let <var>parent</var> be this <code id=the-summary-element:the-summary-element-5><a href=#the-summary-element>summary</a></code> element's parent node.</p>

   <li><p>If <var>parent</var> is not a <code id=the-summary-element:the-details-element-3><a href=#the-details-element>details</a></code> element, then abort these steps.</p>

   <li><p>If <var>parent</var>'s first child <code id=the-summary-element:the-summary-element-6><a href=#the-summary-element>summary</a></code> element is not this
   <code id=the-summary-element:the-summary-element-7><a href=#the-summary-element>summary</a></code> element, then abort these steps.<li>
    <p>If the <code id=the-summary-element:attr-details-open><a href=#attr-details-open>open</a></code> attribute is present on
    <var>parent</var>, then <a href=https://dom.spec.whatwg.org/#concept-element-attributes-remove id=the-summary-element:concept-element-attributes-remove data-x-internal=concept-element-attributes-remove>remove</a> it.
    Otherwise, <a href=https://dom.spec.whatwg.org/#concept-element-attributes-set-value id=the-summary-element:concept-element-attributes-set-value data-x-internal=concept-element-attributes-set-value>set</a> <var>parent</var>'s
    <code id=the-summary-element:attr-details-open-2><a href=#attr-details-open>open</a></code> attribute to the empty string.</p>

    <p class=note>This will then run the <a href=#details-notification-task-steps id=the-summary-element:details-notification-task-steps>details notification task steps</a>.</p>
   </ol>

  



  <h4 id=the-menu-element>4.11.3 The <dfn id=menus><code>menu</code></dfn> element<a href=#the-menu-element class=self-link></a></h4><div class=status><input onclick=toggleStatus(this) value= type=button><p class=support><strong>Support:</strong> menu<span class="and_chr no"><span>Chrome for Android</span> <span>None</span></span><span class="chrome no"><span>Chrome</span> <span>None</span></span><span class="ios_saf no"><span>iOS Safari</span> <span>None</span></span><span class="and_uc no"><span>UC Browser for Android</span> <span>None</span></span><span class="firefox partial"><span>Firefox (limited)</span> <span>8+</span></span><span class="ie no"><span>IE</span> <span>None</span></span><span class="samsung no"><span>Samsung Internet</span> <span>None</span></span><span class="op_mini no"><span>Opera Mini</span> <span>None</span></span><span class="android no"><span>Android Browser</span> <span>None</span></span><span class="safari no"><span>Safari</span> <span>None</span></span><span class="edge no"><span>Edge</span> <span>None</span></span><span class="opera no"><span>Opera</span> <span>None</span></span><p class=caniuse>Source: <a href="http://caniuse.com/#feat=menu">caniuse.com</a></div>

  <dl class=element><dt><a href=#concept-element-categories id=the-menu-element:concept-element-categories>Categories</a>:<dd><a href=#flow-content-2 id=the-menu-element:flow-content-2>Flow content</a>.<dd>If the element's <code id=the-menu-element:attr-menu-type><a href=#attr-menu-type>type</a></code> attribute is in the <a href=#toolbar-state id=the-menu-element:toolbar-state>toolbar</a> state: <a href=#palpable-content-2 id=the-menu-element:palpable-content-2>Palpable content</a>.<dt><a href=#concept-element-contexts id=the-menu-element:concept-element-contexts>Contexts in which this element can be used</a>:<dd>Where <a href=#flow-content-2 id=the-menu-element:flow-content-2-2>flow content</a> is expected.<dd>If the element's <code id=the-menu-element:attr-menu-type-2><a href=#attr-menu-type>type</a></code> attribute is in the <a href=#popup-menu-state id=the-menu-element:popup-menu-state>popup menu</a> state: as the child of a <code id=the-menu-element:the-menu-element><a href=#the-menu-element>menu</a></code> element whose <code id=the-menu-element:attr-menu-type-3><a href=#attr-menu-type>type</a></code> attribute is in the <a href=#popup-menu-state id=the-menu-element:popup-menu-state-2>popup menu</a> state.<dt><a href=#concept-element-content-model id=the-menu-element:concept-element-content-model>Content model</a>:<dd>If the element's <code id=the-menu-element:attr-menu-type-4><a href=#attr-menu-type>type</a></code> attribute is in the <a href=#toolbar-state id=the-menu-element:toolbar-state-2>toolbar</a> state: either zero or more <code id=the-menu-element:the-li-element><a href=#the-li-element>li</a></code> and <a href=#script-supporting-elements-2 id=the-menu-element:script-supporting-elements-2>script-supporting</a> elements, or, <a href=#flow-content-2 id=the-menu-element:flow-content-2-3>flow content</a>.<dd>If the element's <code id=the-menu-element:attr-menu-type-5><a href=#attr-menu-type>type</a></code> attribute is in the <a href=#popup-menu-state id=the-menu-element:popup-menu-state-3>popup menu</a> state: in any order, zero or more <code id=the-menu-element:the-menuitem-element><a href=#the-menuitem-element>menuitem</a></code> elements, zero or more <code id=the-menu-element:the-hr-element><a href=#the-hr-element>hr</a></code> elements, zero or more <code id=the-menu-element:the-menu-element-2><a href=#the-menu-element>menu</a></code> elements whose <code id=the-menu-element:attr-menu-type-6><a href=#attr-menu-type>type</a></code> attributes are in the <a href=#popup-menu-state id=the-menu-element:popup-menu-state-4>popup menu</a> state, and zero or more <a href=#script-supporting-elements-2 id=the-menu-element:script-supporting-elements-2-2>script-supporting</a> elements.<dt><a href=#concept-element-tag-omission id=the-menu-element:concept-element-tag-omission>Tag omission in text/html</a>:<dd>Neither tag is omissible.<dt><a href=#concept-element-attributes id=the-menu-element:concept-element-attributes>Content attributes</a>:<dd><a href=#global-attributes id=the-menu-element:global-attributes>Global attributes</a><dd><code id=the-menu-element:attr-menu-type-7><a href=#attr-menu-type>type</a></code>  Type of menu<dd><code id=the-menu-element:attr-menu-label><a href=#attr-menu-label>label</a></code>  User-visible label<dt><a href=#concept-element-dom id=the-menu-element:concept-element-dom>DOM interface</a>:<dd>
<pre class=idl>[<a href=#htmlconstructor id=the-menu-element:htmlconstructor>HTMLConstructor</a>]
interface <dfn id=htmlmenuelement>HTMLMenuElement</dfn> : <a href=#htmlelement id=the-menu-element:htmlelement>HTMLElement</a> {
  [<a href=#cereactions id=the-menu-element:cereactions>CEReactions</a>] attribute DOMString <a href=#dom-menu-type id=the-menu-element:dom-menu-type>type</a>;
  [<a href=#cereactions id=the-menu-element:cereactions-2>CEReactions</a>] attribute DOMString <a href=#dom-menu-label id=the-menu-element:dom-menu-label>label</a>;

  // <a href="#HTMLMenuElement-partial">also has obsolete members</a>
};</pre>
  </dl>

  <p>The <code id=the-menu-element:the-menu-element-3><a href=#the-menu-element>menu</a></code> element represents a list of commands.</p>

  

  <p>The <dfn id=attr-menu-type><code>type</code></dfn> attribute is an <a href=#enumerated-attribute id=the-menu-element:enumerated-attribute>enumerated
  attribute</a> indicating the kind of menu being declared. The attribute has two states. The
  "<dfn id=attr-menu-type-context><code>context</code></dfn>" keyword maps to the <dfn id=popup-menu-state>popup menu</dfn> state, in which the element is declaring a context menu
  or the menu for a <a href=#attr-button-type-menu-state id=the-menu-element:attr-button-type-menu-state>menu button</a>. The "<dfn id=attr-menu-type-toolbar><code>toolbar</code></dfn>" keyword maps to the <dfn id=toolbar-state>toolbar</dfn> state, in which the element is declaring a toolbar. The attribute may also be
  omitted. The <i id=the-menu-element:missing-value-default><a href=#missing-value-default>missing value default</a></i> is the <a href=#popup-menu-state id=the-menu-element:popup-menu-state-5>popup menu</a>
  state if the parent element is a <code id=the-menu-element:the-menu-element-4><a href=#the-menu-element>menu</a></code> element whose <code id=the-menu-element:attr-menu-type-8><a href=#attr-menu-type>type</a></code> attribute is in the <a href=#popup-menu-state id=the-menu-element:popup-menu-state-6>popup
  menu</a> state; otherwise, it is the <a href=#toolbar-state id=the-menu-element:toolbar-state-3>toolbar</a> state.</p>

  <p>If a <code id=the-menu-element:the-menu-element-5><a href=#the-menu-element>menu</a></code> element's <code id=the-menu-element:attr-menu-type-9><a href=#attr-menu-type>type</a></code> attribute is in the
  <a href=#popup-menu-state id=the-menu-element:popup-menu-state-7>popup menu</a> state, then the element <a href=#represents id=the-menu-element:represents>represents</a>
  the commands of a popup menu, and the user can only examine and interact with the commands if that
  popup menu is activated through some other element, either via the <code id=the-menu-element:attr-contextmenu><a href=#attr-contextmenu>contextmenu</a></code> attribute or the <code id=the-menu-element:the-button-element><a href=#the-button-element>button</a></code> element's <code id=the-menu-element:attr-button-menu><a href=#attr-button-menu>menu</a></code> attribute.</p>

  <p>If a <code id=the-menu-element:the-menu-element-6><a href=#the-menu-element>menu</a></code> element's <code id=the-menu-element:attr-menu-type-10><a href=#attr-menu-type>type</a></code> attribute is in the
  <a href=#toolbar-state id=the-menu-element:toolbar-state-4>toolbar</a> state, then the element <a href=#represents id=the-menu-element:represents-2>represents</a> a
  toolbar consisting of its contents, in the form of either an unordered list of items (represented
  by <code id=the-menu-element:the-li-element-2><a href=#the-li-element>li</a></code> elements), each of which represents a command that the user can perform or
  activate, or, if the element has no <code id=the-menu-element:the-li-element-3><a href=#the-li-element>li</a></code> element children, <a href=#flow-content-2 id=the-menu-element:flow-content-2-4>flow content</a>
  describing available commands.</p>

  <p>The <dfn id=attr-menu-label><code>label</code></dfn> attribute gives the label of the
  menu. It is used by user agents to display nested menus in the UI: a context menu containing
  another menu would use the nested menu's <code id=the-menu-element:attr-menu-label-2><a href=#attr-menu-label>label</a></code> attribute for
  the submenu's menu label. The <code id=the-menu-element:attr-menu-label-3><a href=#attr-menu-label>label</a></code> attribute must only be
  specified on <code id=the-menu-element:the-menu-element-7><a href=#the-menu-element>menu</a></code> elements whose parent element is a <code id=the-menu-element:the-menu-element-8><a href=#the-menu-element>menu</a></code> element whose
  <code id=the-menu-element:attr-menu-type-11><a href=#attr-menu-type>type</a></code> attribute is in the <a href=#popup-menu-state id=the-menu-element:popup-menu-state-8>popup
  menu</a> state.</p>

  

  <hr>

  <p>A <code id=the-menu-element:the-menu-element-9><a href=#the-menu-element>menu</a></code> is a <dfn id=currently-relevant-menu-element>currently relevant <code>menu</code> element</dfn> if it is the
  child of a <a href=#currently-relevant-menu-element id=the-menu-element:currently-relevant-menu-element>currently relevant <code>menu</code> element</a>, or if it is the
  <a href=#designated-pop-up-menu id=the-menu-element:designated-pop-up-menu>designated pop-up menu</a> of a <code id=the-menu-element:the-button-element-2><a href=#the-button-element>button</a></code> element that is not
  <a href=#inert id=the-menu-element:inert>inert</a>, does not have a <code id=the-menu-element:the-hidden-attribute><a href=#the-hidden-attribute>hidden</a></code> attribute, and is not
  the descendant of an element with a <code id=the-menu-element:the-hidden-attribute-2><a href=#the-hidden-attribute>hidden</a></code> attribute.</p>

  <hr>

  <p>A <dfn id=menu-construct>menu construct</dfn> consists of an ordered list of zero or more <dfn id=menu-item-construct>menu item constructs</dfn>, which can be any of:</p>

  <ul class=brief><li><a href=#concept-command id=the-menu-element:concept-command>Commands</a>, which can be marked as <dfn id=default-command>default commands</dfn> (<code id=the-menu-element:the-menuitem-element-2><a href=#the-menuitem-element>menuitem</a></code>)<li><dfn id=concept-separator>Separators</dfn> (<code id=the-menu-element:the-hr-element-2><a href=#the-hr-element>hr</a></code>)<li>Other <a href=#menu-construct id=the-menu-element:menu-construct>menu constructs</a>, each with an associated <dfn id=submenu-label>submenu label</dfn>, which allows the list to be nested (<code id=the-menu-element:the-menu-element-10><a href=#the-menu-element>menu</a></code>)</ul>

  <p>To <dfn id=build-and-show-a-menu>build and show a menu</dfn> for a particular <code id=the-menu-element:the-menu-element-11><a href=#the-menu-element>menu</a></code> element
  <var>source</var> and with a particular element <var>subject</var> as a subject, the user agent
  must run the following steps:</p>

  <ol><li><p>Let <var>pop-up menu</var> be the <a href=#menu-construct id=the-menu-element:menu-construct-2>menu construct</a> created by the <a href=#build-a-menu-construct id=the-menu-element:build-a-menu-construct>build a
