    used in man-in-the-middle attacks, by replacing pages that have frames with such content with
    content under the control of the protocol handler. If the user agent has native support for the
    schemes, this could further be used for cookie-theft attacks.</p>

   <dt><var>mimeType</var> (<code id=custom-handlers:dom-navigator-registercontenthandler-4><a href=#dom-navigator-registercontenthandler>registerContentHandler()</a></code> only)<dd>

    <p>A <a id=custom-handlers:mime-type-2 href=https://mimesniff.spec.whatwg.org/#mime-type data-x-internal=mime-type>MIME type</a>, such as <code>model/vnd.flatland.3dml</code> or <code>application/vnd.google-earth.kml+xml</code>. The <a id=custom-handlers:mime-type-3 href=https://mimesniff.spec.whatwg.org/#mime-type data-x-internal=mime-type>MIME type</a> must be
    compared in an <a id=custom-handlers:ascii-case-insensitive-2 href=https://infra.spec.whatwg.org/#ascii-case-insensitive data-x-internal=ascii-case-insensitive>ASCII case-insensitive</a> manner by user agents for the purposes of
    comparing with MIME types of documents that they consider against the list of registered
    handlers.</p>

    <p>User agents must compare the given values only to the MIME type/subtype parts of content
    types, not to the complete type including parameters. Thus, if <var>mimeType</var>
    values passed to this method include characters such as commas or whitespace, or include MIME
    parameters, then the handler being registered will never be used.</p>

    <p class=note>The type is compared to the <a id=custom-handlers:mime-type-4 href=https://mimesniff.spec.whatwg.org/#mime-type data-x-internal=mime-type>MIME type</a> used by the user agent
    <em>after</em> the sniffing algorithms have been applied.</p>

    <p>If the <code id=custom-handlers:dom-navigator-registercontenthandler-5><a href=#dom-navigator-registercontenthandler>registerContentHandler()</a></code>
    method is invoked with a <a id=custom-handlers:mime-type-5 href=https://mimesniff.spec.whatwg.org/#mime-type data-x-internal=mime-type>MIME type</a> that is in the <a href=#type-blocklist id=custom-handlers:type-blocklist>type blocklist</a> or
    that the user agent has deemed a privileged type, the user agent must throw a
    <a id=custom-handlers:securityerror-3 href=https://heycam.github.io/webidl/#securityerror data-x-internal=securityerror>"<code>SecurityError</code>"</a> <code id=custom-handlers:domexception-4><a data-x-internal=domexception href=https://heycam.github.io/webidl/#dfn-DOMException>DOMException</a></code>.</p>

    <p>The following <a href=https://mimesniff.spec.whatwg.org/#mime-type id=custom-handlers:mime-type-6 data-x-internal=mime-type>MIME types</a> are in the <dfn id=type-blocklist>type
    blocklist</dfn>:</p>

    <ul class=brief><li><code id=custom-handlers:application/x-www-form-urlencoded><a data-x-internal=application/x-www-form-urlencoded href=https://url.spec.whatwg.org/#concept-urlencoded>application/x-www-form-urlencoded</a></code><li><code id=custom-handlers:application/xhtml+xml><a href=#application/xhtml+xml>application/xhtml+xml</a></code><li><code id=custom-handlers:application/xml><a href=#application/xml>application/xml</a></code><li><code id=custom-handlers:image/gif><a href=#image/gif>image/gif</a></code><li><code id=custom-handlers:image/jpeg><a href=#image/jpeg>image/jpeg</a></code><li><code id=custom-handlers:image/png><a href=#image/png>image/png</a></code><li><code id=custom-handlers:image/svg+xml><a href=#image/svg+xml>image/svg+xml</a></code><li><code id=custom-handlers:multipart/x-mixed-replace><a href=#multipart/x-mixed-replace>multipart/x-mixed-replace</a></code><li><code id=custom-handlers:text/cache-manifest><a href=#text/cache-manifest>text/cache-manifest</a></code><li><code id=custom-handlers:text/css><a href=#text/css>text/css</a></code><li><code id=custom-handlers:text/html><a href=#text/html>text/html</a></code><li><code id=custom-handlers:text/ping><a href=#text/ping>text/ping</a></code><li><code id=custom-handlers:text/plain><a data-x-internal=text/plain href=https://tools.ietf.org/html/rfc2046#section-4.1.3>text/plain</a></code><li><code id=custom-handlers:text/vtt><a href=#text/vtt>text/vtt</a></code><li><code id=custom-handlers:text/xml><a href=#text/xml>text/xml</a></code><li>All types that the user agent supports displaying natively in a <a href=#browsing-context id=custom-handlers:browsing-context>browsing context</a> during <a href=#navigate id=custom-handlers:navigate>navigation</a>, except for <code id=custom-handlers:application/rss+xml><a href=#application/rss+xml>application/rss+xml</a></code> and <code id=custom-handlers:application/atom+xml><a href=#application/atom+xml>application/atom+xml</a></code></ul>

    <p class=note>This list can be changed. If there are MIME types that should be added, please
    send feedback.</p>

   <dt><var>url</var><dd>

    <p>A string used to build the <a id=custom-handlers:url href=https://url.spec.whatwg.org/#concept-url data-x-internal=url>URL</a> of the page that will handle the requests.</p>

    <p>User agents must throw a <a id=custom-handlers:syntaxerror-2 href=https://heycam.github.io/webidl/#syntaxerror data-x-internal=syntaxerror>"<code>SyntaxError</code>"</a> <code id=custom-handlers:domexception-5><a data-x-internal=domexception href=https://heycam.github.io/webidl/#dfn-DOMException>DOMException</a></code> if
    the <var>url</var> argument passed to one of these methods does not contain the exact literal
    string "<code>%s</code>".</p>

    <p>User agents must throw a <a id=custom-handlers:syntaxerror-3 href=https://heycam.github.io/webidl/#syntaxerror data-x-internal=syntaxerror>"<code>SyntaxError</code>"</a> <code id=custom-handlers:domexception-6><a data-x-internal=domexception href=https://heycam.github.io/webidl/#dfn-DOMException>DOMException</a></code> if
    <a href=#parse-a-url id=custom-handlers:parse-a-url>parsing</a> the <var>url</var> argument relative to the
    <a href=#relevant-settings-object id=custom-handlers:relevant-settings-object>relevant settings object</a> of this <code id=custom-handlers:navigatorcontentutils><a href=#navigatorcontentutils>NavigatorContentUtils</a></code> object is not
    successful.</p>

    <p class=note>The <a href=#resulting-url-string id=custom-handlers:resulting-url-string>resulting URL string</a> would by definition not be a <a href=#valid-url id=custom-handlers:valid-url>valid
    URL</a> as it would include the string "<code>%s</code>" which is not a valid
    component in a URL.</p>

    <p>User agents must throw a <a id=custom-handlers:securityerror-4 href=https://heycam.github.io/webidl/#securityerror data-x-internal=securityerror>"<code>SecurityError</code>"</a> <code id=custom-handlers:domexception-7><a data-x-internal=domexception href=https://heycam.github.io/webidl/#dfn-DOMException>DOMException</a></code>
    if the <a href=#resulting-url-record id=custom-handlers:resulting-url-record>resulting URL record</a> has an <a href=https://url.spec.whatwg.org/#concept-url-origin id=custom-handlers:concept-url-origin data-x-internal=concept-url-origin>origin</a>
    that differs from the <a href=#concept-settings-object-origin id=custom-handlers:concept-settings-object-origin>origin</a> specified by
    the <a href=#relevant-settings-object id=custom-handlers:relevant-settings-object-2>relevant settings object</a> of this <code id=custom-handlers:navigatorcontentutils-2><a href=#navigatorcontentutils>NavigatorContentUtils</a></code> object.</p>

    <p class=note>This is forcibly the case if the <code>%s</code> placeholder is in the
    scheme, host, or port parts of the URL.</p>

    <p>The <a href=#resulting-url-string id=custom-handlers:resulting-url-string-2>resulting URL string</a> is the <dfn id=proto-url>proto-URL</dfn>. It identifies the
    handler for the purposes of the methods described below.</p>

    <p>When the user agent uses this handler, it must replace the first occurrence of the exact
    literal string "<code>%s</code>" in the <var>url</var> argument with an
    escaped version of the <a id=custom-handlers:absolute-url href=https://url.spec.whatwg.org/#syntax-url-absolute data-x-internal=absolute-url>absolute URL</a> of the content in question (as defined below),
    then <a href=#parse-a-url id=custom-handlers:parse-a-url-2>parse</a> the resulting URL, relative to the <a href=#relevant-settings-object id=custom-handlers:relevant-settings-object-3>relevant
    settings object</a> of the <code id=custom-handlers:navigatorcontentutils-3><a href=#navigatorcontentutils>NavigatorContentUtils</a></code> object on which the <code id=custom-handlers:dom-navigator-registercontenthandler-6><a href=#dom-navigator-registercontenthandler>registerContentHandler()</a></code> or <code id=custom-handlers:dom-navigator-registerprotocolhandler-6><a href=#dom-navigator-registerprotocolhandler>registerProtocolHandler()</a></code> method was
    invoked, and then <a href=#navigate id=custom-handlers:navigate-2>navigate</a> an appropriate <a href=#browsing-context id=custom-handlers:browsing-context-2>browsing
    context</a> to the resulting URL.</p>

    <p>To get the escaped version of the <a id=custom-handlers:absolute-url-2 href=https://url.spec.whatwg.org/#syntax-url-absolute data-x-internal=absolute-url>absolute URL</a> of the content in question, the
    user agent must replace every character in that <a id=custom-handlers:absolute-url-3 href=https://url.spec.whatwg.org/#syntax-url-absolute data-x-internal=absolute-url>absolute URL</a> that is not a
    character in the URL <a id=custom-handlers:default-encode-set href=https://url.spec.whatwg.org/#default-encode-set data-x-internal=default-encode-set>default encode set</a> with the result of <a href=https://url.spec.whatwg.org/#utf-8-percent-encode id=custom-handlers:utf-8-percent-encode data-x-internal=utf-8-percent-encode>UTF-8 percent encoding</a> that character.</p>

    <div class=example>

     <p>If the user had visited a site at <code>https://example.com/</code> that made the
     following call:</p>

     <pre>navigator.registerContentHandler('application/x-soup', 'soup?url=%s', 'SoupWeb™')</pre>

     <p>...and then, much later, while visiting <code>https://www.example.net/</code>,
     clicked on a link such as:</p>

     <pre>&lt;a href="chickenkïwi.soup">Download our Chicken Kïwi soup!&lt;/a></pre>

     <p>...then, assuming this <code>chickenkïwi.soup</code> file was served with the
     <a id=custom-handlers:mime-type-7 href=https://mimesniff.spec.whatwg.org/#mime-type data-x-internal=mime-type>MIME type</a> <code>application/x-soup</code>, the UA might navigate to the
     following URL:</p>

     <pre>https://example.com/soup?url=https://www.example.net/chickenk%C3%AFwi.soup</pre>

     <p>This site could then fetch the <code>chickenkïwi.soup</code> file and do
     whatever it is that it does with soup (synthesize it and ship it to the user, or whatever).</p>

    </div>

   <dt><var>title</var><dd>

    <p>A descriptive title of the handler, which the UA might use to remind the user what the site
    in question is.</p>

   </dl>

  <p>This section does not define how the pages registered by these methods are used, beyond the
  requirements on how to process the <var>url</var> value (see above). To some extent, the
  <a href=#navigate id=custom-handlers:navigate-3>processing model for navigating across documents</a> defines some cases
  where these methods are relevant, but in general UAs may use this information wherever they would
  otherwise consider handing content to native plugins or helper applications.</p>

  <p>UAs must not use registered content handlers to handle content that was returned as part of a
  non-GET transaction (or rather, as part of any non-idempotent transaction), as the remote site
  would not be able to fetch the same data.</p>

  <hr>

  

  <p>In addition to the registration methods, there are also methods for determining if particular
  handlers have been registered, and for unregistering handlers.</p>

  <dl class=domintro><dt><var>state</var> = <var>window</var> . <code id=custom-handlers:dom-navigator-3><a href=#dom-navigator>navigator</a></code> . <code id=custom-handlers:dom-navigator-isprotocolhandlerregistered-2><a href=#dom-navigator-isprotocolhandlerregistered>isProtocolHandlerRegistered</a></code>(<var>scheme</var>, <var>url</var>)<dt><var>state</var> = <var>window</var> . <code id=custom-handlers:dom-navigator-4><a href=#dom-navigator>navigator</a></code> . <code id=custom-handlers:dom-navigator-iscontenthandlerregistered-2><a href=#dom-navigator-iscontenthandlerregistered>isContentHandlerRegistered</a></code>(<var>mimeType</var>, <var>url</var>)<dd>

    <p>Returns one of the following strings describing the state of the handler given by the
    arguments:</p>

    <dl><dt><code>new</code>

     <dd>Indicates that no attempt has been made to register the given handler (or that the handler
     has been unregistered). It would be appropriate to promote the availability of the handler or
     to just automatically register the handler.

     <dt><code>registered</code>

     <dd>Indicates that the given handler has been registered or that the site is blocked from
     registering the handler. Trying to register the handler again would have no effect.

     <dt><code>declined</code>

     <dd>Indicates that the given handler has been offered but was rejected. Trying to register the
     handler again may prompt the user again.

    </dl>

   <dt><var>window</var> . <code id=custom-handlers:dom-navigator-5><a href=#dom-navigator>navigator</a></code> . <code id=custom-handlers:dom-navigator-unregisterprotocolhandler-2><a href=#dom-navigator-unregisterprotocolhandler>unregisterProtocolHandler</a></code>(<var>scheme</var>, <var>url</var>)<dt><var>window</var> . <code id=custom-handlers:dom-navigator-6><a href=#dom-navigator>navigator</a></code> . <code id=custom-handlers:dom-navigator-unregistercontenthandler-2><a href=#dom-navigator-unregistercontenthandler>unregisterContentHandler</a></code>(<var>mimeType</var>, <var>url</var>)<dd>

    <p>Unregisters the handler given by the arguments.</p>

   </dl>

  

  <p>The <dfn id=dom-navigator-isprotocolhandlerregistered><code>isProtocolHandlerRegistered()</code></dfn>
  method must return the <a href=#handler-state-string id=custom-handlers:handler-state-string>handler state string</a> that most closely describes the current
  state of the handler described by the two arguments to the method, where the first argument gives
  the scheme and the second gives the string used to build the <a id=custom-handlers:url-2 href=https://url.spec.whatwg.org/#concept-url data-x-internal=url>URL</a> of the page that
  will handle the requests.
  <a href=#fingerprinting-vector id=custom-handlers:fingerprinting-vector class=fingerprint title="There is a potential fingerprinting vector here."><img alt="(This is a fingerprinting vector.)" src=/images/fingerprint.png width=46 height=64></a>
  </p>

  <p>The first argument must be compared to the schemes for which custom protocol handlers are
  registered in an <a id=custom-handlers:ascii-case-insensitive-3 href=https://infra.spec.whatwg.org/#ascii-case-insensitive data-x-internal=ascii-case-insensitive>ASCII case-insensitive</a> manner to find the relevant handlers.</p>

  <p>The second argument must be preprocessed as described below, and if that is successful, must
  then be matched against the <a href=#proto-url id=custom-handlers:proto-url>proto-URLs</a> of the relevant handlers to
  find the described handler.</p>

  <hr>

  <p>The <dfn id=dom-navigator-iscontenthandlerregistered><code>isContentHandlerRegistered()</code></dfn>
  method must return the <a href=#handler-state-string id=custom-handlers:handler-state-string-2>handler state string</a> that most closely describes the current
  state of the handler described by the two arguments to the method, where the first argument gives
  the <a id=custom-handlers:mime-type-8 href=https://mimesniff.spec.whatwg.org/#mime-type data-x-internal=mime-type>MIME type</a> and the second gives the string used to build the <a id=custom-handlers:url-3 href=https://url.spec.whatwg.org/#concept-url data-x-internal=url>URL</a> of
  the page that will handle the requests.
  <a href=#fingerprinting-vector id=custom-handlers:fingerprinting-vector-2 class=fingerprint title="There is a potential fingerprinting vector here."><img alt="(This is a fingerprinting vector.)" src=/images/fingerprint.png width=46 height=64></a>
  </p>

  <p>The first argument must be compared to the <a href=https://mimesniff.spec.whatwg.org/#mime-type id=custom-handlers:mime-type-9 data-x-internal=mime-type>MIME types</a> for which
  custom content handlers are registered in an <a id=custom-handlers:ascii-case-insensitive-4 href=https://infra.spec.whatwg.org/#ascii-case-insensitive data-x-internal=ascii-case-insensitive>ASCII case-insensitive</a> manner to find
  the relevant handlers.</p>

  <p>The second argument must be preprocessed as described below, and if that is successful, must
  then be matched against the <a href=#proto-url id=custom-handlers:proto-url-2>proto-URLs</a> of the relevant handlers to
  find the described handler.</p>

  <hr>

  <p>The <dfn id=handler-state-string>handler state strings</dfn> are the following strings.
  Each string describes several situations, as given by the following list.</p>

  <dl><dt><code>new</code>

   <dd>The described handler has never been registered for the given scheme or type.

   <dd>The described handler was once registered for the given scheme or type, but the site has
   since unregistered it. If the handler were to be reregistered, the user would be notified
   accordingly.

   <dd>The described handler was once registered for the given scheme or type, but the site has
   since unregistered it, but the user has indicated that the site is to be blocked from registering
   the type again, so the user agent would ignore further registration attempts.


   <dt><code>registered</code>

   <dd>An attempt was made to register the described handler for the given scheme or type, but the
   user has not yet been notified, and the user agent would ignore further registration attempts.
   (Maybe the user agent batches registration requests to display them when the user requests to be
   notified about them, and the user has not yet requested that the user agent notify it of the
   previous registration attempt.)

   <dd>The described handler is registered for the given scheme or type (maybe, or maybe not, as the
   default handler).

   <dd>The described handler is permanently blocked from being (re)registered. (Maybe the user
   marked the registration attempt as spam, or blocked the site for other reasons.)


   <dt><code>declined</code>

   <dd>An attempt was made to register the described handler for the given scheme or type, but the
   user has not yet been notified; however, the user might be notified if another registration
   attempt were to be made. (Maybe the last registration attempt was made while the page was in the
   background and the user closed the page without looking at it, and the user agent requires
   confirmation for this registration attempt.)

   <dd>An attempt was made to register the described handler for the given scheme or type, but the
   user has not yet responded.

   <dd>An attempt was made to register the described handler for the given scheme or type, but the
   user declined the offer. The user has not indicated that the handler is to be permanently
   blocked, however, so another attempt to register the described handler might result in the user
   being prompted again.

   <dd>The described handler was once registered for the given scheme or type, but the user has
   since removed it. The user has not indicated that the handler is to be permanently blocked,
   however, so another attempt to register the described handler might result in the user being
   prompted again.

  </dl>

  <hr>

  <p>The <dfn id=dom-navigator-unregisterprotocolhandler><code>unregisterProtocolHandler()</code></dfn>
  method must unregister the handler described by the two arguments to the method, where the first
  argument gives the scheme and the second gives the string used to build the <a id=custom-handlers:url-4 href=https://url.spec.whatwg.org/#concept-url data-x-internal=url>URL</a> of
  the page that will handle the requests.</p>

  <p>The first argument must be compared to the schemes for which custom protocol handlers are
  registered in an <a id=custom-handlers:ascii-case-insensitive-5 href=https://infra.spec.whatwg.org/#ascii-case-insensitive data-x-internal=ascii-case-insensitive>ASCII case-insensitive</a> manner to find the relevant handlers.</p>

  <p>The second argument must be preprocessed as described below, and if that is successful, must
  then be matched against the <a href=#proto-url id=custom-handlers:proto-url-3>proto-URLs</a> of the relevant handlers to
  find the described handler.</p>

  <hr>

  <p>The <dfn id=dom-navigator-unregistercontenthandler><code>unregisterContentHandler()</code></dfn>
  method must unregister the handler described by the two arguments to the method, where the first
  argument gives the <a id=custom-handlers:mime-type-10 href=https://mimesniff.spec.whatwg.org/#mime-type data-x-internal=mime-type>MIME type</a> and the second gives the string used to build the
  <a id=custom-handlers:url-5 href=https://url.spec.whatwg.org/#concept-url data-x-internal=url>URL</a> of the page that will handle the requests.</p>

  <p>The first argument must be compared to the <a href=https://mimesniff.spec.whatwg.org/#mime-type id=custom-handlers:mime-type-11 data-x-internal=mime-type>MIME types</a> for which
  custom content handlers are registered in an <a id=custom-handlers:ascii-case-insensitive-6 href=https://infra.spec.whatwg.org/#ascii-case-insensitive data-x-internal=ascii-case-insensitive>ASCII case-insensitive</a> manner to find
  the relevant handlers.</p>

  <p>The second argument must be preprocessed as described below, and if that is successful, must
  then be matched against the <a href=#proto-url id=custom-handlers:proto-url-4>proto-URLs</a> of the relevant handlers to
  find the described handler.</p>

  <hr>

  <p>The second argument of the four methods described above must be preprocessed as follows:</p>

  <ol><li><p>If the string does not contain the substring "<code>%s</code>", abort these
   steps. There's no matching handler.<li><p><a href=#parse-a-url id=custom-handlers:parse-a-url-3>Parse</a> the string relative to the <a href=#relevant-settings-object id=custom-handlers:relevant-settings-object-4>relevant settings
   object</a> of this <code id=custom-handlers:navigatorcontentutils-4><a href=#navigatorcontentutils>NavigatorContentUtils</a></code> object. If this fails, then throw a
   <a id=custom-handlers:syntaxerror-4 href=https://heycam.github.io/webidl/#syntaxerror data-x-internal=syntaxerror>"<code>SyntaxError</code>"</a> <code id=custom-handlers:domexception-8><a data-x-internal=domexception href=https://heycam.github.io/webidl/#dfn-DOMException>DOMException</a></code>.<li><p>If the <a href=#resulting-url-record id=custom-handlers:resulting-url-record-2>resulting URL record</a>'s <a href=https://url.spec.whatwg.org/#concept-url-origin id=custom-handlers:concept-url-origin-2 data-x-internal=concept-url-origin>origin</a>
   is not the <a href=#same-origin id=custom-handlers:same-origin>same origin</a> as the <a href=#concept-settings-object-origin id=custom-handlers:concept-settings-object-origin-2>origin</a> of the <a href=#relevant-settings-object id=custom-handlers:relevant-settings-object-5>relevant settings
   object</a> of this <code id=custom-handlers:navigatorcontentutils-5><a href=#navigatorcontentutils>NavigatorContentUtils</a></code> object, throw a
   <a id=custom-handlers:securityerror-5 href=https://heycam.github.io/webidl/#securityerror data-x-internal=securityerror>"<code>SecurityError</code>"</a> <code id=custom-handlers:domexception-9><a data-x-internal=domexception href=https://heycam.github.io/webidl/#dfn-DOMException>DOMException</a></code>.<li><p>Return the <a href=#resulting-url-string id=custom-handlers:resulting-url-string-3>resulting URL string</a> as the result of preprocessing the
   argument.</ol>

  




  

  <h6 id=security-and-privacy>8.7.1.3.1 Security and privacy<a href=#security-and-privacy class=self-link></a></h6>

  <p>These mechanisms can introduce a number of concerns, in particular privacy concerns.</p>

  <p><strong>Hijacking all Web usage.</strong> User agents should not allow schemes that are key to
  its normal operation, such as an <a id=security-and-privacy:http(s)-scheme href=https://url.spec.whatwg.org/#http-scheme data-x-internal=http(s)-scheme>HTTP(S) scheme</a>, to be rerouted through third-party
  sites. This would allow a user's activities to be trivially tracked, and would allow user
  information, even in secure connections, to be collected.</p>

  <p><strong>Hijacking defaults.</strong> User agents are strongly urged to not automatically change
  any defaults, as this could lead the user to send data to remote hosts that the user is not
  expecting. New handlers registering themselves should never automatically cause those sites to be
  used.</p>

  <p><strong>Registration spamming.</strong> User agents should consider the possibility that a site
  will attempt to register a large number of handlers, possibly from multiple domains (e.g. by
  redirecting through a series of pages each on a different domain, and each registering a handler
  for <code id=security-and-privacy:video/mpeg><a href=#video/mpeg>video/mpeg</a></code> — analogous practices abusing other Web browser features have
  been used by pornography Web sites for many years). User agents should gracefully handle such
  hostile attempts, protecting the user.</p>

  <p><strong>Misleading titles.</strong> User agents should not rely wholly on the <var>title</var>
  argument to the methods when presenting the registered handlers to the user, since sites could
  easily lie. For example, a site <code>hostile.example.net</code> could claim that it was
  registering the "Cuddly Bear Happy Content Handler". User agents should therefore use the
  handler's domain in any UI along with any title.</p>

  <p><strong>Hostile handler metadata.</strong> User agents should protect against typical attacks
  against strings embedded in their interface, for example ensuring that markup or escape characters
  in such strings are not executed, that null bytes are properly handled, that over-long strings do
  not cause crashes or buffer overruns, and so forth.</p>

  <p><strong>Leaking Intranet URLs.</strong> The mechanism described in this section can result in
  secret Intranet URLs being leaked, in the following manner:</p>

  <ol><li>The user registers a third-party content handler as the default handler for a content
   type.<li>The user then browses their corporate Intranet site and accesses a document that uses that
   content type.<li>The user agent contacts the third party and hands the third party the URL to the Intranet
   content.</ol>

  <p>No actual confidential file data is leaked in this manner, but the URLs themselves could
  contain confidential information. For example, the URL could be <code>https://www.corp.example.com/upcoming-aquisitions/the-sample-company.egf</code>, which
  might tell the third party that Example Corporation is intending to merge with The Sample Company.
  Implementors might wish to consider allowing administrators to disable this feature for certain
  subdomains, content types, or schemes.</p>

  <p><strong>Leaking secure URLs.</strong> User agents should not send HTTPS URLs to third-party
  sites registered as content handlers without the user's informed consent, for the same reason that
  user agents sometimes avoid sending `<code id=security-and-privacy:http-referer><a data-x-internal=http-referer href=https://tools.ietf.org/html/rfc7231#section-5.5.2>Referer</a></code>` (sic) HTTP
  headers from secure sites to third-party sites.</p>

  <p><strong>Leaking credentials.</strong> User agents must never send username or password
  information in the URLs that are escaped and included sent to the handler sites. User agents may
  even avoid attempting to pass to Web-based handlers the URLs of resources that are known to
  require authentication to access, as such sites would be unable to access the resources in
  question without prompting the user for credentials themselves (a practice that would require the
  user to know whether to trust the third-party handler, a decision many users are unable to make or
  even understand).</p>

  <p><strong>Interface interference.</strong> User agents should be prepared to handle intentionally
  long arguments to the methods. For example, if the user interface exposed consists of an "accept"
  button and a "deny" button, with the "accept" binding containing the name of the handler, it's
  important that a long name not cause the "deny" button to be pushed off the screen.</p>

  <p><strong>Fingerprinting users.</strong> Since a site can detect if it has attempted to register
  a particular handler or not, whether or not the user responds, the mechanism can be used to store
  data. User agents are therefore strongly urged to treat registrations in the same manner as
  cookies: clearing cookies for a site should also clear all registrations for that site, and
  disabling cookies for a site should also disable registrations.</p>

  



  

  <h6 id=sample-handler-impl>8.7.1.3.2 Sample user interface<a href=#sample-handler-impl class=self-link></a></h6>

  <p><i>This section is non-normative.</i></p>

  <p>A simple implementation of this feature for a desktop Web browser might work as follows.</p>

  <p>The <code id=sample-handler-impl:dom-navigator-registercontenthandler><a href=#dom-navigator-registercontenthandler>registerContentHandler()</a></code> method
  could display a modal dialog box:</p>

  <p><img src=/images/sample-content-handler-registration.png width=534 alt="The modal dialog box could have the title 'Content Handler Registration', and could say 'This Web page: Kittens at work http://kittens.example.org/ ...would like permission to handle files of type: application/x-meowmeow using the following Web-based application: Kittens-at-work displayer http://kittens.example.org/?show=%s Do you trust the administrators of the &quot;kittens.example.org&quot; domain?' with two buttons, 'Trust kittens.example.org' and 'Cancel'." height=374></p>

  <p>In this dialog box, "Kittens at work" is the title of the page that invoked the method,
  "http://kittens.example.org/" is the URL of that page, "application/x-meowmeow" is the string that
  was passed to the <code id=sample-handler-impl:dom-navigator-registercontenthandler-2><a href=#dom-navigator-registercontenthandler>registerContentHandler()</a></code> method as its first
  argument (<var>mimeType</var>), "http://kittens.example.org/?show=%s" was the second
  argument (<var>url</var>), and "Kittens-at-work displayer" was the third argument (<var>title</var>).</p>

  <p>If the user clicks the Cancel button, then nothing further happens. If the user clicks the
  "Trust" button, then the handler is remembered.</p>

  <p>When the user then attempts to fetch a URL that uses the "application/x-meowmeow" <a id=sample-handler-impl:mime-type href=https://mimesniff.spec.whatwg.org/#mime-type data-x-internal=mime-type>MIME
  type</a>, then it might display a dialog as follows:</p>

  <p><img src=/images/sample-content-handler.png width=577 alt="The dialog box could have the title 'Unknown File Type' and could say 'You have attempted to access:' followed by a URL, followed by a prompt such as 'How would you like FerretBrowser to handle this resource?' with three radio buttons, one saying 'Contact the FerretBrowser plugin registry to see if there is an official way to handle this resource.', one saying 'Pass this URL to a local application' with an application selector, and one saying 'Pass this URL to the &quot;Kittens-at-work displayer&quot; application at &quot;kittens.example.org&quot;', with a checkbox labeled 'Always do this for resources using the &quot;application/x-meowmeow&quot; type in future.', and with two buttons, 'Ok' and 'Cancel'." height=428></p>

  <p>In this dialog, the third option is the one that was primed by the site registering itself
  earlier.</p>

  <p>If the user does select that option, then the browser, in accordance with the requirements
  described in the previous two sections, will redirect the user to
  "http://kittens.example.org/?show=data%3Aapplication/x-meowmeow;base64,S2l0dGVucyBhcmUgdGhlIGN1dGVzdCE%253D".</p>

  <p>The <code id=sample-handler-impl:dom-navigator-registerprotocolhandler><a href=#dom-navigator-registerprotocolhandler>registerProtocolHandler()</a></code> method
  would work equivalently, but for schemes instead of unknown content types.</p>

  



  <h5 id=cookies>8.7.1.4 Cookies<a href=#cookies class=self-link></a></h5>

  <pre class=idl>[NoInterfaceObject]
interface <dfn id=navigatorcookies>NavigatorCookies</dfn> {
  readonly attribute boolean <a href=#dom-navigator-cookieenabled id=cookies:dom-navigator-cookieenabled>cookieEnabled</a>;
};</pre>

  <dl class=domintro><dt><var>window</var> . <code id=cookies:dom-navigator><a href=#dom-navigator>navigator</a></code> . <code id=cookies:dom-navigator-cookieenabled-2><a href=#dom-navigator-cookieenabled>cookieEnabled</a></code><dd>

    <p>Returns false if setting a cookie will be ignored, and true otherwise.</p>

   </dl>

  

   <p>The <dfn id=dom-navigator-cookieenabled><code>cookieEnabled</code></dfn> attribute must
   return true if the user agent attempts to handle cookies according to the cookie specification,
   and false if it ignores cookie change requests. <a href=#refsCOOKIES>[COOKIES]</a></p>

  



  <h5 id=plugins-2>8.7.1.5 Plugins<a href=#plugins-2 class=self-link></a></h5>

  <pre class=idl>[NoInterfaceObject]
interface <dfn id=navigatorplugins>NavigatorPlugins</dfn> {
  [SameObject] readonly attribute <a href=#pluginarray id=plugins-2:pluginarray>PluginArray</a> <a href=#dom-navigator-plugins id=plugins-2:dom-navigator-plugins>plugins</a>;
  [SameObject] readonly attribute <a href=#mimetypearray id=plugins-2:mimetypearray>MimeTypeArray</a> <a href=#dom-navigator-mimetypes id=plugins-2:dom-navigator-mimetypes>mimeTypes</a>;
  boolean <a href=#dom-navigator-javaenabled id=plugins-2:dom-navigator-javaenabled>javaEnabled()</a>;
};

[LegacyUnenumerableNamedProperties]
interface <dfn id=pluginarray>PluginArray</dfn> {
  void <a href=#dom-pluginarray-refresh id=plugins-2:dom-pluginarray-refresh>refresh</a>(optional boolean reload = false);
  readonly attribute unsigned long <a href=#dom-pluginarray-length id=plugins-2:dom-pluginarray-length>length</a>;
  getter <a href=#dom-plugin id=plugins-2:dom-plugin>Plugin</a>? <a href=#dom-pluginarray-item id=plugins-2:dom-pluginarray-item>item</a>(unsigned long index);
  getter <a href=#dom-plugin id=plugins-2:dom-plugin-2>Plugin</a>? <a href=#dom-pluginarray-nameditem id=plugins-2:dom-pluginarray-nameditem>namedItem</a>(DOMString name);
};

[LegacyUnenumerableNamedProperties]
interface <dfn id=mimetypearray>MimeTypeArray</dfn> {
  readonly attribute unsigned long <a href=#dom-mimetypearray-length id=plugins-2:dom-mimetypearray-length>length</a>;
  getter <a href=#mimetype id=plugins-2:mimetype>MimeType</a>? <a href=#dom-mimetypearray-item id=plugins-2:dom-mimetypearray-item>item</a>(unsigned long index);
  getter <a href=#mimetype id=plugins-2:mimetype-2>MimeType</a>? <a href=#dom-mimetypearray-nameditem id=plugins-2:dom-mimetypearray-nameditem>namedItem</a>(DOMString name);
};

[LegacyUnenumerableNamedProperties]
interface <dfn id=dom-plugin>Plugin</dfn> {
  readonly attribute DOMString <a href=#dom-plugin-name id=plugins-2:dom-plugin-name>name</a>;
  readonly attribute DOMString <a href=#dom-plugin-description id=plugins-2:dom-plugin-description>description</a>;
  readonly attribute DOMString <a href=#dom-plugin-filename id=plugins-2:dom-plugin-filename>filename</a>;
  readonly attribute unsigned long <a href=#dom-plugin-length id=plugins-2:dom-plugin-length>length</a>;
  getter <a href=#mimetype id=plugins-2:mimetype-3>MimeType</a>? <a href=#dom-plugin-item id=plugins-2:dom-plugin-item>item</a>(unsigned long index);
  getter <a href=#mimetype id=plugins-2:mimetype-4>MimeType</a>? <a href=#dom-plugin-nameditem id=plugins-2:dom-plugin-nameditem>namedItem</a>(DOMString name);
};

interface <dfn id=mimetype>MimeType</dfn> {
  readonly attribute DOMString <a href=#dom-mimetype-type id=plugins-2:dom-mimetype-type>type</a>;
  readonly attribute DOMString <a href=#dom-mimetype-description id=plugins-2:dom-mimetype-description>description</a>;
  readonly attribute DOMString <a href=#dom-mimetype-suffixes id=plugins-2:dom-mimetype-suffixes>suffixes</a>; // comma-separated
  readonly attribute <a href=#dom-plugin id=plugins-2:dom-plugin-3>Plugin</a> <a href=#dom-mimetype-enabledplugin id=plugins-2:dom-mimetype-enabledplugin>enabledPlugin</a>;
};</pre>

  <dl class=domintro><dt><var>window</var> . <code id=plugins-2:dom-navigator><a href=#dom-navigator>navigator</a></code> . <code id=plugins-2:dom-navigator-plugins-2><a href=#dom-navigator-plugins>plugins</a></code> . <code id=plugins-2:dom-pluginarray-refresh-2><a href=#dom-pluginarray-refresh>refresh</a></code>( [ <var>refresh</var> ] )<dd>
    <p>Updates the lists of supported plugins and MIME types for this page, and reloads the page if the lists have changed.</p>
    
   <dt><var>window</var> . <code id=plugins-2:dom-navigator-2><a href=#dom-navigator>navigator</a></code> . <code id=plugins-2:dom-navigator-plugins-3><a href=#dom-navigator-plugins>plugins</a></code> . <code id=plugins-2:dom-pluginarray-length-2><a href=#dom-pluginarray-length>length</a></code><dd>
    <p>Returns the number of plugins, represented by <code id=plugins-2:dom-plugin-4><a href=#dom-plugin>Plugin</a></code> objects, that the user agent reports.</p>
   <dt><var>plugin</var> = <var>window</var> . <code id=plugins-2:dom-navigator-3><a href=#dom-navigator>navigator</a></code> . <code id=plugins-2:dom-navigator-plugins-4><a href=#dom-navigator-plugins>plugins</a></code> . <code id=plugins-2:dom-pluginarray-item-2><a href=#dom-pluginarray-item>item</a></code>(<var>index</var>)<dt><var>window</var> . <code id=plugins-2:dom-navigator-4><a href=#dom-navigator>navigator</a></code> . <code id=plugins-2:dom-navigator-plugins-5><a href=#dom-navigator-plugins>plugins</a></code>[<var>index</var>]<dd>
    <p>Returns the specified <code id=plugins-2:dom-plugin-5><a href=#dom-plugin>Plugin</a></code> object.</p>
   <dt><var>plugin</var> = <var>window</var> . <code id=plugins-2:dom-navigator-5><a href=#dom-navigator>navigator</a></code> . <code id=plugins-2:dom-navigator-plugins-6><a href=#dom-navigator-plugins>plugins</a></code> . <code id=plugins-2:dom-pluginarray-item-3><a href=#dom-pluginarray-item>item</a></code>(<var>name</var>)<dt><var>window</var> . <code id=plugins-2:dom-navigator-6><a href=#dom-navigator>navigator</a></code> . <code id=plugins-2:dom-navigator-plugins-7><a href=#dom-navigator-plugins>plugins</a></code>[<var>name</var>]<dd>
    <p>Returns the <code id=plugins-2:dom-plugin-6><a href=#dom-plugin>Plugin</a></code> object for the plugin with the given name.</p>
   <dt><var>window</var> . <code id=plugins-2:dom-navigator-7><a href=#dom-navigator>navigator</a></code> . <code id=plugins-2:dom-navigator-mimetypes-2><a href=#dom-navigator-mimetypes>mimeTypes</a></code> . <code id=plugins-2:dom-mimetypearray-length-2><a href=#dom-mimetypearray-length>length</a></code><dd>
    <p>Returns the number of MIME types, represented by <code id=plugins-2:mimetype-5><a href=#mimetype>MimeType</a></code> objects, supported by the plugins that the user agent reports.</p>
   <dt><var>mimeType</var> = <var>window</var> . <code id=plugins-2:dom-navigator-8><a href=#dom-navigator>navigator</a></code> . <code id=plugins-2:dom-navigator-mimetypes-3><a href=#dom-navigator-mimetypes>mimeTypes</a></code> . <code id=plugins-2:dom-mimetypearray-item-2><a href=#dom-mimetypearray-item>item</a></code>(<var>index</var>)<dt><var>window</var> . <code id=plugins-2:dom-navigator-9><a href=#dom-navigator>navigator</a></code> . <code id=plugins-2:dom-navigator-mimetypes-4><a href=#dom-navigator-mimetypes>mimeTypes</a></code>[<var>index</var>]<dd>
    <p>Returns the specified <code id=plugins-2:mimetype-6><a href=#mimetype>MimeType</a></code> object.</p>
   <dt><var>mimeType</var> = <var>window</var> . <code id=plugins-2:dom-navigator-10><a href=#dom-navigator>navigator</a></code> . <code id=plugins-2:dom-navigator-mimetypes-5><a href=#dom-navigator-mimetypes>mimeTypes</a></code> . <code id=plugins-2:dom-mimetypearray-item-3><a href=#dom-mimetypearray-item>item</a></code>(<var>name</var>)<dt><var>window</var> . <code id=plugins-2:dom-navigator-11><a href=#dom-navigator>navigator</a></code> . <code id=plugins-2:dom-navigator-mimetypes-6><a href=#dom-navigator-mimetypes>mimeTypes</a></code>[<var>name</var>]<dd>
    <p>Returns the <code id=plugins-2:mimetype-7><a href=#mimetype>MimeType</a></code> object for the given MIME type.</p>
   <dt><var>plugin</var> . <code id=plugins-2:dom-plugin-name-2><a href=#dom-plugin-name>name</a></code>
   <dd>
    <p>Returns the plugin's name.</p>
   <dt><var>plugin</var> . <code id=plugins-2:dom-plugin-description-2><a href=#dom-plugin-description>description</a></code>
   <dd>
    <p>Returns the plugin's description.</p>
   <dt><var>plugin</var> . <code id=plugins-2:dom-plugin-filename-2><a href=#dom-plugin-filename>filename</a></code>
   <dd>
    <p>Returns the plugin library's filename, if applicable on the current platform.</p>
   <dt><var>plugin</var> . <code id=plugins-2:dom-plugin-length-2><a href=#dom-plugin-length>length</a></code><dd>
    <p>Returns the number of MIME types, represented by <code id=plugins-2:mimetype-8><a href=#mimetype>MimeType</a></code> objects, supported by the plugin.</p>
   <dt><var>mimeType</var> = <var>plugin</var> . <code id=plugins-2:dom-plugin-item-2><a href=#dom-plugin-item>item</a></code>(<var>index</var>)<dt><var>plugin</var>[<var>index</var>]<dd>
    <p>Returns the specified <code id=plugins-2:mimetype-9><a href=#mimetype>MimeType</a></code> object.</p>
   <dt><var>mimeType</var> = <var>plugin</var> . <code id=plugins-2:dom-plugin-item-3><a href=#dom-plugin-item>item</a></code>(<var>name</var>)<dt><var>plugin</var>[<var>name</var>]<dd>
    <p>Returns the <code id=plugins-2:mimetype-10><a href=#mimetype>MimeType</a></code> object for the given MIME type.</p>
   <dt><var>mimeType</var> . <code id=plugins-2:dom-mimetype-type-2><a href=#dom-mimetype-type>type</a></code>
   <dd>
    <p>Returns the MIME type.</p>
   <dt><var>mimeType</var> . <code id=plugins-2:dom-mimetype-description-2><a href=#dom-mimetype-description>description</a></code>
   <dd>
    <p>Returns the MIME type's description.</p>
   <dt><var>mimeType</var> . <code id=plugins-2:dom-mimetype-suffixes-2><a href=#dom-mimetype-suffixes>suffixes</a></code>
   <dd>
    <p>Returns the MIME type's typical file extensions, in a comma-separated list.</p>
   <dt><var>mimeType</var> . <code id=plugins-2:dom-mimetype-enabledplugin-2><a href=#dom-mimetype-enabledplugin>enabledPlugin</a></code>
   <dd>
    <p>Returns the <code id=plugins-2:dom-plugin-7><a href=#dom-plugin>Plugin</a></code> object that implements this MIME type.</p>
   <dt><var>window</var> . <code id=plugins-2:dom-navigator-12><a href=#dom-navigator>navigator</a></code> . <code id=plugins-2:dom-navigator-javaenabled-2><a href=#dom-navigator-javaenabled>javaEnabled()</a></code><dd>
    <p>Returns true if there's a plugin that supports the MIME type "<code>application/x-java-vm</code>".</p>
   </dl>

  

  <p>The <dfn id=dom-navigator-plugins><code>navigator.plugins</code></dfn> attribute must
  return a <code id=plugins-2:pluginarray-2><a href=#pluginarray>PluginArray</a></code> object.</p>

  <p>The <dfn id=dom-navigator-mimetypes><code>navigator.mimeTypes</code></dfn> attribute must
  return a <code id=plugins-2:mimetypearray-2><a href=#mimetypearray>MimeTypeArray</a></code> object.</p>

  <hr>

  <p>A <code id=plugins-2:pluginarray-3><a href=#pluginarray>PluginArray</a></code> object represents none, some, or all of the <a href=#plugin id=plugins-2:plugin>plugins</a> supported by the user agent, each of which is represented by a <code id=plugins-2:dom-plugin-8><a href=#dom-plugin>Plugin</a></code> object. Each of these <code id=plugins-2:dom-plugin-9><a href=#dom-plugin>Plugin</a></code>
  objects may be <dfn id=hidden-plugin>hidden plugins</dfn>. A <a href=#hidden-plugin id=plugins-2:hidden-plugin>hidden plugin</a> can't
  be enumerated, but can still be inspected by using its name.</p>

  <p class=note>The fewer <a href=#plugin id=plugins-2:plugin-2>plugins</a> are represented by the
  <code id=plugins-2:pluginarray-4><a href=#pluginarray>PluginArray</a></code> object, and of those, the more that are <a href=#hidden-plugin id=plugins-2:hidden-plugin-2>hidden</a>, the more the user's privacy will be protected. Each exposed plugin
  increases the number of bits that can be derived for fingerprinting. Hiding a plugin helps, but
  unless it is an extremely rare plugin, it is likely that a site attempting to derive the list of
  plugins can still determine whether the plugin is supported or not by probing for it by name (the
  names of popular plugins are widely known). Therefore not exposing a plugin at all is preferred.
  Unfortunately, many legacy sites use this feature to determine, for example, which plugin to use
  to play video. Not exposing any plugins at all might therefore not be entirely plausible.</p>

  <p>The <code id=plugins-2:pluginarray-5><a href=#pluginarray>PluginArray</a></code> objects created by a user agent must not be <a href=#live id=plugins-2:live>live</a>. The
  set of plugins represented by the objects must not change once an object is created, except when
  it is updated by the <code id=plugins-2:dom-pluginarray-refresh-3><a href=#dom-pluginarray-refresh>refresh()</a></code> method.</p>

  <p>Each <a href=#plugin id=plugins-2:plugin-3>plugin</a> represented by a <code id=plugins-2:pluginarray-6><a href=#pluginarray>PluginArray</a></code> can support a number of
  <a href=https://mimesniff.spec.whatwg.org/#mime-type id=plugins-2:mime-type data-x-internal=mime-type>MIME types</a>. For each such <a href=#plugin id=plugins-2:plugin-4>plugin</a>, the user agent must
  pick one or more of these <a href=https://mimesniff.spec.whatwg.org/#mime-type id=plugins-2:mime-type-2 data-x-internal=mime-type>MIME types</a> to be those that are
  <dfn id=explicitly-supported>explicitly supported</dfn>.</p>

  <p class=note>The <a href=#explicitly-supported id=plugins-2:explicitly-supported>explicitly supported</a> <a href=https://mimesniff.spec.whatwg.org/#mime-type id=plugins-2:mime-type-3 data-x-internal=mime-type>MIME types</a> of
  a <a href=#plugin id=plugins-2:plugin-5>plugin</a> are those that are exposed through the <code id=plugins-2:dom-plugin-10><a href=#dom-plugin>Plugin</a></code> and <code id=plugins-2:mimetypearray-3><a href=#mimetypearray>MimeTypeArray</a></code> interfaces. As with <a href=#plugin id=plugins-2:plugin-6>plugins</a> themselves, any variation between users regarding what is exposed
  allows sites to fingerprint users. User agents are therefore encouraged to expose the same <a href=https://mimesniff.spec.whatwg.org/#mime-type id=plugins-2:mime-type-4 data-x-internal=mime-type>MIME types</a> for all users of a <a href=#plugin id=plugins-2:plugin-7>plugin</a>, regardless of the
  actual types supported... at least, within the constraints imposed by compatibility with legacy
  content.</p>

  <p>The <a id=plugins-2:supported-property-indices href=https://heycam.github.io/webidl/#dfn-supported-property-indices data-x-internal=supported-property-indices>supported property indices</a> of a <code id=plugins-2:pluginarray-7><a href=#pluginarray>PluginArray</a></code> object are the
  numbers from zero to the number of non-<a href=#hidden-plugin id=plugins-2:hidden-plugin-3>hidden</a> <a href=#plugin id=plugins-2:plugin-8>plugins</a> represented by the object, if any.
  <a href=#fingerprinting-vector id=plugins-2:fingerprinting-vector class=fingerprint title="There is a potential fingerprinting vector here."><img alt="(This is a fingerprinting vector.)" src=/images/fingerprint.png width=46 height=64></a>
  </p>

  <p>The <dfn id=dom-pluginarray-length><code>length</code></dfn> attribute must return the
  number of non-<a href=#hidden-plugin id=plugins-2:hidden-plugin-4>hidden</a> <a href=#plugin id=plugins-2:plugin-9>plugins</a>
  represented by the object.
  <a href=#fingerprinting-vector id=plugins-2:fingerprinting-vector-2 class=fingerprint title="There is a potential fingerprinting vector here."><img alt="(This is a fingerprinting vector.)" src=/images/fingerprint.png width=46 height=64></a>
  </p>

  <p>The <dfn id=dom-pluginarray-item><code>item()</code></dfn> method of a
  <code id=plugins-2:pluginarray-8><a href=#pluginarray>PluginArray</a></code> object must return null if the argument is not one of the object's
  <a id=plugins-2:supported-property-indices-2 href=https://heycam.github.io/webidl/#dfn-supported-property-indices data-x-internal=supported-property-indices>supported property indices</a>, and otherwise must return the result of running the
  following steps, using the method's argument as <var>index</var>:</p>

  <ol><li><p>Let <var>list</var> be the <code id=plugins-2:dom-plugin-11><a href=#dom-plugin>Plugin</a></code> objects
   representing the non-<a href=#hidden-plugin id=plugins-2:hidden-plugin-5>hidden</a> <a href=#plugin id=plugins-2:plugin-10>plugins</a> represented by the <code id=plugins-2:pluginarray-9><a href=#pluginarray>PluginArray</a></code> object.<li><p>Sort <var>list</var> alphabetically by the <code id=plugins-2:dom-plugin-name-3><a href=#dom-plugin-name>name</a></code> of each <code id=plugins-2:dom-plugin-12><a href=#dom-plugin>Plugin</a></code>.<li><p>Return the <var>index</var>th entry in <var>list</var>.</ol>

  <p class=note>It is important <a href=#fingerprinting-vector id=plugins-2:fingerprinting-vector-3 class=no-backref>for
  privacy</a> that the order of plugins not leak additional information, e.g. the order in which
  plugins were installed.</p>

  <p>The <a id=plugins-2:supported-property-names href=https://heycam.github.io/webidl/#dfn-supported-property-names data-x-internal=supported-property-names>supported property names</a> of a <code id=plugins-2:pluginarray-10><a href=#pluginarray>PluginArray</a></code> object are the values
  of the <code id=plugins-2:dom-plugin-name-4><a href=#dom-plugin-name>name</a></code> attributes of all the <code id=plugins-2:dom-plugin-13><a href=#dom-plugin>Plugin</a></code> objects represented by the <code id=plugins-2:pluginarray-11><a href=#pluginarray>PluginArray</a></code> object.
  <a href=#fingerprinting-vector id=plugins-2:fingerprinting-vector-4 class=fingerprint title="There is a potential fingerprinting vector here."><img alt="(This is a fingerprinting vector.)" src=/images/fingerprint.png width=46 height=64></a>
  </p>

  <p>The <dfn id=dom-pluginarray-nameditem><code>namedItem()</code></dfn> method of a
  <code id=plugins-2:pluginarray-12><a href=#pluginarray>PluginArray</a></code> object must return null if the argument is not one of the object's
  <a id=plugins-2:supported-property-names-2 href=https://heycam.github.io/webidl/#dfn-supported-property-names data-x-internal=supported-property-names>supported property names</a>, and otherwise must return the <code id=plugins-2:dom-plugin-14><a href=#dom-plugin>Plugin</a></code> object, of those represented by the <code id=plugins-2:pluginarray-13><a href=#pluginarray>PluginArray</a></code>
  object, that has a <code id=plugins-2:dom-plugin-name-5><a href=#dom-plugin-name>name</a></code> equal to the method's argument.</p>

  <p>The <dfn id=dom-pluginarray-refresh><code>refresh()</code></dfn> method of the
  <code id=plugins-2:pluginarray-14><a href=#pluginarray>PluginArray</a></code> object of a <code id=plugins-2:navigator><a href=#navigator>Navigator</a></code> object, when invoked, must check to
  see if any <a href=#plugin id=plugins-2:plugin-11>plugins</a> have been installed or reconfigured since the user
  agent created the <code id=plugins-2:pluginarray-15><a href=#pluginarray>PluginArray</a></code> object. If so, and the method's argument is true, then
  the user agent must act as if the <code id=plugins-2:dom-location-reload><a href=#dom-location-reload>location.reload()</a></code>
  method was called instead. Otherwise, the user agent must update the <code id=plugins-2:pluginarray-16><a href=#pluginarray>PluginArray</a></code>
  object and <code id=plugins-2:mimetypearray-4><a href=#mimetypearray>MimeTypeArray</a></code> object created for attributes of that <code id=plugins-2:navigator-2><a href=#navigator>Navigator</a></code>
  object, and the <code id=plugins-2:dom-plugin-15><a href=#dom-plugin>Plugin</a></code> and <code id=plugins-2:mimetype-11><a href=#mimetype>MimeType</a></code> objects created
  for those <code id=plugins-2:pluginarray-17><a href=#pluginarray>PluginArray</a></code> and <code id=plugins-2:mimetypearray-5><a href=#mimetypearray>MimeTypeArray</a></code> objects, using the same <code id=plugins-2:dom-plugin-16><a href=#dom-plugin>Plugin</a></code> objects for cases where the <code id=plugins-2:dom-plugin-name-6><a href=#dom-plugin-name>name</a></code> is the same, and the same <code id=plugins-2:mimetype-12><a href=#mimetype>MimeType</a></code> objects for
  cases where the <code id=plugins-2:dom-mimetype-type-3><a href=#dom-mimetype-type>type</a></code> is the same, and creating new objects
  for cases where there were no matching objects immediately prior to the <code id=plugins-2:dom-pluginarray-refresh-4><a href=#dom-pluginarray-refresh>refresh()</a></code> call. Old <code id=plugins-2:dom-plugin-17><a href=#dom-plugin>Plugin</a></code>
  and <code id=plugins-2:mimetype-13><a href=#mimetype>MimeType</a></code> objects must continue to return the same values that they had prior to
  the update, though naturally now the data is stale and may appear inconsistent (for example, an
  old <code id=plugins-2:mimetype-14><a href=#mimetype>MimeType</a></code> entry might list as its <code id=plugins-2:dom-mimetype-enabledplugin-3><a href=#dom-mimetype-enabledplugin>enabledPlugin</a></code> a <code id=plugins-2:dom-plugin-18><a href=#dom-plugin>Plugin</a></code>
  object that no longer lists that <code id=plugins-2:mimetype-15><a href=#mimetype>MimeType</a></code> as a supported <code id=plugins-2:mimetype-16><a href=#mimetype>MimeType</a></code>).</p>

  <hr>

  <p>A <code id=plugins-2:mimetypearray-6><a href=#mimetypearray>MimeTypeArray</a></code> object represents the <a href=https://mimesniff.spec.whatwg.org/#mime-type id=plugins-2:mime-type-5 data-x-internal=mime-type>MIME types</a>
  <a href=#explicitly-supported id=plugins-2:explicitly-supported-2>explicitly supported</a> by <a href=#plugin id=plugins-2:plugin-12>plugins</a> supported by the user
  agent, each of which is represented by a <code id=plugins-2:mimetype-17><a href=#mimetype>MimeType</a></code> object.</p>

  <p>The <code id=plugins-2:mimetypearray-7><a href=#mimetypearray>MimeTypeArray</a></code> objects created by a user agent must not be <a href=#live id=plugins-2:live-2>live</a>.
  The set of MIME types represented by the objects must not change once an object is created, except
  when it is updated by the <code id=plugins-2:pluginarray-18><a href=#pluginarray>PluginArray</a></code> object's <code id=plugins-2:dom-pluginarray-refresh-5><a href=#dom-pluginarray-refresh>refresh()</a></code> method.</p>

  <p>The <a id=plugins-2:supported-property-indices-3 href=https://heycam.github.io/webidl/#dfn-supported-property-indices data-x-internal=supported-property-indices>supported property indices</a> of a <code id=plugins-2:mimetypearray-8><a href=#mimetypearray>MimeTypeArray</a></code> object are the
  numbers from zero to the number of <a href=https://mimesniff.spec.whatwg.org/#mime-type id=plugins-2:mime-type-6 data-x-internal=mime-type>MIME types</a> <a href=#explicitly-supported id=plugins-2:explicitly-supported-3>explicitly
  supported</a> by non-<a href=#hidden-plugin id=plugins-2:hidden-plugin-6>hidden</a> <a href=#plugin id=plugins-2:plugin-13>plugins</a> represented by the corresponding <code id=plugins-2:pluginarray-19><a href=#pluginarray>PluginArray</a></code> object, if
  any.
  <a href=#fingerprinting-vector id=plugins-2:fingerprinting-vector-5 class=fingerprint title="There is a potential fingerprinting vector here."><img alt="(This is a fingerprinting vector.)" src=/images/fingerprint.png width=46 height=64></a>
  </p>

  <p>The <dfn id=dom-mimetypearray-length><code>length</code></dfn> attribute must return the
  number of <a href=https://mimesniff.spec.whatwg.org/#mime-type id=plugins-2:mime-type-7 data-x-internal=mime-type>MIME types</a> <a href=#explicitly-supported id=plugins-2:explicitly-supported-4>explicitly supported</a> by non-<a href=#hidden-plugin id=plugins-2:hidden-plugin-7>hidden</a> <a href=#plugin id=plugins-2:plugin-14>plugins</a> represented by the
  corresponding <code id=plugins-2:pluginarray-20><a href=#pluginarray>PluginArray</a></code> object, if any.
  <a href=#fingerprinting-vector id=plugins-2:fingerprinting-vector-6 class=fingerprint title="There is a potential fingerprinting vector here."><img alt="(This is a fingerprinting vector.)" src=/images/fingerprint.png width=46 height=64></a>
  </p>

  <p>The <dfn id=dom-mimetypearray-item><code>item()</code></dfn> method of a
  <code id=plugins-2:mimetypearray-9><a href=#mimetypearray>MimeTypeArray</a></code> object must return null if the argument is not one of the object's
  <a id=plugins-2:supported-property-indices-4 href=https://heycam.github.io/webidl/#dfn-supported-property-indices data-x-internal=supported-property-indices>supported property indices</a>, and otherwise must return the result of running the
  following steps, using the method's argument as <var>index</var>:</p>

  <ol><li><p>Let <var>list</var> be the <code id=plugins-2:mimetype-18><a href=#mimetype>MimeType</a></code> objects representing the <a href=https://mimesniff.spec.whatwg.org/#mime-type id=plugins-2:mime-type-8 data-x-internal=mime-type>MIME types</a> <a href=#explicitly-supported id=plugins-2:explicitly-supported-5>explicitly supported</a> by non-<a href=#hidden-plugin id=plugins-2:hidden-plugin-8>hidden</a> <a href=#plugin id=plugins-2:plugin-15>plugins</a> represented by the corresponding
   <code id=plugins-2:pluginarray-21><a href=#pluginarray>PluginArray</a></code> object, if any.<li><p>Sort <var>list</var> alphabetically by the <code id=plugins-2:dom-mimetype-type-4><a href=#dom-mimetype-type>type</a></code> of each <code id=plugins-2:mimetype-19><a href=#mimetype>MimeType</a></code>.<li><p>Return the <var>index</var>th entry in <var>list</var>.</ol>

  <p class=note>It is important <a href=#fingerprinting-vector id=plugins-2:fingerprinting-vector-7 class=no-backref>for
  privacy</a> that the order of MIME types not leak additional information, e.g. the order in
  which plugins were installed.</p>

  <p>The <a id=plugins-2:supported-property-names-3 href=https://heycam.github.io/webidl/#dfn-supported-property-names data-x-internal=supported-property-names>supported property names</a> of a <code id=plugins-2:mimetypearray-10><a href=#mimetypearray>MimeTypeArray</a></code> object are the values
  of the <code id=plugins-2:dom-mimetype-type-5><a href=#dom-mimetype-type>type</a></code> attributes of all the <code id=plugins-2:mimetype-20><a href=#mimetype>MimeType</a></code>
  objects represented by the <code id=plugins-2:mimetypearray-11><a href=#mimetypearray>MimeTypeArray</a></code> object.
  <a href=#fingerprinting-vector id=plugins-2:fingerprinting-vector-8 class=fingerprint title="There is a potential fingerprinting vector here."><img alt="(This is a fingerprinting vector.)" src=/images/fingerprint.png width=46 height=64></a>
  </p>

  <p>The <dfn id=dom-mimetypearray-nameditem><code>namedItem()</code></dfn> method of a
  <code id=plugins-2:mimetypearray-12><a href=#mimetypearray>MimeTypeArray</a></code> object must return null if the argument is not one of the object's
  <a id=plugins-2:supported-property-names-4 href=https://heycam.github.io/webidl/#dfn-supported-property-names data-x-internal=supported-property-names>supported property names</a>, and otherwise must return the <code id=plugins-2:mimetype-21><a href=#mimetype>MimeType</a></code> object
  that has a <code id=plugins-2:dom-mimetype-type-6><a href=#dom-mimetype-type>type</a></code> equal to the method's argument.</p>

  <hr>

  <p>A <code id=plugins-2:dom-plugin-19><a href=#dom-plugin>Plugin</a></code> object represents a <a href=#plugin id=plugins-2:plugin-16>plugin</a>. It has
  several attributes to provide details about the plugin, and can be enumerated to obtain the list
  of <a href=https://mimesniff.spec.whatwg.org/#mime-type id=plugins-2:mime-type-9 data-x-internal=mime-type>MIME types</a> that it <a href=#explicitly-supported id=plugins-2:explicitly-supported-6>explicitly
  supports</a>.</p>

  <p>The <code id=plugins-2:dom-plugin-20><a href=#dom-plugin>Plugin</a></code> objects created by a user agent must not be
  <a href=#live id=plugins-2:live-3>live</a>. The set of MIME types represented by the objects, and the values of the
  objects' attributes, must not change once an object is created, except when updated by the
  <code id=plugins-2:pluginarray-22><a href=#pluginarray>PluginArray</a></code> object's <code id=plugins-2:dom-pluginarray-refresh-6><a href=#dom-pluginarray-refresh>refresh()</a></code>
  method.</p>

  <p>The <dfn id=reported-mime-types>reported MIME types</dfn> for a <code id=plugins-2:dom-plugin-21><a href=#dom-plugin>Plugin</a></code> object are the
  <a href=https://mimesniff.spec.whatwg.org/#mime-type id=plugins-2:mime-type-10 data-x-internal=mime-type>MIME types</a> <a href=#explicitly-supported id=plugins-2:explicitly-supported-7>explicitly supported</a> by the corresponding
  <a href=#plugin id=plugins-2:plugin-17>plugin</a> when this object was last created or updated by <code id=plugins-2:dom-pluginarray-refresh-7><a href=#dom-pluginarray-refresh>PluginArray.refresh()</a></code>, whichever happened most
  recently.</p>

  <p>The <a id=plugins-2:supported-property-indices-5 href=https://heycam.github.io/webidl/#dfn-supported-property-indices data-x-internal=supported-property-indices>supported property indices</a> of a <code id=plugins-2:dom-plugin-22><a href=#dom-plugin>Plugin</a></code> object
  are the numbers from zero to the number of <a href=#reported-mime-types id=plugins-2:reported-mime-types>reported MIME types</a>.
  <a href=#fingerprinting-vector id=plugins-2:fingerprinting-vector-9 class=fingerprint title="There is a potential fingerprinting vector here."><img alt="(This is a fingerprinting vector.)" src=/images/fingerprint.png width=46 height=64></a>
  </p>

  <p>The <dfn id=dom-plugin-length><code>length</code></dfn> attribute must return the number
  of <a href=#reported-mime-types id=plugins-2:reported-mime-types-2>reported MIME types</a>.
  <a href=#fingerprinting-vector id=plugins-2:fingerprinting-vector-10 class=fingerprint title="There is a potential fingerprinting vector here."><img alt="(This is a fingerprinting vector.)" src=/images/fingerprint.png width=46 height=64></a>
  </p>

  <p>The <dfn id=dom-plugin-item><code>item()</code></dfn> method of a <code id=plugins-2:dom-plugin-23><a href=#dom-plugin>Plugin</a></code> object must return null if the argument is not one of the
  object's <a id=plugins-2:supported-property-indices-6 href=https://heycam.github.io/webidl/#dfn-supported-property-indices data-x-internal=supported-property-indices>supported property indices</a>, and otherwise must return the result of running
  the following steps, using the method's argument as <var>index</var>:</p>

  <ol><li><p>Let <var>list</var> be the <code id=plugins-2:mimetype-22><a href=#mimetype>MimeType</a></code> objects representing the
   <a href=#reported-mime-types id=plugins-2:reported-mime-types-3>reported MIME types</a>.<li><p>Sort <var>list</var> alphabetically by the <code id=plugins-2:dom-mimetype-type-7><a href=#dom-mimetype-type>type</a></code> of each <code id=plugins-2:mimetype-23><a href=#mimetype>MimeType</a></code>.<li><p>Return the <var>index</var>th entry in <var>list</var>.</ol>

  <p class=note>It is important <a href=#fingerprinting-vector id=plugins-2:fingerprinting-vector-11 class=no-backref>for
  privacy</a> that the order of MIME types not leak additional information, e.g. the order in
  which plugins were installed.</p>

  <p>The <a id=plugins-2:supported-property-names-5 href=https://heycam.github.io/webidl/#dfn-supported-property-names data-x-internal=supported-property-names>supported property names</a> of a <code id=plugins-2:dom-plugin-24><a href=#dom-plugin>Plugin</a></code> object
  are the values of the <code id=plugins-2:dom-mimetype-type-8><a href=#dom-mimetype-type>type</a></code> attributes of the
  <code id=plugins-2:mimetype-24><a href=#mimetype>MimeType</a></code> objects representing the <a href=#reported-mime-types id=plugins-2:reported-mime-types-4>reported MIME types</a>.
  <a href=#fingerprinting-vector id=plugins-2:fingerprinting-vector-12 class=fingerprint title="There is a potential fingerprinting vector here."><img alt="(This is a fingerprinting vector.)" src=/images/fingerprint.png width=46 height=64></a>
  </p>

  <p>The <dfn id=dom-plugin-nameditem><code>namedItem()</code></dfn> method of a <code id=plugins-2:dom-plugin-25><a href=#dom-plugin>Plugin</a></code> object must return null if the argument is not one of the
  object's <a id=plugins-2:supported-property-names-6 href=https://heycam.github.io/webidl/#dfn-supported-property-names data-x-internal=supported-property-names>supported property names</a>, and otherwise must return the
  <code id=plugins-2:mimetype-25><a href=#mimetype>MimeType</a></code> object that has a <code id=plugins-2:dom-mimetype-type-9><a href=#dom-mimetype-type>type</a></code> equal to the
  method's argument.</p>

  <p>The <dfn id=dom-plugin-name><code>name</code></dfn> attribute must return the
  <a href=#plugin id=plugins-2:plugin-18>plugin</a>'s name.</p>

  <p>The <dfn id=dom-plugin-description><code>description</code></dfn> and <dfn id=dom-plugin-filename><code>filename</code></dfn> attributes must return user-agent-defined
  (or, in all likelihood, <a href=#plugin id=plugins-2:plugin-19>plugin</a>-defined) strings. In each case, the same string must
  be returned each time, except that the strings returned may change when the <code id=plugins-2:dom-pluginarray-refresh-8><a href=#dom-pluginarray-refresh>PluginArray.refresh()</a></code> method updates the object.</p>

  <p class=warning>If the values returned by the <code id=plugins-2:dom-plugin-description-3><a href=#dom-plugin-description>description</a></code> or <code id=plugins-2:dom-plugin-filename-3><a href=#dom-plugin-filename>filename</a></code> attributes vary between versions of a
  <a href=#plugin id=plugins-2:plugin-20>plugin</a>, they can be used both as a fingerprinting vector and, even more importantly,
  as a trivial way to determine what security vulnerabilities a <a href=#plugin id=plugins-2:plugin-21>plugin</a> (and thus a
  browser) may have. It is thus highly recommended that the <code id=plugins-2:dom-plugin-description-4><a href=#dom-plugin-description>description</a></code> attribute just return the same value as the
  <code id=plugins-2:dom-plugin-name-7><a href=#dom-plugin-name>name</a></code> attribute, and that the <code id=plugins-2:dom-plugin-filename-4><a href=#dom-plugin-filename>filename</a></code> attribute return the empty string.
  <a href=#fingerprinting-vector id=plugins-2:fingerprinting-vector-13 class=fingerprint title="There is a potential fingerprinting vector here."><img alt="(This is a fingerprinting vector.)" src=/images/fingerprint.png width=46 height=64></a>
  </p>

  <hr>

  <p>A <code id=plugins-2:mimetype-26><a href=#mimetype>MimeType</a></code> object represents a <a id=plugins-2:mime-type-11 href=https://mimesniff.spec.whatwg.org/#mime-type data-x-internal=mime-type>MIME type</a> that is, or was,
  <a href=#explicitly-supported id=plugins-2:explicitly-supported-8>explicitly supported</a> by a <a href=#plugin id=plugins-2:plugin-22>plugin</a>.</p>

  <p>The <code id=plugins-2:mimetype-27><a href=#mimetype>MimeType</a></code> objects created by a user agent must not be <a href=#live id=plugins-2:live-4>live</a>. The
  values of the objects' attributes must not change once an object is created, except when updated
  by the <code id=plugins-2:pluginarray-23><a href=#pluginarray>PluginArray</a></code> object's <code id=plugins-2:dom-pluginarray-refresh-9><a href=#dom-pluginarray-refresh>refresh()</a></code>
  method.</p>

  <p>The <dfn id=dom-mimetype-type><code>type</code></dfn> attribute must return the
  <a id=plugins-2:valid-mime-type-with-no-parameters href=https://mimesniff.spec.whatwg.org/#valid-mime-type-with-no-parameters data-x-internal=valid-mime-type-with-no-parameters>valid MIME type with no parameters</a> describing the <a id=plugins-2:mime-type-12 href=https://mimesniff.spec.whatwg.org/#mime-type data-x-internal=mime-type>MIME type</a>.</p>

  <p>The <dfn id=dom-mimetype-description><code>description</code></dfn> and <dfn id=dom-mimetype-suffixes><code>suffixes</code></dfn> attributes must return
  user-agent-defined (or, in all likelihood, <a href=#plugin id=plugins-2:plugin-23>plugin</a>-defined) strings. In each case, the
  same string must be returned each time, except that the strings returned may change when the <code id=plugins-2:dom-pluginarray-refresh-10><a href=#dom-pluginarray-refresh>PluginArray.refresh()</a></code> method updates the object.</p>

  <p class=warning>If the values returned by the <code id=plugins-2:dom-mimetype-description-3><a href=#dom-mimetype-description>description</a></code> or <code id=plugins-2:dom-mimetype-suffixes-3><a href=#dom-mimetype-suffixes>suffixes</a></code> attributes vary between versions of a
  <a href=#plugin id=plugins-2:plugin-24>plugin</a>, they can be used both as a fingerprinting vector and, even more importantly,
  as a trivial way to determine what security vulnerabilities a <a href=#plugin id=plugins-2:plugin-25>plugin</a> (and thus a
  browser) may have. It is thus highly recommended that the <code id=plugins-2:dom-mimetype-description-4><a href=#dom-mimetype-description>description</a></code> attribute just return the same value as the
  <code id=plugins-2:dom-mimetype-type-10><a href=#dom-mimetype-type>type</a></code> attribute, and that the <code id=plugins-2:dom-mimetype-suffixes-4><a href=#dom-mimetype-suffixes>suffixes</a></code> attribute return the empty string.
  <a href=#fingerprinting-vector id=plugins-2:fingerprinting-vector-14 class=fingerprint title="There is a potential fingerprinting vector here."><img alt="(This is a fingerprinting vector.)" src=/images/fingerprint.png width=46 height=64></a>
  </p>

  <p class=note>Commas in the <code id=plugins-2:dom-mimetype-suffixes-5><a href=#dom-mimetype-suffixes>suffixes</a></code> attribute are
  interpreted as separating subsequent filename extensions, as in "<code>htm,html</code>".</p>

  <p>The <dfn id=dom-mimetype-enabledplugin><code>enabledPlugin</code></dfn> attribute must
  return the <code id=plugins-2:dom-plugin-26><a href=#dom-plugin>Plugin</a></code> object that represents the <a href=#plugin id=plugins-2:plugin-26>plugin</a>
  that <a href=#explicitly-supported id=plugins-2:explicitly-supported-9>explicitly supported</a> the <a id=plugins-2:mime-type-13 href=https://mimesniff.spec.whatwg.org/#mime-type data-x-internal=mime-type>MIME type</a> that this <code id=plugins-2:mimetype-28><a href=#mimetype>MimeType</a></code>
  object represents when this object was last created or updated by <code id=plugins-2:dom-pluginarray-refresh-11><a href=#dom-pluginarray-refresh>PluginArray.refresh()</a></code>, whichever happened most
  recently.</p>

  <hr>

  <p>The <dfn id=dom-navigator-javaenabled><code>navigator.javaEnabled()</code></dfn> method
  must return true if the user agent supports a <a href=#plugin id=plugins-2:plugin-27>plugin</a> that supports the <a id=plugins-2:mime-type-14 href=https://mimesniff.spec.whatwg.org/#mime-type data-x-internal=mime-type>MIME
  type</a> "<code>application/x-java-vm</code>"; otherwise it must return false.
  <a href=#fingerprinting-vector id=plugins-2:fingerprinting-vector-15 class=fingerprint title="There is a potential fingerprinting vector here."><img alt="(This is a fingerprinting vector.)" src=/images/fingerprint.png width=46 height=64></a>
  </p>

  




  <h3 id=images-2>8.8 Images<a href=#images-2 class=self-link></a></h3>

  <pre class=idl>[Exposed=(Window,Worker)]
interface <dfn id=imagebitmap>ImageBitmap</dfn> {
  readonly attribute unsigned long <a href=#dom-imagebitmap-width id=images-2:dom-imagebitmap-width>width</a>;
  readonly attribute unsigned long <a href=#dom-imagebitmap-height id=images-2:dom-imagebitmap-height>height</a>;
  void <a href=#dom-imagebitmap-close id=images-2:dom-imagebitmap-close>close</a>();
};

typedef (<a href=#canvasimagesource id=images-2:canvasimagesource>CanvasImageSource</a> or
         <a id=images-2:blob href=https://w3c.github.io/FileAPI/#blob data-x-internal=blob>Blob</a> or
         <a href=#imagedata id=images-2:imagedata>ImageData</a>) <dfn id=imagebitmapsource>ImageBitmapSource</dfn>;

enum <dfn id=imageorientation>ImageOrientation</dfn> { "<a href=#dom-imageorientation-none id=images-2:dom-imageorientation-none>none</a>", "<a href=#dom-imageorientation-flipy id=images-2:dom-imageorientation-flipy>flipY</a>" };
enum <dfn id=premultiplyalpha>PremultiplyAlpha</dfn> { "<a href=#dom-premultiplyalpha-none id=images-2:dom-premultiplyalpha-none>none</a>", "<a href=#dom-premultiplyalpha-premultiply id=images-2:dom-premultiplyalpha-premultiply>premultiply</a>", "<a href=#dom-premultiplyalpha-default id=images-2:dom-premultiplyalpha-default>default</a>" };
enum <dfn id=colorspaceconversion>ColorSpaceConversion</dfn> { "<a href=#dom-colorspaceconversion-none id=images-2:dom-colorspaceconversion-none>none</a>", "<a href=#dom-colorspaceconversion-default id=images-2:dom-colorspaceconversion-default>default</a>" };
enum <dfn id=resizequality>ResizeQuality</dfn> { "<a href=#dom-resizequality-pixelated id=images-2:dom-resizequality-pixelated>pixelated</a>", "<a href=#dom-resizequality-low id=images-2:dom-resizequality-low>low</a>", "<a href=#dom-resizequality-medium id=images-2:dom-resizequality-medium>medium</a>", "<a href=#dom-resizequality-high id=images-2:dom-resizequality-high>high</a>" };

dictionary <dfn id=imagebitmapoptions>ImageBitmapOptions</dfn> {
  <a href=#imageorientation id=images-2:imageorientation>ImageOrientation</a> <a href=#dom-imagebitmapoptions-imageorientation id=images-2:dom-imagebitmapoptions-imageorientation>imageOrientation</a> = "<a href=#dom-imageorientation-none id=images-2:dom-imageorientation-none-2>none</a>";
  <a href=#premultiplyalpha id=images-2:premultiplyalpha>PremultiplyAlpha</a> <a href=#dom-imagebitmapoptions-premultiplyalpha id=images-2:dom-imagebitmapoptions-premultiplyalpha>premultiplyAlpha</a> = "<a href=#dom-premultiplyalpha-default id=images-2:dom-premultiplyalpha-default-2>default</a>";
  <a href=#colorspaceconversion id=images-2:colorspaceconversion>ColorSpaceConversion</a> <a href=#dom-imagebitmapoptions-colorspaceconversion id=images-2:dom-imagebitmapoptions-colorspaceconversion>colorSpaceConversion</a> = "<a href=#dom-colorspaceconversion-default id=images-2:dom-colorspaceconversion-default-2>default</a>";
  [EnforceRange] unsigned long <a href=#dom-imagebitmapoptions-resizewidth id=images-2:dom-imagebitmapoptions-resizewidth>resizeWidth</a>;
  [EnforceRange] unsigned long <a href=#dom-imagebitmapoptions-resizeheight id=images-2:dom-imagebitmapoptions-resizeheight>resizeHeight</a>;
  <a href=#resizequality id=images-2:resizequality>ResizeQuality</a> <a href=#dom-imagebitmapoptions-resizequality id=images-2:dom-imagebitmapoptions-resizequality>resizeQuality</a> = "<a href=#dom-resizequality-low id=images-2:dom-resizequality-low-2>low</a>";
};</pre>

  <p>An <code id=images-2:imagebitmap><a href=#imagebitmap>ImageBitmap</a></code> object represents a bitmap image that can be painted to a canvas
  without undue latency.</p>

  <p class=note>The exact judgement of what is undue latency of this is left up to the
  implementer, but in general if making use of the bitmap requires network I/O, or even local disk
  I/O, then the latency is probably undue; whereas if it only requires a blocking read from a GPU or
  system RAM, the latency is probably acceptable.</p>

  <dl class=domintro><dt><var>promise</var> = self . <code id=images-2:dom-createimagebitmap><a href=#dom-createimagebitmap>createImageBitmap</a></code>(<var>image</var> [, <var>options</var> ])<dt><var>promise</var> = self . <code id=images-2:dom-createimagebitmap-2><a href=#dom-createimagebitmap>createImageBitmap</a></code>(<var>image</var>, <var>sx</var>, <var>sy</var>, <var>sw</var>, <var>sh</var> [, <var>options</var> ])<dd>

    <p>Takes <var>image</var>, which can be an <code id=images-2:the-img-element><a href=#the-img-element>img</a></code> element, an <a id=images-2:svg-image href=https://www.w3.org/TR/SVG11/struct.html#ImageElement data-x-internal=svg-image>SVG
    <code>image</code></a> element, a <code id=images-2:the-video-element><a href=#the-video-element>video</a></code> element, a <code id=images-2:the-canvas-element><a href=#the-canvas-element>canvas</a></code>
    element, a <code id=images-2:blob-2><a data-x-internal=blob href=https://w3c.github.io/FileAPI/#blob>Blob</a></code> object, an <code id=images-2:imagedata-2><a href=#imagedata>ImageData</a></code> object, or another
    <code id=images-2:imagebitmap-2><a href=#imagebitmap>ImageBitmap</a></code> object, and returns a promise that is resolved when a new
    <code id=images-2:imagebitmap-3><a href=#imagebitmap>ImageBitmap</a></code> is created.</p>

    <p>If no <code id=images-2:imagebitmap-4><a href=#imagebitmap>ImageBitmap</a></code> object can be constructed, for example because the provided
    <var>image</var> data is not actually an image, then the promise is rejected instead.</p>

    <p>If <var>sx</var>, <var>sy</var>, <var>sw</var>, and <var>sh</var> arguments are provided, the source image is cropped to the given pixels, with
    any pixels missing in the original replaced by transparent black. These coordinates are in the
    source image's pixel coordinate space, <em>not</em> in <a href=https://drafts.csswg.org/css-values/#px id="images-2:'px'" data-x-internal="'px'">CSS
    pixels</a>.</p>

    <p>If <var>options</var> is provided, the <code id=images-2:imagebitmap-5><a href=#imagebitmap>ImageBitmap</a></code> object's bitmap
    data is modified according to <var>options</var>. For example,
    if the <code id=images-2:dom-imagebitmapoptions-premultiplyalpha-2><a href=#dom-imagebitmapoptions-premultiplyalpha>premultiplyAlpha</a></code>
    option is set to "<code id=images-2:dom-premultiplyalpha-premultiply-2><a href=#dom-premultiplyalpha-premultiply>premultiply</a></code>",
    the <a href=#concept-imagebitmap-bitmap-data id=images-2:concept-imagebitmap-bitmap-data>bitmap data</a>'s color channels are
    premultiplied by its alpha channel.

    <p>Rejects the promise with an <a id=images-2:invalidstateerror href=https://heycam.github.io/webidl/#invalidstateerror data-x-internal=invalidstateerror>"<code>InvalidStateError</code>"</a>
    <code id=images-2:domexception><a data-x-internal=domexception href=https://heycam.github.io/webidl/#dfn-DOMException>DOMException</a></code> if the source image is not in a valid state (e.g. an <code id=images-2:the-img-element-2><a href=#the-img-element>img</a></code>
    element that hasn't loaded successfully, an <code id=images-2:imagebitmap-6><a href=#imagebitmap>ImageBitmap</a></code> object whose
    <a href=#detached id=images-2:detached>[[Detached]]</a> internal slot value is true, an <code id=images-2:imagedata-3><a href=#imagedata>ImageData</a></code> object whose
    <code id=images-2:dom-imagedata-data><a href=#dom-imagedata-data>data</a></code> attribute value's <a href=#detached id=images-2:detached-2>[[Detached]]</a>
    internal slot value is true, or a <code id=images-2:blob-3><a data-x-internal=blob href=https://w3c.github.io/FileAPI/#blob>Blob</a></code> whose data cannot be interpreted as a bitmap
    image).</p>

    <p>Rejects the promise with a <a id=images-2:securityerror href=https://heycam.github.io/webidl/#securityerror data-x-internal=securityerror>"<code>SecurityError</code>"</a>
    <code id=images-2:domexception-2><a data-x-internal=domexception href=https://heycam.github.io/webidl/#dfn-DOMException>DOMException</a></code> if the script is not allowed to access the image data of the source
    image (e.g. a <code id=images-2:the-video-element-2><a href=#the-video-element>video</a></code> that is <a href=#cors-cross-origin id=images-2:cors-cross-origin>CORS-cross-origin</a>, or a
    <code id=images-2:the-canvas-element-2><a href=#the-canvas-element>canvas</a></code> being drawn on by a script in a worker from another
    <a href=#concept-origin id=images-2:concept-origin>origin</a>).</p>

   <dt><var>imageBitmap</var> . <code id=images-2:dom-imagebitmap-close-2><a href=#dom-imagebitmap-close>close</a></code>()<dd>

    <p>Releases <var>imageBitmap</var>'s underlying <a href=#concept-imagebitmap-bitmap-data id=images-2:concept-imagebitmap-bitmap-data-2>bitmap data</a>.</p>

   <dt><var>imageBitmap</var> . <code id=images-2:dom-imagebitmap-width-2><a href=#dom-imagebitmap-width>width</a></code><dd>

    <p>Returns the <a href=#intrinsic-width id=images-2:intrinsic-width>intrinsic width</a> of the image, in <a href=https://drafts.csswg.org/css-values/#px id="images-2:'px'-2" data-x-internal="'px'">CSS
    pixels</a>.</p>

   <dt><var>imageBitmap</var> . <code id=images-2:dom-imagebitmap-height-2><a href=#dom-imagebitmap-height>height</a></code><dd>

    <p>Returns the <a href=#intrinsic-height id=images-2:intrinsic-height>intrinsic height</a> of the image, in <a href=https://drafts.csswg.org/css-values/#px id="images-2:'px'-3" data-x-internal="'px'">CSS
    pixels</a>.</p>

   </dl>

  

  <p>An <code id=images-2:imagebitmap-7><a href=#imagebitmap>ImageBitmap</a></code> object whose <a href=#detached id=images-2:detached-3>[[Detached]]</a> internal slot value
  is false always has associated <dfn id=concept-imagebitmap-bitmap-data>bitmap data</dfn>,
