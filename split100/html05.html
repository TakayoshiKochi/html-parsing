  <a href=#affected-by-a-base-url-change id=dynamic-changes-to-base-urls:affected-by-a-base-url-change-2>affected by a base URL change</a> (as defined by the DOM specification):</p>

  <dl class=switch><dt>If the element creates a <a href=#hyperlink id=dynamic-changes-to-base-urls:hyperlink>hyperlink</a><dd>

    <p>If the <a id=dynamic-changes-to-base-urls:url href=https://url.spec.whatwg.org/#concept-url data-x-internal=url>URL</a> identified by the hyperlink is being shown to the user, or if any
    data derived from that <a id=dynamic-changes-to-base-urls:url-2 href=https://url.spec.whatwg.org/#concept-url data-x-internal=url>URL</a> is affecting the display, then the <code id=dynamic-changes-to-base-urls:attr-hyperlink-href><a href=#attr-hyperlink-href>href</a></code> attribute should be <a href=#parse-a-url id=dynamic-changes-to-base-urls:parse-a-url>reparsed</a> relative to the element's <a id=dynamic-changes-to-base-urls:node-document href=https://dom.spec.whatwg.org/#concept-node-document data-x-internal=node-document>node document</a> and the UI updated
    appropriately.</p>

    <p class=example>For example, the CSS <code id=dynamic-changes-to-base-urls:selector-link><a href=#selector-link>:link</a></code>/<code id=dynamic-changes-to-base-urls:selector-visited><a href=#selector-visited>:visited</a></code> <a href=https://drafts.csswg.org/selectors/#pseudo-class id=dynamic-changes-to-base-urls:pseudo-class data-x-internal=pseudo-class>pseudo-classes</a>
    might have been affected.</p>

    <p>If the hyperlink has a <code id=dynamic-changes-to-base-urls:ping><a href=#ping>ping</a></code> attribute and its
    <a href=https://url.spec.whatwg.org/#concept-url id=dynamic-changes-to-base-urls:url-3 data-x-internal=url>URL(s)</a> are being shown to the user, then the <code id=dynamic-changes-to-base-urls:ping-2><a href=#ping>ping</a></code> attribute's tokens should be <a href=#parse-a-url id=dynamic-changes-to-base-urls:parse-a-url-2>reparsed</a> relative to the element's <a id=dynamic-changes-to-base-urls:node-document-2 href=https://dom.spec.whatwg.org/#concept-node-document data-x-internal=node-document>node document</a> and the UI updated
    appropriately.</p>

   <dt>If the element is a <code id=dynamic-changes-to-base-urls:the-q-element><a href=#the-q-element>q</a></code>, <code id=dynamic-changes-to-base-urls:the-blockquote-element><a href=#the-blockquote-element>blockquote</a></code>, <code id=dynamic-changes-to-base-urls:the-ins-element><a href=#the-ins-element>ins</a></code>, or
   <code id=dynamic-changes-to-base-urls:the-del-element><a href=#the-del-element>del</a></code> element with a <code>cite</code> attribute<dd>

    <p>If the <a id=dynamic-changes-to-base-urls:url-4 href=https://url.spec.whatwg.org/#concept-url data-x-internal=url>URL</a> identified by the <code>cite</code> attribute is being
    shown to the user, or if any data derived from that <a id=dynamic-changes-to-base-urls:url-5 href=https://url.spec.whatwg.org/#concept-url data-x-internal=url>URL</a> is affecting the display,
    then the <a id=dynamic-changes-to-base-urls:url-6 href=https://url.spec.whatwg.org/#concept-url data-x-internal=url>URL</a> should be <a href=#parse-a-url id=dynamic-changes-to-base-urls:parse-a-url-3>reparsed</a> relative to the
    element's <a id=dynamic-changes-to-base-urls:node-document-3 href=https://dom.spec.whatwg.org/#concept-node-document data-x-internal=node-document>node document</a> and the UI updated appropriately.</p>

   <dt>Otherwise<dd>

    <p>The element is not directly affected.</p>

    <p class=example>For instance, changing the base URL doesn't affect the image displayed by
    <code id=dynamic-changes-to-base-urls:the-img-element><a href=#the-img-element>img</a></code> elements, although subsequent accesses of the <code id=dynamic-changes-to-base-urls:dom-img-src><a href=#dom-img-src>src</a></code> IDL attribute from script will return a new <a id=dynamic-changes-to-base-urls:absolute-url href=https://url.spec.whatwg.org/#syntax-url-absolute data-x-internal=absolute-url>absolute
    URL</a> that might no longer correspond to the image being shown.</p>

   </dl>

  


  

  <h3 id=fetching-resources>2.5 Fetching resources<a href=#fetching-resources class=self-link></a></h3><div class=status><input onclick=toggleStatus(this) value=⋰ type=button><p class=bugs><strong>Spec bugs:</strong> <a href="https://www.w3.org/Bugs/Public/show_bug.cgi?id=11235" title="Mechanism to disable sending of cookies with requests for style sheets, background images, fonts, WebSockets, server-sent events, <video src>, <source>, <track>, <iframe>, <img>, etc">11235</a></div>

  <h4 id=terminology-3>2.5.1 Terminology<a href=#terminology-3 class=self-link></a></h4>

  <p>A <a href=https://fetch.spec.whatwg.org/#concept-response id=terminology-3:concept-response data-x-internal=concept-response>response</a> whose <a href=https://fetch.spec.whatwg.org/#concept-response-type id=terminology-3:concept-response-type data-x-internal=concept-response-type>type</a> is "<code>basic</code>", "<code>cors</code>", or "<code>default</code>" is <dfn id=cors-same-origin>CORS-same-origin</dfn>. <a href=#refsFETCH>[FETCH]</a></p>

  <p>A <a href=https://fetch.spec.whatwg.org/#concept-response id=terminology-3:concept-response-2 data-x-internal=concept-response>response</a> whose <a href=https://fetch.spec.whatwg.org/#concept-response-type id=terminology-3:concept-response-type-2 data-x-internal=concept-response-type>type</a> is "<code>opaque</code>" or "<code>opaqueredirect</code>" is <dfn id=cors-cross-origin>CORS-cross-origin</dfn>.</p>

  <p>A <a href=https://fetch.spec.whatwg.org/#concept-response id=terminology-3:concept-response-3 data-x-internal=concept-response>response</a>'s <dfn id=unsafe-response data-export="">unsafe response</dfn>
  is its <a href=https://fetch.spec.whatwg.org/#concept-internal-response id=terminology-3:concept-internal-response data-x-internal=concept-internal-response>internal response</a> if it has one, and the
  <a href=https://fetch.spec.whatwg.org/#concept-response id=terminology-3:concept-response-4 data-x-internal=concept-response>response</a> itself otherwise.</p>

  <p>To <dfn id=create-a-potential-cors-request>create a potential-CORS request</dfn>, given a <var>url</var>, <var>destination</var>,
  <var>corsAttributeState</var>, and an optional <i>same-origin fallback flag</i>, run these
  steps:</p>

  <ol><li><p>Let <var>mode</var> be "<code>no-cors</code>" if <var>corsAttributeState</var>
   is <a href=#attr-crossorigin-none id=terminology-3:attr-crossorigin-none>No CORS</a>, and "<code>cors</code>"
   otherwise.<li><p>If <i>same-origin fallback flag</i> is set and <var>mode</var> is "<code>no-cors</code>", set <var>mode</var> to "<code>same-origin</code>".<li><p>Let <var>credentialsMode</var> be "<code>include</code>".<li><p>If <var>corsAttributeState</var> is <a href=#attr-crossorigin-anonymous id=terminology-3:attr-crossorigin-anonymous>Anonymous</a>, set <var>credentialsMode</var> to "<code>same-origin</code>".<li><p>Let <var>request</var> be a new <a href=https://fetch.spec.whatwg.org/#concept-request id=terminology-3:concept-request data-x-internal=concept-request>request</a> whose
   <a href=https://fetch.spec.whatwg.org/#concept-request-url id=terminology-3:concept-request-url data-x-internal=concept-request-url>url</a> is <var>url</var>, <a href=https://fetch.spec.whatwg.org/#concept-request-destination id=terminology-3:concept-request-destination data-x-internal=concept-request-destination>destination</a> is <var>destination</var>,
   <a href=https://fetch.spec.whatwg.org/#concept-request-mode id=terminology-3:concept-request-mode data-x-internal=concept-request-mode>mode</a> is <var>mode</var>, <a href=https://fetch.spec.whatwg.org/#concept-request-credentials-mode id=terminology-3:concept-request-credentials-mode data-x-internal=concept-request-credentials-mode>credentials mode</a> is
   <var>credentialsMode</var>, and whose <a id=terminology-3:use-url-credentials-flag href=https://fetch.spec.whatwg.org/#concept-request-use-url-credentials-flag data-x-internal=use-url-credentials-flag>use-URL-credentials flag</a> is set.</ol>


  <h4 id=content-type-sniffing>2.5.2 Determining the type of a resource<a href=#content-type-sniffing class=self-link></a></h4>

  <p>The <dfn id=content-type>Content-Type metadata</dfn> of a resource must be obtained and
  interpreted in a manner consistent with the requirements of the WHATWG MIME Sniffing standard.
  <a href=#refsMIMESNIFF>[MIMESNIFF]</a></p>

  <p>The <dfn id=content-type-sniffing-2><a href=https://mimesniff.spec.whatwg.org/#computed-mime-type>computed MIME type</a></dfn> of a
  resource must be found in a manner consistent with the requirements given in the WHATWG MIME
  Sniffing standard. <a href=#refsMIMESNIFF>[MIMESNIFF]</a></p>

  <p>The <dfn id=content-type-sniffing:-image><a href=https://mimesniff.spec.whatwg.org/#rules-for-sniffing-images-specifically>rules for
  sniffing images specifically</a></dfn>, the <dfn id=content-type-sniffing:-text-or-binary><a href=https://mimesniff.spec.whatwg.org/#rules-for-text-or-binary>rules for distinguishing
  if a resource is text or binary</a></dfn>, and the <dfn id=content-type-sniffing:-video><a href=https://mimesniff.spec.whatwg.org/#rules-for-sniffing-audio-and-video-specifically>rules
  for sniffing audio and video specifically</a></dfn> are also defined in the WHATWG MIME Sniffing
  standard. These rules return a <a id=content-type-sniffing:mime-type href=https://mimesniff.spec.whatwg.org/#mime-type data-x-internal=mime-type>MIME type</a> as their result. <a href=#refsMIMESNIFF>[MIMESNIFF]</a></p>

  <p class=warning>It is imperative that the rules in the WHATWG MIME Sniffing standard be
  followed exactly. When a user agent uses different heuristics for content type detection than the
  server expects, security problems can occur. For more details, see the WHATWG MIME Sniffing
  standard. <a href=#refsMIMESNIFF>[MIMESNIFF]</a></p>


  <h4 id=extracting-character-encodings-from-meta-elements>2.5.3 Extracting character encodings from <code id=extracting-character-encodings-from-meta-elements:the-meta-element><a href=#the-meta-element>meta</a></code> elements<a href=#extracting-character-encodings-from-meta-elements class=self-link></a></h4>

  <p>The <dfn id=algorithm-for-extracting-a-character-encoding-from-a-meta-element>algorithm for extracting a character encoding from a <code>meta</code> element</dfn>,
  given a string <var>s</var>, is as follows. It either returns a character encoding or
  nothing.</p>

  <ol><li><p>Let <var>position</var> be a pointer into <var>s</var>, initially
   pointing at the start of the string.<li><p><i>Loop</i>: Find the first seven characters in <var>s</var> after <var>position</var> that are an <a id=extracting-character-encodings-from-meta-elements:ascii-case-insensitive href=https://infra.spec.whatwg.org/#ascii-case-insensitive data-x-internal=ascii-case-insensitive>ASCII case-insensitive</a> match for the word "<code>charset</code>". If no such match is found, return nothing and abort these
   steps.<li><p>Skip any <a href=#space-character id=extracting-character-encodings-from-meta-elements:space-character>space characters</a> that immediately follow the
   word "<code>charset</code>" (there might not be any).<li><p>If the next character is not a U+003D EQUALS SIGN (=), then move <var>position</var> to point just before that next character, and jump back to the step
   labeled <i>loop</i>.<li><p>Skip any <a href=#space-character id=extracting-character-encodings-from-meta-elements:space-character-2>space characters</a> that immediately follow the
   equals sign (there might not be any).<li>

    <p>Process the next character as follows:</p>

    <dl class=switch><dt>If it is a U+0022 QUOTATION MARK character (") and there is a later U+0022 QUOTATION MARK character (") in <var>s</var><dt>If it is a U+0027 APOSTROPHE character (') and there is a later U+0027 APOSTROPHE character (') in <var>s</var><dd>Return the result of <a id=extracting-character-encodings-from-meta-elements:getting-an-encoding href=https://encoding.spec.whatwg.org/#concept-encoding-get data-x-internal=getting-an-encoding>getting an encoding</a> from the substring that is between
     this character and the next earliest occurrence of this character.<dt>If it is an unmatched U+0022 QUOTATION MARK character (")<dt>If it is an unmatched U+0027 APOSTROPHE character (')<dt>If there is no next character<dd>Return nothing.<dt>Otherwise<dd>Return the result of <a id=extracting-character-encodings-from-meta-elements:getting-an-encoding-2 href=https://encoding.spec.whatwg.org/#concept-encoding-get data-x-internal=getting-an-encoding>getting an encoding</a> from the substring that consists of
     this character up to but not including the first <a href=#space-character id=extracting-character-encodings-from-meta-elements:space-character-3>space character</a> or U+003B
     SEMICOLON character (;), or the end of <var>s</var>, whichever comes first.</dl>

   </ol>

  <p class=note>This algorithm is distinct from those in the HTTP specification (for example, HTTP
  doesn't allow the use of single quotes and requires supporting a backslash-escape mechanism that
  is not supported by this algorithm). While the algorithm is used in
  contexts that, historically, were related to HTTP, the syntax as supported by implementations
  diverged some time ago. <a href=#refsHTTP>[HTTP]</a></p>

  


  <h4 id=cors-settings-attributes>2.5.4 CORS settings attributes<a href=#cors-settings-attributes class=self-link></a></h4>

  <p>A <dfn id=cors-settings-attribute>CORS settings attribute</dfn> is an <a href=#enumerated-attribute id=cors-settings-attributes:enumerated-attribute>enumerated attribute</a>. The following
  table lists the keywords and states for the attribute — the keywords in the left column map
  to the states in the cell in the second column on the same row as the keyword.</p>

  <table><thead><tr><th> Keyword
     <th> State
     <th> Brief description
   <tbody><tr><td><dfn id=attr-crossorigin-anonymous-keyword><code>anonymous</code></dfn>
     <td><dfn id=attr-crossorigin-anonymous>Anonymous</dfn>
     <td><a href=https://fetch.spec.whatwg.org/#concept-request id=cors-settings-attributes:concept-request data-x-internal=concept-request>Requests</a> for the element will have their <a href=https://fetch.spec.whatwg.org/#concept-request-mode id=cors-settings-attributes:concept-request-mode data-x-internal=concept-request-mode>mode</a> set to "<code>cors</code>" and their <a href=https://fetch.spec.whatwg.org/#concept-request-credentials-mode id=cors-settings-attributes:concept-request-credentials-mode data-x-internal=concept-request-credentials-mode>credentials mode</a> set to "<code>same-origin</code>".
    <tr><td><dfn id=attr-crossorigin-use-credentials-keyword><code>use-credentials</code></dfn>
     <td><dfn id=attr-crossorigin-use-credentials>Use Credentials</dfn>
     <td><a href=https://fetch.spec.whatwg.org/#concept-request id=cors-settings-attributes:concept-request-2 data-x-internal=concept-request>Requests</a> for the element will have their <a href=https://fetch.spec.whatwg.org/#concept-request-mode id=cors-settings-attributes:concept-request-mode-2 data-x-internal=concept-request-mode>mode</a> set to "<code>cors</code>" and their <a href=https://fetch.spec.whatwg.org/#concept-request-credentials-mode id=cors-settings-attributes:concept-request-credentials-mode-2 data-x-internal=concept-request-credentials-mode>credentials mode</a> set to "<code>include</code>".
  </table>

  <p>The empty string is also a valid keyword, and maps to the <a href=#attr-crossorigin-anonymous id=cors-settings-attributes:attr-crossorigin-anonymous>Anonymous</a> state. The attribute's <i id=cors-settings-attributes:invalid-value-default><a href=#invalid-value-default>invalid value default</a></i> is the <a href=#attr-crossorigin-anonymous id=cors-settings-attributes:attr-crossorigin-anonymous-2>Anonymous</a> state. For the
  purposes of <a href=#reflect id=cors-settings-attributes:reflect>reflection</a>, the canonical case for the <a href=#attr-crossorigin-anonymous id=cors-settings-attributes:attr-crossorigin-anonymous-3>Anonymous</a> state is the <code id=cors-settings-attributes:attr-crossorigin-anonymous-keyword><a href=#attr-crossorigin-anonymous-keyword>anonymous</a></code> keyword. The <i id=cors-settings-attributes:missing-value-default><a href=#missing-value-default>missing value default</a></i>, used when the attribute is omitted, is the <dfn id=attr-crossorigin-none>No
  CORS</dfn> state.</p>


  <h4 id=referrer-policy-attributes>2.5.5 Referrer policy attributes<a href=#referrer-policy-attributes class=self-link></a></h4>

  <p>A <dfn id=referrer-policy-attribute data-export="">referrer policy attribute</dfn> is an <a href=#enumerated-attribute id=referrer-policy-attributes:enumerated-attribute>enumerated attribute</a>.
  Each <a id=referrer-policy-attributes:referrer-policy href=https://w3c.github.io/webappsec-referrer-policy/#referrer-policy data-x-internal=referrer-policy>referrer policy</a>, including the empty string, is a keyword for this attribute,
  mapping to a state of the same name.</p>

  <p>The attribute's <i id=referrer-policy-attributes:invalid-value-default><a href=#invalid-value-default>invalid value default</a></i> and <i id=referrer-policy-attributes:missing-value-default><a href=#missing-value-default>missing value default</a></i> are both the empty string state.</p>

  <p>The impact of these states on the processing model of various <a href=https://fetch.spec.whatwg.org/#concept-fetch id=referrer-policy-attributes:concept-fetch data-x-internal=concept-fetch>fetches</a> is defined in more detail throughout this specification, in
  the WHATWG Fetch standard, and in <cite>Referrer Policy</cite>. <a href=#refsFETCH>[FETCH]</a> <a href=#refsREFERRERPOLICY>[REFERRERPOLICY]</a></p>

  <div class=note>
   <p>Several signals can contribute to which processing model is used for a given <a href=https://fetch.spec.whatwg.org/#concept-fetch id=referrer-policy-attributes:concept-fetch-2 data-x-internal=concept-fetch>fetch</a>; a <a href=#referrer-policy-attribute id=referrer-policy-attributes:referrer-policy-attribute>referrer policy attribute</a> is only one of
   them. In general, the order in which these signals are processed are:</p>

   <ol><li><p>First, the presence of a <code id=referrer-policy-attributes:link-type-noreferrer><a href=#link-type-noreferrer>noreferrer</a></code> link
    type;<li><p>Then, the value of a <a href=#referrer-policy-attribute id=referrer-policy-attributes:referrer-policy-attribute-2>referrer policy attribute</a>;<li><p>Then, the presence of any <code id=referrer-policy-attributes:the-meta-element><a href=#the-meta-element>meta</a></code> element with <code id=referrer-policy-attributes:attr-meta-name><a href=#attr-meta-name>name</a></code> attribute set to <code id=referrer-policy-attributes:meta-referrer><a href=#meta-referrer>referrer</a></code>.<li><p>Finally, the `<code id=referrer-policy-attributes:http-referrer-policy><a data-x-internal=http-referrer-policy href=https://w3c.github.io/webappsec-referrer-policy/#referrer-policy-header-dfn>Referrer-Policy</a></code>` HTTP
    header.</ol>
  </div>


  <h3 id=common-dom-interfaces>2.6 Common DOM interfaces<a href=#common-dom-interfaces class=self-link></a></h3>

  <h4 id=reflecting-content-attributes-in-idl-attributes>2.6.1 Reflecting content attributes in IDL attributes<a href=#reflecting-content-attributes-in-idl-attributes class=self-link></a></h4>

  <p>Some IDL attributes are defined to <dfn id=reflect>reflect</dfn> a particular content attribute. This
  means that on getting, the IDL attribute returns the current value of the content attribute, and
  on setting, the IDL attribute changes the value of the content attribute to the given value.</p>

  

  <p>In general, on getting, if the content attribute is not present, the IDL attribute must act as
  if the content attribute's value is the empty string; and on setting, if the content attribute is
  not present, it must first be added.</p>

  <p>If a reflecting IDL attribute is a <code id=reflecting-content-attributes-in-idl-attributes:idl-usvstring><a data-x-internal=idl-usvstring href=https://heycam.github.io/webidl/#idl-USVString>USVString</a></code> attribute
  whose content attribute is defined to contain a <a id=reflecting-content-attributes-in-idl-attributes:url href=https://url.spec.whatwg.org/#concept-url data-x-internal=url>URL</a>, then on getting, if the
  content attribute is absent, the IDL attribute must return the empty string. Otherwise, the IDL
  attribute must <a href=#parse-a-url id=reflecting-content-attributes-in-idl-attributes:parse-a-url>parse</a> the value of the content attribute relative
  to the element's <a id=reflecting-content-attributes-in-idl-attributes:node-document href=https://dom.spec.whatwg.org/#concept-node-document data-x-internal=node-document>node document</a> and if that is successful, return the <a href=#resulting-url-string id=reflecting-content-attributes-in-idl-attributes:resulting-url-string>resulting
  URL string</a>. If parsing fails, then the value of the content attribute must be returned
  instead, <a href=https://heycam.github.io/webidl/#es-type-mapping id=reflecting-content-attributes-in-idl-attributes:concept-idl-convert data-x-internal=concept-idl-convert>converted</a> to a <code id=reflecting-content-attributes-in-idl-attributes:idl-usvstring-2><a data-x-internal=idl-usvstring href=https://heycam.github.io/webidl/#idl-USVString>USVString</a></code>. On setting, the content attribute must be set to the
  specified new value.</p>

  <p>If a reflecting IDL attribute is a <code id=reflecting-content-attributes-in-idl-attributes:idl-domstring><a data-x-internal=idl-domstring href=https://heycam.github.io/webidl/#idl-DOMString>DOMString</a></code> attribute
  whose content attribute is an <a href=#enumerated-attribute id=reflecting-content-attributes-in-idl-attributes:enumerated-attribute>enumerated attribute</a>, and the IDL attribute is
  <dfn id=limited-to-only-known-values>limited to only known values</dfn>, then, on getting, the IDL attribute must return the
  conforming value associated with the state the attribute is in (in its canonical case), if any, or
  the empty string if the attribute is in a state that has no associated keyword value or if the
  attribute is not in a defined state (e.g. the attribute is missing and there is no <i id=reflecting-content-attributes-in-idl-attributes:missing-value-default><a href=#missing-value-default>missing value default</a></i>). On setting, the content attribute must
  be set to the specified new value.</p>

  <p>If a reflecting IDL attribute is a nullable <code id=reflecting-content-attributes-in-idl-attributes:idl-domstring-2><a data-x-internal=idl-domstring href=https://heycam.github.io/webidl/#idl-DOMString>DOMString</a></code>
  attribute whose content attribute is an <a href=#enumerated-attribute id=reflecting-content-attributes-in-idl-attributes:enumerated-attribute-2>enumerated attribute</a>, then, on getting, if
  the corresponding content attribute is in its <i>missing value default</i> then the IDL attribute
  must return null, otherwise, the IDL attribute must return the conforming value associated with
  the state the attribute is in (in its canonical case). On setting, if the new value is null, the
  content attribute must be removed, and otherwise, the content attribute must be set to the
  specified new value.</p>

  <p>If a reflecting IDL attribute is a <code id=reflecting-content-attributes-in-idl-attributes:idl-domstring-3><a data-x-internal=idl-domstring href=https://heycam.github.io/webidl/#idl-DOMString>DOMString</a></code> or <code id=reflecting-content-attributes-in-idl-attributes:idl-usvstring-3><a data-x-internal=idl-usvstring href=https://heycam.github.io/webidl/#idl-USVString>USVString</a></code> attribute but doesn't fall into any of the above
  categories, then the getting and setting must be done in a transparent, case-preserving manner.</p>

  <p>If a reflecting IDL attribute is an <a id=reflecting-content-attributes-in-idl-attributes:idl-enumeration href=https://heycam.github.io/webidl/#idl-enums data-x-internal=idl-enumeration>IDL enumeration</a> attribute, then, on getting,
  if the corresponding content attribute's value <a href=#case-sensitive id=reflecting-content-attributes-in-idl-attributes:case-sensitive>case-sensitively</a> matches one of the enumerated values, then the IDL
  attribute must return the content attribute's value; otherwise it must return the content
  attribute's default value. On setting, the content attribute must be set to the specified new
  value.</p>

  <p>If a reflecting IDL attribute is a <code id=reflecting-content-attributes-in-idl-attributes:idl-boolean><a data-x-internal=idl-boolean href=https://heycam.github.io/webidl/#idl-boolean>boolean</a></code> attribute, then on
  getting the IDL attribute must return true if the content attribute is set, and false if it is
  absent. On setting, the content attribute must be removed if the IDL attribute is set to false,
  and must be set to the empty string if the IDL attribute is set to true. (This corresponds to the
  rules for <a href=#boolean-attribute id=reflecting-content-attributes-in-idl-attributes:boolean-attribute>boolean content attributes</a>.)</p>

  <p>If a reflecting IDL attribute has a signed integer type (<code id=reflecting-content-attributes-in-idl-attributes:idl-long><a data-x-internal=idl-long href=https://heycam.github.io/webidl/#idl-long>long</a></code>)
  then, on getting, the content attribute must be parsed according to the <a href=#rules-for-parsing-integers id=reflecting-content-attributes-in-idl-attributes:rules-for-parsing-integers>rules for parsing signed integers</a>, and if that is successful, and the
  value is in the range of the IDL attribute's type, the resulting value must be returned. If, on
  the other hand, it fails or returns an out of range value, or if the attribute is absent, then the
  default value must be returned instead, or 0 if there is no default value. On setting, the given
  value must be converted to the shortest possible string representing the number as a <a href=#valid-integer id=reflecting-content-attributes-in-idl-attributes:valid-integer>valid
  integer</a> and then that string must be used as the new content attribute value.</p>

  <p>If a reflecting IDL attribute has a signed integer type (<code id=reflecting-content-attributes-in-idl-attributes:idl-long-2><a data-x-internal=idl-long href=https://heycam.github.io/webidl/#idl-long>long</a></code>)
  that is <dfn id=limited-to-only-non-negative-numbers>limited to only non-negative numbers</dfn> then, on getting, the content attribute
  must be parsed according to the <a href=#rules-for-parsing-non-negative-integers id=reflecting-content-attributes-in-idl-attributes:rules-for-parsing-non-negative-integers>rules for parsing non-negative integers</a>, and if that
  is successful, and the value is in the range of the IDL attribute's type, the resulting value must
  be returned. If, on the other hand, it fails or returns an out of range value, or if the attribute
  is absent, the default value must be returned instead, or −1 if there is no default value.
  On setting, if the value is negative, the user agent must throw an
  <a id=reflecting-content-attributes-in-idl-attributes:indexsizeerror href=https://heycam.github.io/webidl/#indexsizeerror data-x-internal=indexsizeerror>"<code>IndexSizeError</code>"</a> <code id=reflecting-content-attributes-in-idl-attributes:domexception><a data-x-internal=domexception href=https://heycam.github.io/webidl/#dfn-DOMException>DOMException</a></code>. Otherwise, the given value
  must be converted to the shortest possible string representing the number as a <a href=#valid-non-negative-integer id=reflecting-content-attributes-in-idl-attributes:valid-non-negative-integer>valid
  non-negative integer</a> and then that string must be used as the new content attribute
  value.</p>

  <p>If a reflecting IDL attribute has an <em>unsigned</em> integer type (<code id=reflecting-content-attributes-in-idl-attributes:idl-unsigned-long><a data-x-internal=idl-unsigned-long href=https://heycam.github.io/webidl/#idl-unsigned-long>unsigned long</a></code>) then, on getting, the content attribute must be
  parsed according to the <a href=#rules-for-parsing-non-negative-integers id=reflecting-content-attributes-in-idl-attributes:rules-for-parsing-non-negative-integers-2>rules for parsing non-negative integers</a>, and if that is
  successful, and the value is in the range 0 to 2147483647 inclusive, the resulting value must be
  returned. If, on the other hand, it fails or returns an out of range value, or if the attribute is
  absent, the default value must be returned instead, or 0 if there is no default value. On setting,
  first, if the new value is in the range 0 to 2147483647, then let <var>n</var> be the new value,
  otherwise let <var>n</var> be the default value, or 0 if there is no default value; then,
  <var>n</var> must be converted to the shortest possible string representing the number as a
  <a href=#valid-non-negative-integer id=reflecting-content-attributes-in-idl-attributes:valid-non-negative-integer-2>valid non-negative integer</a> and that string must be used as the new content attribute
  value.</p>
  

  <p>If a reflecting IDL attribute has an unsigned integer type (<code id=reflecting-content-attributes-in-idl-attributes:idl-unsigned-long-2><a data-x-internal=idl-unsigned-long href=https://heycam.github.io/webidl/#idl-unsigned-long>unsigned long</a></code>) that is <dfn id=limited-to-only-non-negative-numbers-greater-than-zero>limited to only non-negative numbers
  greater than zero</dfn>, then the behavior is similar to the previous case, but zero is not
  allowed. On getting, the content attribute must first be parsed according to the <a href=#rules-for-parsing-non-negative-integers id=reflecting-content-attributes-in-idl-attributes:rules-for-parsing-non-negative-integers-3>rules for
  parsing non-negative integers</a>, and if that is successful, and the value is in the range 1
  to 2147483647 inclusive, the resulting value must be returned. If, on the other hand, it fails or
  returns an out of range value, or if the attribute is absent, the default value must be returned
  instead, or 1 if there is no default value. On setting, if the value is zero, the user agent must
  throw an <a id=reflecting-content-attributes-in-idl-attributes:indexsizeerror-2 href=https://heycam.github.io/webidl/#indexsizeerror data-x-internal=indexsizeerror>"<code>IndexSizeError</code>"</a> <code id=reflecting-content-attributes-in-idl-attributes:domexception-2><a data-x-internal=domexception href=https://heycam.github.io/webidl/#dfn-DOMException>DOMException</a></code>. Otherwise, first,
  if the new value is in the range 1 to 2147483647, then let <var>n</var> be the new value,
  otherwise let <var>n</var> be the default value, or 1 if there is no default value; then,
  <var>n</var> must be converted to the shortest possible string representing the number as a
  <a href=#valid-non-negative-integer id=reflecting-content-attributes-in-idl-attributes:valid-non-negative-integer-3>valid non-negative integer</a> and that string must be used as the new content attribute
  value.</p> 

  <p>If a reflecting IDL attribute has an unsigned integer type (<code id=reflecting-content-attributes-in-idl-attributes:idl-unsigned-long-3><a data-x-internal=idl-unsigned-long href=https://heycam.github.io/webidl/#idl-unsigned-long>unsigned long</a></code>) that is <dfn id=limited-to-only-non-negative-numbers-greater-than-zero-with-fallback>limited to only non-negative numbers
  greater than zero with fallback</dfn>, then the behavior is similar to the previous case, but
  disallowed values are converted to the default value. On getting, the content attribute must first
  be parsed according to the <a href=#rules-for-parsing-non-negative-integers id=reflecting-content-attributes-in-idl-attributes:rules-for-parsing-non-negative-integers-4>rules for parsing non-negative integers</a>, and if that is
  successful, and the value is in the range 1 to 2147483647 inclusive, the resulting value must be
  returned. If, on the other hand, it fails or returns an out of range value, or if the attribute is
  absent, the default value must be returned instead. On setting, first, if the new value is in the
  range 1 to 2147483647, then let <var>n</var> be the new value, otherwise let <var>n</var> be the
  default value; then, <var>n</var> must be converted to the shortest possible string representing
  the number as a <a href=#valid-non-negative-integer id=reflecting-content-attributes-in-idl-attributes:valid-non-negative-integer-4>valid non-negative integer</a> and that string must be used as the new
  content attribute value.</p> 

  <p>If a reflecting IDL attribute has a floating-point number type (<code id=reflecting-content-attributes-in-idl-attributes:idl-double><a data-x-internal=idl-double href=https://heycam.github.io/webidl/#idl-double>double</a></code> or <code id=reflecting-content-attributes-in-idl-attributes:idl-unrestricted-double><a data-x-internal=idl-unrestricted-double href=https://heycam.github.io/webidl/#idl-unrestricted-double>unrestricted
  double</a></code>), then, on getting, the content attribute must be parsed according to the
  <a href=#rules-for-parsing-floating-point-number-values id=reflecting-content-attributes-in-idl-attributes:rules-for-parsing-floating-point-number-values>rules for parsing floating-point number values</a>, and if that is successful, the
  resulting value must be returned. If, on the other hand, it fails, or if the attribute is absent,
  the default value must be returned instead, or 0.0 if there is no default value. On setting, the
  given value must be converted to the <a href=#best-representation-of-the-number-as-a-floating-point-number id=reflecting-content-attributes-in-idl-attributes:best-representation-of-the-number-as-a-floating-point-number>best representation of the number as a floating-point
  number</a> and then that string must be used as the new content attribute value.</p>

  <p>If a reflecting IDL attribute has a floating-point number type (<code id=reflecting-content-attributes-in-idl-attributes:idl-double-2><a data-x-internal=idl-double href=https://heycam.github.io/webidl/#idl-double>double</a></code> or <code id=reflecting-content-attributes-in-idl-attributes:idl-unrestricted-double-2><a data-x-internal=idl-unrestricted-double href=https://heycam.github.io/webidl/#idl-unrestricted-double>unrestricted
  double</a></code>) that is <dfn id=limited-to-numbers-greater-than-zero>limited to numbers greater than zero</dfn>, then the behavior is
  similar to the previous case, but zero and negative values are not allowed. On getting, the
  content attribute must be parsed according to the <a href=#rules-for-parsing-floating-point-number-values id=reflecting-content-attributes-in-idl-attributes:rules-for-parsing-floating-point-number-values-2>rules for parsing floating-point number
  values</a>, and if that is successful and the value is greater than 0.0, the resulting value
  must be returned. If, on the other hand, it fails or returns an out of range value, or if the
  attribute is absent, the default value must be returned instead, or 0.0 if there is no default
  value. On setting, if the value is less than or equal to zero, then the value must be ignored.
  Otherwise, the given value must be converted to the <a href=#best-representation-of-the-number-as-a-floating-point-number id=reflecting-content-attributes-in-idl-attributes:best-representation-of-the-number-as-a-floating-point-number-2>best representation of the number as a
  floating-point number</a> and then that string must be used as the new content attribute
  value.</p>

  <p class=note>The values Infinity and Not-a-Number (NaN) values throw an exception on setting,
  as defined in the Web IDL specification. <a href=#refsWEBIDL>[WEBIDL]</a></p>

  <p>If a reflecting IDL attribute has the type <code id=reflecting-content-attributes-in-idl-attributes:domtokenlist><a data-x-internal=domtokenlist href=https://dom.spec.whatwg.org/#interface-domtokenlist>DOMTokenList</a></code>, then on getting it must
  return a <code id=reflecting-content-attributes-in-idl-attributes:domtokenlist-2><a data-x-internal=domtokenlist href=https://dom.spec.whatwg.org/#interface-domtokenlist>DOMTokenList</a></code> object whose associated element is the element in question and
  whose associated attribute's local name is the name of the attribute in question.</p>

  <p>If a reflecting IDL attribute has the type <code id=reflecting-content-attributes-in-idl-attributes:htmlelement><a href=#htmlelement>HTMLElement</a></code>, or an interface that
  descends from <code id=reflecting-content-attributes-in-idl-attributes:htmlelement-2><a href=#htmlelement>HTMLElement</a></code>, then, on getting, it must run the following algorithm
  (stopping at the first point where a value is returned):</p>

  <ol><li>If the corresponding content attribute is absent, then the IDL attribute must return
   null.<li>Let <var>candidate</var> be the element that the <code id=reflecting-content-attributes-in-idl-attributes:dom-document-getelementbyid><a data-x-internal=dom-document-getelementbyid href=https://dom.spec.whatwg.org/#dom-nonelementparentnode-getelementbyid>document.getElementById()</a></code> method would find when
   called on the content attribute's element's <a id=reflecting-content-attributes-in-idl-attributes:node-document-2 href=https://dom.spec.whatwg.org/#concept-node-document data-x-internal=node-document>node document</a> if it were passed as its argument the current value of
   the corresponding content attribute.<li>If <var>candidate</var> is null, or if it is not type-compatible with the IDL
   attribute, then the IDL attribute must return null.<li>Otherwise, it must return <var>candidate</var>.</ol>

  <p>On setting, if the given element has an <code id=reflecting-content-attributes-in-idl-attributes:the-id-attribute><a href=#the-id-attribute>id</a></code> attribute, and has the
  same <a id=reflecting-content-attributes-in-idl-attributes:tree href=https://dom.spec.whatwg.org/#concept-tree data-x-internal=tree>tree</a> as the element of the attribute being set, and the given element is the
  first element in that <a id=reflecting-content-attributes-in-idl-attributes:tree-2 href=https://dom.spec.whatwg.org/#concept-tree data-x-internal=tree>tree</a> whose <a href=https://dom.spec.whatwg.org/#concept-id id=reflecting-content-attributes-in-idl-attributes:concept-id data-x-internal=concept-id>ID</a> is the value of
  that <code id=reflecting-content-attributes-in-idl-attributes:the-id-attribute-2><a href=#the-id-attribute>id</a></code> attribute, then the content attribute must be set to the
  value of that <code id=reflecting-content-attributes-in-idl-attributes:the-id-attribute-3><a href=#the-id-attribute>id</a></code> attribute. Otherwise, the content attribute must be
  set to the empty string.</p>

  



  <h4 id=collections>2.6.2 Collections<a href=#collections class=self-link></a></h4>

  <p>The <code id=collections:htmlformcontrolscollection><a href=#htmlformcontrolscollection>HTMLFormControlsCollection</a></code> and <code id=collections:htmloptionscollection><a href=#htmloptionscollection>HTMLOptionsCollection</a></code> interfaces
  are <a href=https://dom.spec.whatwg.org/#concept-collection id=collections:concept-collection data-x-internal=concept-collection>collections</a> derived from the
  <code id=collections:htmlcollection><a data-x-internal=htmlcollection href=https://dom.spec.whatwg.org/#interface-htmlcollection>HTMLCollection</a></code> interface. The <code id=collections:htmlallcollection><a href=#htmlallcollection>HTMLAllCollection</a></code> interface is a <a href=https://dom.spec.whatwg.org/#concept-collection id=collections:concept-collection-2 data-x-internal=concept-collection>collection</a>, but is not so derived.</p>


  <h5 id=the-htmlallcollection-interface>2.6.2.1 The <code id=the-htmlallcollection-interface:htmlallcollection><a href=#htmlallcollection>HTMLAllCollection</a></code> interface<a href=#the-htmlallcollection-interface class=self-link></a></h5>

  <p>The <code id=the-htmlallcollection-interface:htmlallcollection-2><a href=#htmlallcollection>HTMLAllCollection</a></code> interface is used for the legacy <code id=the-htmlallcollection-interface:dom-document-all><a href=#dom-document-all>document.all</a></code> attribute. It operates similarly to
  <code id=the-htmlallcollection-interface:htmlcollection><a data-x-internal=htmlcollection href=https://dom.spec.whatwg.org/#interface-htmlcollection>HTMLCollection</a></code>; the main differences are that it allows a staggering variety of
  different (ab)uses of its methods to all end up returning something, and that it can be called as
  a function as an alternative to property access.</p>

  <p class=note>All <code id=the-htmlallcollection-interface:htmlallcollection-3><a href=#htmlallcollection>HTMLAllCollection</a></code> objects are rooted at a <code id=the-htmlallcollection-interface:document><a href=#document>Document</a></code>
  and have a filter that matches all elements, so the elements <a id=the-htmlallcollection-interface:represented-by-the-collection href=https://dom.spec.whatwg.org/#represented-by-the-collection data-x-internal=represented-by-the-collection>represented by the
  collection</a> of an <code id=the-htmlallcollection-interface:htmlallcollection-4><a href=#htmlallcollection>HTMLAllCollection</a></code> object consist of all the descendant
  elements of the root <code id=the-htmlallcollection-interface:document-2><a href=#document>Document</a></code>.</p>

  <pre class=idl>[LegacyUnenumerableNamedProperties]
interface <dfn id=htmlallcollection>HTMLAllCollection</dfn> {
  readonly attribute unsigned long <a href=#dom-htmlallcollection-length id=the-htmlallcollection-interface:dom-htmlallcollection-length>length</a>;
  getter <a id=the-htmlallcollection-interface:element href=https://dom.spec.whatwg.org/#interface-element data-x-internal=element>Element</a>? (unsigned long index);
  getter (<a id=the-htmlallcollection-interface:htmlcollection-2 href=https://dom.spec.whatwg.org/#interface-htmlcollection data-x-internal=htmlcollection>HTMLCollection</a> or <a id=the-htmlallcollection-interface:element-2 href=https://dom.spec.whatwg.org/#interface-element data-x-internal=element>Element</a>)? <a href=#dom-htmlallcollection-nameditem id=the-htmlallcollection-interface:dom-htmlallcollection-nameditem>namedItem</a>(DOMString name);
  legacycaller (<a id=the-htmlallcollection-interface:htmlcollection-3 href=https://dom.spec.whatwg.org/#interface-htmlcollection data-x-internal=htmlcollection>HTMLCollection</a> or <a id=the-htmlallcollection-interface:element-3 href=https://dom.spec.whatwg.org/#interface-element data-x-internal=element>Element</a>)? <a href=#dom-htmlallcollection-item id=the-htmlallcollection-interface:dom-htmlallcollection-item>item</a>(optional DOMString nameOrIndex);
};</pre>

  <dl class=domintro><dt><var>collection</var> . <code id=the-htmlallcollection-interface:dom-htmlallcollection-length-2><a href=#dom-htmlallcollection-length>length</a></code><dd>
    <p>Returns the number of elements in the collection.</p>
   <dt><var>element</var> = <var>collection</var> . <code id=the-htmlallcollection-interface:dom-htmlallcollection-item-2><a href=#dom-htmlallcollection-item>item</a></code>(<var>index</var>)<dt><var>element</var> = <var>collection</var>(<var>index</var>)<dt><var>element</var> = <var>collection</var>[<var>index</var>]<dd>
    <p>Returns the item with index <var>index</var> from the collection (determined by <a id=the-htmlallcollection-interface:tree-order href=https://dom.spec.whatwg.org/#concept-tree-order data-x-internal=tree-order>tree order</a>).</p>
   <dt><var>element</var> = <var>collection</var> . <code id=the-htmlallcollection-interface:dom-htmlallcollection-item-3><a href=#dom-htmlallcollection-item>item</a></code>(<var>name</var>)<dt><var>collection</var> = <var>collection</var> . <code id=the-htmlallcollection-interface:dom-htmlallcollection-item-4><a href=#dom-htmlallcollection-item>item</a></code>(<var>name</var>)<dt><var>element</var> = <var>collection</var> . <code id=the-htmlallcollection-interface:dom-htmlallcollection-nameditem-2><a href=#dom-htmlallcollection-nameditem>namedItem</a></code>(<var>name</var>)<dt><var>collection</var> = <var>collection</var> . <code id=the-htmlallcollection-interface:dom-htmlallcollection-nameditem-3><a href=#dom-htmlallcollection-nameditem>namedItem</a></code>(<var>name</var>)<dt><var>element</var> = <var>collection</var>(<var>name</var>)<dt><var>collection</var> = <var>collection</var>(<var>name</var>)<dt><var>element</var> = <var>collection</var>[<var>name</var>]<dt><var>collection</var> = <var>collection</var>[<var>name</var>]<dd>
    <p>Returns the item with <a href=https://dom.spec.whatwg.org/#concept-id id=the-htmlallcollection-interface:concept-id data-x-internal=concept-id>ID</a> or name <var>name</var> from the collection.</p>
    <p>If there are multiple matching items, then an <code id=the-htmlallcollection-interface:htmlcollection-4><a data-x-internal=htmlcollection href=https://dom.spec.whatwg.org/#interface-htmlcollection>HTMLCollection</a></code> object containing all those elements is returned.</p>
    
    <p>Only <code id=the-htmlallcollection-interface:the-button-element><a href=#the-button-element>button</a></code>, <code id=the-htmlallcollection-interface:the-form-element><a href=#the-form-element>form</a></code>, <code id=the-htmlallcollection-interface:the-iframe-element><a href=#the-iframe-element>iframe</a></code>,
    <code id=the-htmlallcollection-interface:the-input-element><a href=#the-input-element>input</a></code>, <code id=the-htmlallcollection-interface:the-map-element><a href=#the-map-element>map</a></code>, <code id=the-htmlallcollection-interface:the-meta-element><a href=#the-meta-element>meta</a></code>, <code id=the-htmlallcollection-interface:the-object-element><a href=#the-object-element>object</a></code>,
    <code id=the-htmlallcollection-interface:the-select-element><a href=#the-select-element>select</a></code>, and <code id=the-htmlallcollection-interface:the-textarea-element><a href=#the-textarea-element>textarea</a></code> elements can have a name for the purpose of this
    method; their name is given by the value of their <code>name</code> attribute.</p>
   </dl>

  

  <p>The object's <a id=the-htmlallcollection-interface:supported-property-indices href=https://heycam.github.io/webidl/#dfn-supported-property-indices data-x-internal=supported-property-indices>supported property indices</a> are as defined for
  <code id=the-htmlallcollection-interface:htmlcollection-5><a data-x-internal=htmlcollection href=https://dom.spec.whatwg.org/#interface-htmlcollection>HTMLCollection</a></code> objects.</p>

  <p>The <a id=the-htmlallcollection-interface:supported-property-names href=https://heycam.github.io/webidl/#dfn-supported-property-names data-x-internal=supported-property-names>supported property names</a> consist of the non-empty values of all the <code id=the-htmlallcollection-interface:the-id-attribute><a href=#the-id-attribute>id</a></code> attributes of all the elements <a id=the-htmlallcollection-interface:represented-by-the-collection-2 href=https://dom.spec.whatwg.org/#represented-by-the-collection data-x-internal=represented-by-the-collection>represented by the
  collection</a>, and the non-empty values of all the <code>name</code> attributes of
  all the <a href=#all-named-elements id=the-htmlallcollection-interface:all-named-elements>"all"-named elements</a> <a id=the-htmlallcollection-interface:represented-by-the-collection-3 href=https://dom.spec.whatwg.org/#represented-by-the-collection data-x-internal=represented-by-the-collection>represented by the collection</a>, in
  <a id=the-htmlallcollection-interface:tree-order-2 href=https://dom.spec.whatwg.org/#concept-tree-order data-x-internal=tree-order>tree order</a>, ignoring later duplicates, with the <code id=the-htmlallcollection-interface:the-id-attribute-2><a href=#the-id-attribute>id</a></code> of
  an element preceding its <code>name</code> if it contributes both, they differ from each
  other, and neither is the duplicate of an earlier entry.</p>

  <p>On getting, the <dfn id=dom-htmlallcollection-length><code>length</code></dfn>
  attribute must return the number of nodes <a id=the-htmlallcollection-interface:represented-by-the-collection-4 href=https://dom.spec.whatwg.org/#represented-by-the-collection data-x-internal=represented-by-the-collection>represented by the collection</a>.</p>

  <p>The indexed property getter must return the result of <a href=#concept-get-all-indexed id=the-htmlallcollection-interface:concept-get-all-indexed>getting the "all"-indexed element</a> from this
  <code id=the-htmlallcollection-interface:htmlallcollection-5><a href=#htmlallcollection>HTMLAllCollection</a></code> given the passed index.</p>

  <p>The <dfn id=dom-htmlallcollection-nameditem><code>namedItem(<var>name</var>)</code></dfn>
  method must return the result of <a href=#concept-get-all-named id=the-htmlallcollection-interface:concept-get-all-named>getting the "all"-named
  element(s)</a> from this <code id=the-htmlallcollection-interface:htmlallcollection-6><a href=#htmlallcollection>HTMLAllCollection</a></code> given <var>name</var>.</p>

  <p>The <dfn id=dom-htmlallcollection-item><code>item(<var>nameOrIndex</var>)</code></dfn>
  method (and the <code>legacycaller</code> behavior) must run the following steps:</p>

  <ol><li><p>If <var>nameOrIndex</var> was not provided, return null.<li><p>If <var>nameOrIndex</var>, <a href=https://heycam.github.io/webidl/#es-type-mapping id=the-htmlallcollection-interface:concept-idl-convert data-x-internal=concept-idl-convert>converted</a> to a
   JavaScript string value, is an <a id=the-htmlallcollection-interface:array-index-property-name href=https://heycam.github.io/webidl/#dfn-array-index-property-name data-x-internal=array-index-property-name>array index property name</a>, return the result of <a href=#concept-get-all-indexed id=the-htmlallcollection-interface:concept-get-all-indexed-2>getting the "all"-indexed element</a> from this
   <code id=the-htmlallcollection-interface:htmlallcollection-7><a href=#htmlallcollection>HTMLAllCollection</a></code> given the number represented by <var>nameOrIndex</var>.<li><p>Return the result of <a href=#concept-get-all-named id=the-htmlallcollection-interface:concept-get-all-named-2>getting the "all"-named
   element(s)</a> from this <code id=the-htmlallcollection-interface:htmlallcollection-8><a href=#htmlallcollection>HTMLAllCollection</a></code> given
   <var>nameOrIndex</var>.</ol>

  <hr>

  
  <p>The following elements are <dfn id=all-named-elements>"all"-named elements</dfn>:
   <code id=the-htmlallcollection-interface:the-a-element><a href=#the-a-element>a</a></code>, 
   <code id=the-htmlallcollection-interface:the-applet-element><a href=#the-applet-element>applet</a></code>,
   <code id=the-htmlallcollection-interface:the-button-element-2><a href=#the-button-element>button</a></code>, 
   <code id=the-htmlallcollection-interface:the-embed-element><a href=#the-embed-element>embed</a></code>,
   <code id=the-htmlallcollection-interface:the-form-element-2><a href=#the-form-element>form</a></code>,
   <code id=the-htmlallcollection-interface:frame><a href=#frame>frame</a></code>,
   <code id=the-htmlallcollection-interface:frameset><a href=#frameset>frameset</a></code>,
   <code id=the-htmlallcollection-interface:the-iframe-element-2><a href=#the-iframe-element>iframe</a></code>, 
   <code id=the-htmlallcollection-interface:the-img-element><a href=#the-img-element>img</a></code>,
   <code id=the-htmlallcollection-interface:the-input-element-2><a href=#the-input-element>input</a></code>,
   
   <code id=the-htmlallcollection-interface:the-map-element-2><a href=#the-map-element>map</a></code>, 
   <code id=the-htmlallcollection-interface:the-meta-element-2><a href=#the-meta-element>meta</a></code>, 
   <code id=the-htmlallcollection-interface:the-object-element-2><a href=#the-object-element>object</a></code>,
   <code id=the-htmlallcollection-interface:the-select-element-2><a href=#the-select-element>select</a></code>, and
   <code id=the-htmlallcollection-interface:the-textarea-element-2><a href=#the-textarea-element>textarea</a></code> 
  </p>

  <p>To <dfn id=concept-get-all-indexed>get the "all"-indexed element</dfn> from an
  <code id=the-htmlallcollection-interface:htmlallcollection-9><a href=#htmlallcollection>HTMLAllCollection</a></code> <var>collection</var> given an index <var>index</var>, return the
  <var>index</var><sup>th</sup> element in <var>collection</var>, or null if there is no such
  <var>index</var><sup>th</sup> element.</p>

  <p>To <dfn id=concept-get-all-named>get the "all"-named element(s)</dfn> from an
  <code id=the-htmlallcollection-interface:htmlallcollection-10><a href=#htmlallcollection>HTMLAllCollection</a></code> <var>collection</var> given a name <var>name</var>, perform the
  following steps:</p>

  <ol><li><p>If <var>name</var> is the empty string, return null.<li>
    <p>Let <var>subCollection</var> be an <code id=the-htmlallcollection-interface:htmlcollection-6><a data-x-internal=htmlcollection href=https://dom.spec.whatwg.org/#interface-htmlcollection>HTMLCollection</a></code> object rooted at the same
    <code id=the-htmlallcollection-interface:document-3><a href=#document>Document</a></code> as <var>collection</var>, whose filter matches only elements that are
    either:</p>

    <ul><li><p><a href=#all-named-elements id=the-htmlallcollection-interface:all-named-elements-2>"all"-named elements</a> with a <code>name</code> attribute equal to
     <var>name</var>, or,<li><p>elements with an <a href=https://dom.spec.whatwg.org/#concept-id id=the-htmlallcollection-interface:concept-id-2 data-x-internal=concept-id>ID</a> equal to <var>name</var>.</ul>
   <li><p>If there is exactly one element in <var>subCollection</var>, then return that
   element.<li><p>Otherwise, if <var>subCollection</var> is empty, return null.<li><p>Otherwise, return <var>subCollection</var>.</ol>

  


  <h5 id=the-htmlformcontrolscollection-interface>2.6.2.2 The <code id=the-htmlformcontrolscollection-interface:htmlformcontrolscollection><a href=#htmlformcontrolscollection>HTMLFormControlsCollection</a></code> interface<a href=#the-htmlformcontrolscollection-interface class=self-link></a></h5>

  <p>The <code id=the-htmlformcontrolscollection-interface:htmlformcontrolscollection-2><a href=#htmlformcontrolscollection>HTMLFormControlsCollection</a></code> interface is used for
  <a href=https://dom.spec.whatwg.org/#concept-collection id=the-htmlformcontrolscollection-interface:concept-collection data-x-internal=concept-collection>collections</a> of <a href=#category-listed id=the-htmlformcontrolscollection-interface:category-listed>listed
  elements</a> in <code id=the-htmlformcontrolscollection-interface:the-form-element><a href=#the-form-element>form</a></code> elements.</p>

  <pre class=idl>interface <dfn id=htmlformcontrolscollection>HTMLFormControlsCollection</dfn> : <a id=the-htmlformcontrolscollection-interface:htmlcollection href=https://dom.spec.whatwg.org/#interface-htmlcollection data-x-internal=htmlcollection>HTMLCollection</a> {
  // inherits <a href=https://dom.spec.whatwg.org/#dom-htmlcollection-length id=the-htmlformcontrolscollection-interface:dom-htmlcollection-length data-x-internal=dom-htmlcollection-length>length</a> and <a href=https://dom.spec.whatwg.org/#dom-htmlcollection-item id=the-htmlformcontrolscollection-interface:dom-htmlcollection-item data-x-internal=dom-htmlcollection-item>item</a>()
  getter (<a href=#radionodelist id=the-htmlformcontrolscollection-interface:radionodelist>RadioNodeList</a> or <a id=the-htmlformcontrolscollection-interface:element href=https://dom.spec.whatwg.org/#interface-element data-x-internal=element>Element</a>)? <a href=#dom-htmlformcontrolscollection-nameditem id=the-htmlformcontrolscollection-interface:dom-htmlformcontrolscollection-nameditem>namedItem</a>(DOMString name); // shadows inherited <a href=https://dom.spec.whatwg.org/#dom-htmlcollection-nameditem id=the-htmlformcontrolscollection-interface:dom-htmlcollection-nameditem data-x-internal=dom-htmlcollection-nameditem>namedItem()</a>
};

interface <dfn id=radionodelist>RadioNodeList</dfn> : <a id=the-htmlformcontrolscollection-interface:nodelist href=https://dom.spec.whatwg.org/#interface-nodelist data-x-internal=nodelist>NodeList</a> {
  attribute DOMString <a href=#dom-radionodelist-value id=the-htmlformcontrolscollection-interface:dom-radionodelist-value>value</a>;
};</pre>

  <dl class=domintro><dt><var>collection</var> . <code id=the-htmlformcontrolscollection-interface:dom-htmlcollection-length-2><a data-x-internal=dom-htmlcollection-length href=https://dom.spec.whatwg.org/#dom-htmlcollection-length>length</a></code><dd>
    <p>Returns the number of elements in the collection.</p>
   <dt><var>element</var> = <var>collection</var> . <code id=the-htmlformcontrolscollection-interface:dom-htmlcollection-item-2><a data-x-internal=dom-htmlcollection-item href=https://dom.spec.whatwg.org/#dom-htmlcollection-item>item</a></code>(<var>index</var>)<dt><var>element</var> = <var>collection</var>[<var>index</var>]<dd>
    <p>Returns the item with index <var>index</var> from the collection. The items are sorted in <a id=the-htmlformcontrolscollection-interface:tree-order href=https://dom.spec.whatwg.org/#concept-tree-order data-x-internal=tree-order>tree order</a>.</p>
   <dt><var>element</var> = <var>collection</var> . <code id=the-htmlformcontrolscollection-interface:dom-htmlformcontrolscollection-nameditem-2><a href=#dom-htmlformcontrolscollection-nameditem>namedItem</a></code>(<var>name</var>)<dt><var>radioNodeList</var> = <var>collection</var> . <code id=the-htmlformcontrolscollection-interface:dom-htmlformcontrolscollection-nameditem-3><a href=#dom-htmlformcontrolscollection-nameditem>namedItem</a></code>(<var>name</var>)<dt><var>element</var> = <var>collection</var>[<var>name</var>]<dt><var>radioNodeList</var> = <var>collection</var>[<var>name</var>]<dd>
    <p>Returns the item with <a href=https://dom.spec.whatwg.org/#concept-id id=the-htmlformcontrolscollection-interface:concept-id data-x-internal=concept-id>ID</a> or <code id=the-htmlformcontrolscollection-interface:attr-fe-name><a href=#attr-fe-name>name</a></code> <var>name</var> from the collection.</p>
    <p>If there are multiple matching items, then a <code id=the-htmlformcontrolscollection-interface:radionodelist-2><a href=#radionodelist>RadioNodeList</a></code> object containing all those elements is returned.</p>
   <dt><var>radioNodeList</var> . <var>value</var> [ = <var>value</var> ]<dd>
    <p>Returns the value of the first checked radio button represented by the object.</p>
    <p>Can be set, to check the first radio button with the given value represented by the object.</p>
   </dl>

  

  <p>The object's <a id=the-htmlformcontrolscollection-interface:supported-property-indices href=https://heycam.github.io/webidl/#dfn-supported-property-indices data-x-internal=supported-property-indices>supported property indices</a> are as defined for
  <code id=the-htmlformcontrolscollection-interface:htmlcollection-2><a data-x-internal=htmlcollection href=https://dom.spec.whatwg.org/#interface-htmlcollection>HTMLCollection</a></code> objects.</p>

  <p>The <a id=the-htmlformcontrolscollection-interface:supported-property-names href=https://heycam.github.io/webidl/#dfn-supported-property-names data-x-internal=supported-property-names>supported property names</a> consist of the non-empty values of all the <code id=the-htmlformcontrolscollection-interface:the-id-attribute><a href=#the-id-attribute>id</a></code> and <code id=the-htmlformcontrolscollection-interface:attr-fe-name-2><a href=#attr-fe-name>name</a></code> attributes of all the
  elements <a id=the-htmlformcontrolscollection-interface:represented-by-the-collection href=https://dom.spec.whatwg.org/#represented-by-the-collection data-x-internal=represented-by-the-collection>represented by the collection</a>, in <a id=the-htmlformcontrolscollection-interface:tree-order-2 href=https://dom.spec.whatwg.org/#concept-tree-order data-x-internal=tree-order>tree order</a>, ignoring later
  duplicates, with the <code id=the-htmlformcontrolscollection-interface:the-id-attribute-2><a href=#the-id-attribute>id</a></code> of an element preceding its <code id=the-htmlformcontrolscollection-interface:attr-fe-name-3><a href=#attr-fe-name>name</a></code> if it contributes both, they differ from each other, and neither is the
  duplicate of an earlier entry.</p>

  <p>The <dfn id=dom-htmlformcontrolscollection-nameditem><code>namedItem(<var>name</var>)</code></dfn> method must act according to the following algorithm:</p>

  <ol><li>If <var>name</var> is the empty string, return null and stop the algorithm.<li>If, at the time the method is called, there is exactly one node in the collection that has
   either an <code id=the-htmlformcontrolscollection-interface:the-id-attribute-3><a href=#the-id-attribute>id</a></code> attribute or a <code id=the-htmlformcontrolscollection-interface:attr-fe-name-4><a href=#attr-fe-name>name</a></code>
   attribute equal to <var>name</var>, then return that node and stop the algorithm.<li>Otherwise, if there are no nodes in the collection that have either an <code id=the-htmlformcontrolscollection-interface:the-id-attribute-4><a href=#the-id-attribute>id</a></code> attribute or a <code id=the-htmlformcontrolscollection-interface:attr-fe-name-5><a href=#attr-fe-name>name</a></code> attribute equal
   to <var>name</var>, then return null and stop the algorithm.<li>Otherwise, create a new <code id=the-htmlformcontrolscollection-interface:radionodelist-3><a href=#radionodelist>RadioNodeList</a></code> object representing a <a href=#live id=the-htmlformcontrolscollection-interface:live>live</a>
   view of the <code id=the-htmlformcontrolscollection-interface:htmlformcontrolscollection-3><a href=#htmlformcontrolscollection>HTMLFormControlsCollection</a></code> object, further filtered so that the only
   nodes in the <code id=the-htmlformcontrolscollection-interface:radionodelist-4><a href=#radionodelist>RadioNodeList</a></code> object are those that have either an <code id=the-htmlformcontrolscollection-interface:the-id-attribute-5><a href=#the-id-attribute>id</a></code> attribute or a <code id=the-htmlformcontrolscollection-interface:attr-fe-name-6><a href=#attr-fe-name>name</a></code> attribute equal
   to <var>name</var>. The nodes in the <code id=the-htmlformcontrolscollection-interface:radionodelist-5><a href=#radionodelist>RadioNodeList</a></code> object must be sorted in
   <a id=the-htmlformcontrolscollection-interface:tree-order-3 href=https://dom.spec.whatwg.org/#concept-tree-order data-x-internal=tree-order>tree order</a>.<li>Return that <code id=the-htmlformcontrolscollection-interface:radionodelist-6><a href=#radionodelist>RadioNodeList</a></code> object.</ol>

  <hr>

  <p>Members of the <code id=the-htmlformcontrolscollection-interface:radionodelist-7><a href=#radionodelist>RadioNodeList</a></code> interface inherited from the <code id=the-htmlformcontrolscollection-interface:nodelist-2><a data-x-internal=nodelist href=https://dom.spec.whatwg.org/#interface-nodelist>NodeList</a></code>
  interface must behave as they would on a <code id=the-htmlformcontrolscollection-interface:nodelist-3><a data-x-internal=nodelist href=https://dom.spec.whatwg.org/#interface-nodelist>NodeList</a></code> object.</p>

  <p>The <dfn id=dom-radionodelist-value><code>value</code></dfn> IDL attribute on the
  <code id=the-htmlformcontrolscollection-interface:radionodelist-8><a href=#radionodelist>RadioNodeList</a></code> object, on getting, must return the value returned by running the
  following steps:</p>

  <ol><li><p>Let <var>element</var> be the first element in <a id=the-htmlformcontrolscollection-interface:tree-order-4 href=https://dom.spec.whatwg.org/#concept-tree-order data-x-internal=tree-order>tree order</a>
   represented by the <code id=the-htmlformcontrolscollection-interface:radionodelist-9><a href=#radionodelist>RadioNodeList</a></code> object that is an <code id=the-htmlformcontrolscollection-interface:the-input-element><a href=#the-input-element>input</a></code> element whose
   <code id=the-htmlformcontrolscollection-interface:attr-input-type><a href=#attr-input-type>type</a></code> attribute is in the <a href="#radio-button-state-(type=radio)" id="the-htmlformcontrolscollection-interface:radio-button-state-(type=radio)">Radio Button</a> state and whose <a href=#concept-fe-checked id=the-htmlformcontrolscollection-interface:concept-fe-checked>checkedness</a> is true. Otherwise, let it be null.<li><p>If <var>element</var> is null, return the empty string.<li><p>If <var>element</var> is an element with no <code id=the-htmlformcontrolscollection-interface:attr-input-value><a href=#attr-input-value>value</a></code> attribute, return the string "<code>on</code>".<li><p>Otherwise, return the value of <var>element</var>'s <code id=the-htmlformcontrolscollection-interface:attr-input-value-2><a href=#attr-input-value>value</a></code> attribute.</ol>

  <p>On setting, the <code id=the-htmlformcontrolscollection-interface:dom-radionodelist-value-2><a href=#dom-radionodelist-value>value</a></code> IDL attribute must run the
  following steps:</p>

  <ol><li><p>If the new value is the string "<code>on</code>": let <var>element</var> be the first element in <a id=the-htmlformcontrolscollection-interface:tree-order-5 href=https://dom.spec.whatwg.org/#concept-tree-order data-x-internal=tree-order>tree order</a>
   represented by the <code id=the-htmlformcontrolscollection-interface:radionodelist-10><a href=#radionodelist>RadioNodeList</a></code> object that is an <code id=the-htmlformcontrolscollection-interface:the-input-element-2><a href=#the-input-element>input</a></code> element whose
   <code id=the-htmlformcontrolscollection-interface:attr-input-type-2><a href=#attr-input-type>type</a></code> attribute is in the <a href="#radio-button-state-(type=radio)" id="the-htmlformcontrolscollection-interface:radio-button-state-(type=radio)-2">Radio Button</a> state and whose <code id=the-htmlformcontrolscollection-interface:attr-input-value-3><a href=#attr-input-value>value</a></code> content attribute is either absent, or present and equal to the new value, if any. If no such element exists, then instead let <var>element</var> be null.</p>

   <p>Otherwise: let <var>element</var> be the first element in <a id=the-htmlformcontrolscollection-interface:tree-order-6 href=https://dom.spec.whatwg.org/#concept-tree-order data-x-internal=tree-order>tree order</a>
   represented by the <code id=the-htmlformcontrolscollection-interface:radionodelist-11><a href=#radionodelist>RadioNodeList</a></code> object that is an <code id=the-htmlformcontrolscollection-interface:the-input-element-3><a href=#the-input-element>input</a></code> element whose
   <code id=the-htmlformcontrolscollection-interface:attr-input-type-3><a href=#attr-input-type>type</a></code> attribute is in the <a href="#radio-button-state-(type=radio)" id="the-htmlformcontrolscollection-interface:radio-button-state-(type=radio)-3">Radio Button</a> state and whose <code id=the-htmlformcontrolscollection-interface:attr-input-value-4><a href=#attr-input-value>value</a></code> content attribute is present and equal to the new value, if
   any. If no such element exists, then instead let <var>element</var> be null.<li><p>If <var>element</var> is not null, then set its <a href=#concept-fe-checked id=the-htmlformcontrolscollection-interface:concept-fe-checked-2>checkedness</a> to true.</p>

  </ol>



  


  <h5 id=the-htmloptionscollection-interface>2.6.2.3 The <code id=the-htmloptionscollection-interface:htmloptionscollection><a href=#htmloptionscollection>HTMLOptionsCollection</a></code> interface<a href=#the-htmloptionscollection-interface class=self-link></a></h5>

  <p>The <code id=the-htmloptionscollection-interface:htmloptionscollection-2><a href=#htmloptionscollection>HTMLOptionsCollection</a></code> interface is used for <a href=https://dom.spec.whatwg.org/#concept-collection id=the-htmloptionscollection-interface:concept-collection data-x-internal=concept-collection>collections</a> of <code id=the-htmloptionscollection-interface:the-option-element><a href=#the-option-element>option</a></code> elements. It is always
  rooted on a <code id=the-htmloptionscollection-interface:the-select-element><a href=#the-select-element>select</a></code> element and has attributes and methods that manipulate that
  element's descendants.</p>

  <pre class=idl>interface <dfn id=htmloptionscollection>HTMLOptionsCollection</dfn> : <a id=the-htmloptionscollection-interface:htmlcollection href=https://dom.spec.whatwg.org/#interface-htmlcollection data-x-internal=htmlcollection>HTMLCollection</a> {
  // inherits <a href=https://dom.spec.whatwg.org/#dom-htmlcollection-item id=the-htmloptionscollection-interface:dom-htmlcollection-item data-x-internal=dom-htmlcollection-item>item</a>(), <a href=https://dom.spec.whatwg.org/#dom-htmlcollection-nameditem id=the-htmloptionscollection-interface:dom-htmlcollection-nameditem data-x-internal=dom-htmlcollection-nameditem>namedItem</a>()
  [<a href=#cereactions id=the-htmloptionscollection-interface:cereactions>CEReactions</a>] attribute unsigned long <a href=#dom-htmloptionscollection-length id=the-htmloptionscollection-interface:dom-htmloptionscollection-length>length</a>; // shadows inherited <a href=https://dom.spec.whatwg.org/#dom-htmlcollection-length id=the-htmloptionscollection-interface:dom-htmlcollection-length data-x-internal=dom-htmlcollection-length>length</a>
  [<a href=#cereactions id=the-htmloptionscollection-interface:cereactions-2>CEReactions</a>] <a href=#dom-htmloptionscollection-setter>setter</a> void (unsigned long index, <a href=#htmloptionelement id=the-htmloptionscollection-interface:htmloptionelement>HTMLOptionElement</a>? option);
  [<a href=#cereactions id=the-htmloptionscollection-interface:cereactions-3>CEReactions</a>] void <a href=#dom-htmloptionscollection-add id=the-htmloptionscollection-interface:dom-htmloptionscollection-add>add</a>((<a href=#htmloptionelement id=the-htmloptionscollection-interface:htmloptionelement-2>HTMLOptionElement</a> or <a href=#htmloptgroupelement id=the-htmloptionscollection-interface:htmloptgroupelement>HTMLOptGroupElement</a>) element, optional (<a href=#htmlelement id=the-htmloptionscollection-interface:htmlelement>HTMLElement</a> or long)? before = null);
  [<a href=#cereactions id=the-htmloptionscollection-interface:cereactions-4>CEReactions</a>] void <a href=#dom-htmloptionscollection-remove id=the-htmloptionscollection-interface:dom-htmloptionscollection-remove>remove</a>(long index);
  attribute long <a href=#dom-htmloptionscollection-selectedindex id=the-htmloptionscollection-interface:dom-htmloptionscollection-selectedindex>selectedIndex</a>;
};</pre>

  <dl class=domintro><dt><var>collection</var> . <code id=the-htmloptionscollection-interface:dom-htmloptionscollection-length-2><a href=#dom-htmloptionscollection-length>length</a></code> [ = <var>value</var> ]<dd>
    <p>Returns the number of elements in the collection.</p>
    <p>When set to a smaller number, truncates the number of <code id=the-htmloptionscollection-interface:the-option-element-2><a href=#the-option-element>option</a></code> elements in the corresponding container.</p>
    <p>When set to a greater number, adds new blank <code id=the-htmloptionscollection-interface:the-option-element-3><a href=#the-option-element>option</a></code> elements to that container.</p>
   <dt><var>element</var> = <var>collection</var> . <code id=the-htmloptionscollection-interface:dom-htmlcollection-item-2><a data-x-internal=dom-htmlcollection-item href=https://dom.spec.whatwg.org/#dom-htmlcollection-item>item</a></code>(<var>index</var>)<dt><var>element</var> = <var>collection</var>[<var>index</var>]<dd>
    <p>Returns the item with index <var>index</var> from the collection. The items are sorted in <a id=the-htmloptionscollection-interface:tree-order href=https://dom.spec.whatwg.org/#concept-tree-order data-x-internal=tree-order>tree order</a>.</p>
   <dt><var>collection</var>[<var>index</var>] = <var>element</var><dd>
    <p>When <var>index</var> is a greater number than the number of items in the collection, adds
    new blank <code id=the-htmloptionscollection-interface:the-option-element-4><a href=#the-option-element>option</a></code> elements in the corresponding container.
    <p>When set to null, removes the item at index <var>index</var> from the collection.</p>
    <p>When set to an <code id=the-htmloptionscollection-interface:the-option-element-5><a href=#the-option-element>option</a></code> element, adds or replaces it at index <var>index</var>
    from the collection.</p>
   <dt><var>element</var> = <var>collection</var> . <code id=the-htmloptionscollection-interface:dom-htmlcollection-nameditem-2><a data-x-internal=dom-htmlcollection-nameditem href=https://dom.spec.whatwg.org/#dom-htmlcollection-nameditem>namedItem</a></code>(<var>name</var>)<dt><var>element</var> = <var>collection</var>[<var>name</var>]<dd>
    <p>Returns the item with <a href=https://dom.spec.whatwg.org/#concept-id id=the-htmloptionscollection-interface:concept-id data-x-internal=concept-id>ID</a> or <code id=the-htmloptionscollection-interface:attr-option-name><a href=#attr-option-name>name</a></code> <var>name</var> from the collection.</p>
    <p>If there are multiple matching items, then the first is returned.</p>
   <dt><var>collection</var> . <code id=the-htmloptionscollection-interface:dom-htmloptionscollection-add-2><a href=#dom-htmloptionscollection-add>add</a></code>(<var>element</var> [, <var>before</var> ] )<dd>
    <p>Inserts <var>element</var> before the node given by <var>before</var>.</p>
    <p>The <var>before</var> argument can be a number, in which case <var>element</var> is inserted before the item with that number, or an element from the
    collection, in which case <var>element</var> is inserted before that element.</p>
    <p>If <var>before</var> is omitted, null, or a number out of range, then <var>element</var> will be added at the end of the list.</p>
    <p>This method will throw a <a id=the-htmloptionscollection-interface:hierarchyrequesterror href=https://heycam.github.io/webidl/#hierarchyrequesterror data-x-internal=hierarchyrequesterror>"<code>HierarchyRequestError</code>"</a> <code id=the-htmloptionscollection-interface:domexception><a data-x-internal=domexception href=https://heycam.github.io/webidl/#dfn-DOMException>DOMException</a></code> if
    <var>element</var> is an ancestor of the element into which it is to be inserted.</p>
   <dt><var>collection</var> . <code id=the-htmloptionscollection-interface:dom-htmloptionscollection-remove-2><a href=#dom-htmloptionscollection-remove>remove</a></code>(<var>index</var>)<dd>
    <p>Removes the item with index <var>index</var> from the collection.</p>
   <dt><var>collection</var> . <code id=the-htmloptionscollection-interface:dom-htmloptionscollection-selectedindex-2><a href=#dom-htmloptionscollection-selectedindex>selectedIndex</a></code> [ = <var>value</var> ]<dd>

    <p>Returns the index of the first selected item, if any, or −1 if there is no selected
    item.</p>

    <p>Can be set, to change the selection.</p>

   </dl>

  

  <p>The object's <a id=the-htmloptionscollection-interface:supported-property-indices href=https://heycam.github.io/webidl/#dfn-supported-property-indices data-x-internal=supported-property-indices>supported property indices</a> are as defined for
  <code id=the-htmloptionscollection-interface:htmlcollection-2><a data-x-internal=htmlcollection href=https://dom.spec.whatwg.org/#interface-htmlcollection>HTMLCollection</a></code> objects.</p>

  <p>On getting, the <dfn id=dom-htmloptionscollection-length><code>length</code></dfn>
  attribute must return the number of nodes <a id=the-htmloptionscollection-interface:represented-by-the-collection href=https://dom.spec.whatwg.org/#represented-by-the-collection data-x-internal=represented-by-the-collection>represented by the collection</a>.</p>

  <p>On setting, the behavior depends on whether the new value is equal to, greater than, or less
  than the number of nodes <a id=the-htmloptionscollection-interface:represented-by-the-collection-2 href=https://dom.spec.whatwg.org/#represented-by-the-collection data-x-internal=represented-by-the-collection>represented by the collection</a> at that time. If the number is
  the same, then setting the attribute must do nothing. If the new value is greater, then <var>n</var> new <code id=the-htmloptionscollection-interface:the-option-element-6><a href=#the-option-element>option</a></code> elements with no attributes and no child nodes must be
  appended to the <code id=the-htmloptionscollection-interface:the-select-element-2><a href=#the-select-element>select</a></code> element on which the <code id=the-htmloptionscollection-interface:htmloptionscollection-3><a href=#htmloptionscollection>HTMLOptionsCollection</a></code> is
  rooted, where <var>n</var> is the difference between the two numbers (new value minus old
  value). Mutation events must be fired as if a <code id=the-htmloptionscollection-interface:documentfragment><a data-x-internal=documentfragment href=https://dom.spec.whatwg.org/#interface-documentfragment>DocumentFragment</a></code> containing the new
  <code id=the-htmloptionscollection-interface:the-option-element-7><a href=#the-option-element>option</a></code> elements had been inserted. If the new value is lower, then the last <var>n</var> nodes in the collection must be removed from their parent nodes, where <var>n</var> is the difference between the two numbers (old value minus new value).</p>

  <p class=note>Setting <code id=the-htmloptionscollection-interface:dom-htmloptionscollection-length-3><a href=#dom-htmloptionscollection-length>length</a></code> never removes
  or adds any <code id=the-htmloptionscollection-interface:the-optgroup-element><a href=#the-optgroup-element>optgroup</a></code> elements, and never adds new children to existing
  <code id=the-htmloptionscollection-interface:the-optgroup-element-2><a href=#the-optgroup-element>optgroup</a></code> elements (though it can remove children from them).</p>

  <p>The <a id=the-htmloptionscollection-interface:supported-property-names href=https://heycam.github.io/webidl/#dfn-supported-property-names data-x-internal=supported-property-names>supported property names</a> consist of the non-empty values of all the <code id=the-htmloptionscollection-interface:the-id-attribute><a href=#the-id-attribute>id</a></code> and <code id=the-htmloptionscollection-interface:attr-option-name-2><a href=#attr-option-name>name</a></code> attributes of all the
  elements <a id=the-htmloptionscollection-interface:represented-by-the-collection-3 href=https://dom.spec.whatwg.org/#represented-by-the-collection data-x-internal=represented-by-the-collection>represented by the collection</a>, in <a id=the-htmloptionscollection-interface:tree-order-2 href=https://dom.spec.whatwg.org/#concept-tree-order data-x-internal=tree-order>tree order</a>, ignoring later
  duplicates, with the <code id=the-htmloptionscollection-interface:the-id-attribute-2><a href=#the-id-attribute>id</a></code> of an element preceding its <code id=the-htmloptionscollection-interface:attr-option-name-3><a href=#attr-option-name>name</a></code> if it contributes both, they differ from each other, and neither is
  the duplicate of an earlier entry.</p>

  <p id=dom-htmloptionscollection-setter>When the user agent is to <a id=the-htmloptionscollection-interface:set-the-value-of-a-new-indexed-property href=https://heycam.github.io/webidl/#dfn-set-the-value-of-a-new-indexed-property data-x-internal=set-the-value-of-a-new-indexed-property>set the value of a new
  indexed property</a> or <a id=the-htmloptionscollection-interface:set-the-value-of-an-existing-indexed-property href=https://heycam.github.io/webidl/#dfn-set-the-value-of-an-existing-indexed-property data-x-internal=set-the-value-of-an-existing-indexed-property>set the value of an existing indexed property</a> for a given
  property index <var>index</var> to a new value <var>value</var>, it must run the following
  algorithm:</p>

  <ol><li><p>If <var>value</var> is null, invoke the steps for the <code id=the-htmloptionscollection-interface:dom-htmloptionscollection-remove-3><a href=#dom-htmloptionscollection-remove>remove</a></code> method with <var>index</var> as
   the argument, and abort these steps.<li><p>Let <var>length</var> be the number of nodes <a id=the-htmloptionscollection-interface:represented-by-the-collection-4 href=https://dom.spec.whatwg.org/#represented-by-the-collection data-x-internal=represented-by-the-collection>represented by the
   collection</a>.<li><p>Let <var>n</var> be <var>index</var> minus <var>length</var>.<li><p>If <var>n</var> is greater than zero, then <a href=https://dom.spec.whatwg.org/#concept-node-append id=the-htmloptionscollection-interface:concept-node-append data-x-internal=concept-node-append>append</a> a <code id=the-htmloptionscollection-interface:documentfragment-2><a data-x-internal=documentfragment href=https://dom.spec.whatwg.org/#interface-documentfragment>DocumentFragment</a></code> consisting of <span><var>n</var>-1</span> new <code id=the-htmloptionscollection-interface:the-option-element-8><a href=#the-option-element>option</a></code> elements with no attributes and
   no child nodes to the <code id=the-htmloptionscollection-interface:the-select-element-3><a href=#the-select-element>select</a></code> element on which the <code id=the-htmloptionscollection-interface:htmloptionscollection-4><a href=#htmloptionscollection>HTMLOptionsCollection</a></code>
   is rooted.<li><p>If <var>n</var> is greater than or equal to zero, <a href=https://dom.spec.whatwg.org/#concept-node-append id=the-htmloptionscollection-interface:concept-node-append-2 data-x-internal=concept-node-append>append</a> <var>value</var> to the <code id=the-htmloptionscollection-interface:the-select-element-4><a href=#the-select-element>select</a></code>
   element. Otherwise, <a href=https://dom.spec.whatwg.org/#concept-node-replace id=the-htmloptionscollection-interface:concept-node-replace data-x-internal=concept-node-replace>replace</a> the <var>index</var>th element in the collection by <var>value</var>.</ol>

  <p>The <dfn id=dom-htmloptionscollection-add><code>add(<var>element</var>, <var>before</var>)</code></dfn> method must act according to the following algorithm:</p>

  <ol><li><p>If <var>element</var> is an ancestor of the <code id=the-htmloptionscollection-interface:the-select-element-5><a href=#the-select-element>select</a></code> element on which
   the <code id=the-htmloptionscollection-interface:htmloptionscollection-5><a href=#htmloptionscollection>HTMLOptionsCollection</a></code> is rooted, then throw a
   <a id=the-htmloptionscollection-interface:hierarchyrequesterror-2 href=https://heycam.github.io/webidl/#hierarchyrequesterror data-x-internal=hierarchyrequesterror>"<code>HierarchyRequestError</code>"</a> <code id=the-htmloptionscollection-interface:domexception-2><a data-x-internal=domexception href=https://heycam.github.io/webidl/#dfn-DOMException>DOMException</a></code> and abort these
   steps.<li><p>If <var>before</var> is an element, but that element isn't a descendant of the
   <code id=the-htmloptionscollection-interface:the-select-element-6><a href=#the-select-element>select</a></code> element on which the <code id=the-htmloptionscollection-interface:htmloptionscollection-6><a href=#htmloptionscollection>HTMLOptionsCollection</a></code> is rooted, then throw
   a <a id=the-htmloptionscollection-interface:notfounderror href=https://heycam.github.io/webidl/#notfounderror data-x-internal=notfounderror>"<code>NotFoundError</code>"</a> <code id=the-htmloptionscollection-interface:domexception-3><a data-x-internal=domexception href=https://heycam.github.io/webidl/#dfn-DOMException>DOMException</a></code> and abort these
   steps.<li><p>If <var>element</var> and <var>before</var> are the same element, then
   return and abort these steps.<li><p>If <var>before</var> is a node, then let <var>reference</var> be that
   node. Otherwise, if <var>before</var> is an integer, and there is a <var>before</var>th node in the collection, let <var>reference</var> be that node.
   Otherwise, let <var>reference</var> be null.<li><p>If <var>reference</var> is not null, let <var>parent</var> be the parent
   node of <var>reference</var>. Otherwise, let <var>parent</var> be the
   <code id=the-htmloptionscollection-interface:the-select-element-7><a href=#the-select-element>select</a></code> element on which the <code id=the-htmloptionscollection-interface:htmloptionscollection-7><a href=#htmloptionscollection>HTMLOptionsCollection</a></code> is rooted.<li><p><a id=the-htmloptionscollection-interface:pre-insert href=https://dom.spec.whatwg.org/#concept-node-pre-insert data-x-internal=pre-insert>Pre-insert</a> <var>element</var> into <var>parent</var> node before
   <var>reference</var>.</p>

  </ol>

  <p>The <dfn id=dom-htmloptionscollection-remove><code>remove(<var>index</var>)</code></dfn> method must act according to the following algorithm:</p>

  <ol><li><p>If the number of nodes <a id=the-htmloptionscollection-interface:represented-by-the-collection-5 href=https://dom.spec.whatwg.org/#represented-by-the-collection data-x-internal=represented-by-the-collection>represented by the collection</a> is zero, abort these
   steps.<li><p>If <var>index</var> is not a number greater than or equal to 0 and less than the
   number of nodes <a id=the-htmloptionscollection-interface:represented-by-the-collection-6 href=https://dom.spec.whatwg.org/#represented-by-the-collection data-x-internal=represented-by-the-collection>represented by the collection</a>, abort these steps.<li><p>Let <var>element</var> be the <var>index</var>th element in the
   collection.<li><p>Remove <var>element</var> from its parent node.</ol>

  <p>The <dfn id=dom-htmloptionscollection-selectedindex><code>selectedIndex</code></dfn> IDL
  attribute must act like the identically named attribute on the <code id=the-htmloptionscollection-interface:the-select-element-8><a href=#the-select-element>select</a></code> element on
  which the <code id=the-htmloptionscollection-interface:htmloptionscollection-8><a href=#htmloptionscollection>HTMLOptionsCollection</a></code> is rooted</p>

  

  


  <h4 id=the-domstringlist-interface>2.6.3 The <code id=the-domstringlist-interface:domstringlist><a href=#domstringlist>DOMStringList</a></code> interface<a href=#the-domstringlist-interface class=self-link></a></h4>

  <p>The <code id=the-domstringlist-interface:domstringlist-2><a href=#domstringlist>DOMStringList</a></code> interface is a non-fashionable retro way of representing a list
  of strings.</p>

  <pre class=idl>[Exposed=(Window,Worker)]
interface <dfn id=domstringlist>DOMStringList</dfn> {
  readonly attribute unsigned long <a href=#dom-domstringlist-length id=the-domstringlist-interface:dom-domstringlist-length>length</a>;
  getter DOMString? <a href=#dom-domstringlist-item id=the-domstringlist-interface:dom-domstringlist-item>item</a>(unsigned long index);
  boolean <a href=#dom-domstringlist-contains id=the-domstringlist-interface:dom-domstringlist-contains>contains</a>(DOMString string);
};</pre>

  <p class=warning>New APIs must use <code>sequence&lt;DOMString></code> or
  equivalent rather than <code id=the-domstringlist-interface:domstringlist-3><a href=#domstringlist>DOMStringList</a></code>.</p>

  <dl class=domintro><dt><var>strings</var> . <code id=the-domstringlist-interface:dom-domstringlist-length-2><a href=#dom-domstringlist-length>length</a></code><dd><p>Returns the number of strings in <var>strings</var>.<dt><var>strings</var>[<var>index</var>]<dt><var>strings</var> . <code id=the-domstringlist-interface:dom-domstringlist-item-2><a href=#dom-domstringlist-item>item</a></code>(<var>index</var>)<dd><p>Returns the string with index <var>index</var> from <var>strings</var>.<dt><var>strings</var> . <code id=the-domstringlist-interface:dom-domstringlist-contains-2><a href=#dom-domstringlist-contains>contains</a></code>(<var>string</var>)<dd><p>Returns true if <var>strings</var> contains <var>string</var>, and false
   otherwise.</dl>

  

  <p>Each <code id=the-domstringlist-interface:domstringlist-4><a href=#domstringlist>DOMStringList</a></code> object has an associated <a id=the-domstringlist-interface:list href=https://infra.spec.whatwg.org/#list data-x-internal=list>list</a>.</p>

  <p>The <a id=the-domstringlist-interface:supported-property-indices href=https://heycam.github.io/webidl/#dfn-supported-property-indices data-x-internal=supported-property-indices>supported property indices</a> for a <code id=the-domstringlist-interface:domstringlist-5><a href=#domstringlist>DOMStringList</a></code> object are the
  numbers zero to the associated list's <a href=https://infra.spec.whatwg.org/#list-size id=the-domstringlist-interface:list-size data-x-internal=list-size>size</a> minus one. If its
  associated list <a href=https://infra.spec.whatwg.org/#list-is-empty id=the-domstringlist-interface:list-is-empty data-x-internal=list-is-empty>is empty</a>, it has no <a id=the-domstringlist-interface:supported-property-indices-2 href=https://heycam.github.io/webidl/#dfn-supported-property-indices data-x-internal=supported-property-indices>supported property
  indices</a>.</p>

  <p>The <dfn id=dom-domstringlist-length><code>length</code></dfn> attribute's getter must
  this <code id=the-domstringlist-interface:domstringlist-6><a href=#domstringlist>DOMStringList</a></code> object's associated list's <a href=https://infra.spec.whatwg.org/#list-size id=the-domstringlist-interface:list-size-2 data-x-internal=list-size>size</a>.</p>

  <p>The <dfn id=dom-domstringlist-item><code>item(<var>index</var>)</code></dfn> method, when
  invoked, must return the <var>index</var>th item in this <code id=the-domstringlist-interface:domstringlist-7><a href=#domstringlist>DOMStringList</a></code> object's
  associated list, or null if <var>index</var> plus one is less than this <code id=the-domstringlist-interface:domstringlist-8><a href=#domstringlist>DOMStringList</a></code>
  object's associated list's <a href=https://infra.spec.whatwg.org/#list-size id=the-domstringlist-interface:list-size-3 data-x-internal=list-size>size</a>.</p>

  <p>The <dfn id=dom-domstringlist-contains><code>contains(<var>string</var>)</code></dfn>
  method, when invoked, must return true if this <code id=the-domstringlist-interface:domstringlist-9><a href=#domstringlist>DOMStringList</a></code> object's associated list
  <a href=https://infra.spec.whatwg.org/#list-contains id=the-domstringlist-interface:list-contains data-x-internal=list-contains>contains</a> <var>string</var>, and false otherwise.</p>

  


  

  <h4 id=garbage-collection>2.6.4 Garbage collection<a href=#garbage-collection class=self-link></a></h4>

  <p>There is an <dfn id=implied-strong-reference>implied strong reference</dfn> from any IDL attribute that returns a
  pre-existing object to that object.</p>

  <div class=example>

   <p>For example, the <code id=garbage-collection:dom-document-2><a href=#dom-document-2>window.document</a></code> attribute means that there
   is a strong reference from a <code id=garbage-collection:window><a href=#window>Window</a></code> object to its <code id=garbage-collection:document><a href=#document>Document</a></code> object.
   Similarly, there is always a strong reference from a <code id=garbage-collection:document-2><a href=#document>Document</a></code> to any
   descendant nodes, and from any node to its <a id=garbage-collection:node-document href=https://dom.spec.whatwg.org/#concept-node-document data-x-internal=node-document>node document</a>.</p>

  </div>

  


  

  <h3 id=safe-passing-of-structured-data>2.7 Safe passing of structured data<a href=#safe-passing-of-structured-data class=self-link></a></h3>

  <p>This section uses the terminology and typographic conventions from the JavaScript
  specification. <a href=#refsJAVASCRIPT>[JAVASCRIPT]</a></p>

  <h4 id=cloneable-objects>2.7.1 <dfn>Cloneable objects</dfn><a href=#cloneable-objects class=self-link></a></h4>

  <p><a href=#cloneable-objects id=cloneable-objects:cloneable-objects>Cloneable objects</a> support being cloned across <a href=#event-loop id=cloneable-objects:event-loop>event
  loops</a>. That is, they support being cloned across document and worker boundaries, including
  across documents of different <a href=#concept-origin id=cloneable-objects:concept-origin>origins</a>. Not all objects are
  <a href=#cloneable-objects id=cloneable-objects:cloneable-objects-2>cloneable objects</a> and not all aspects of objects that are <a href=#cloneable-objects id=cloneable-objects:cloneable-objects-3>cloneable
  objects</a> are necessarily preserved when cloned.</p>

  <p><a href=https://heycam.github.io/webidl/#dfn-platform-object id=cloneable-objects:platform-object data-x-internal=platform-object>Platform objects</a> have the following internal method:</p>

  <p><dfn id=clone-() data-dfn-type=method data-dfn-for="platform object" data-lt=[[Clone]]() data-export="">[[Clone]] ( <var>targetRealm</var>, <var>memory</var> )</dfn></p>

  

  <p>Unless specified otherwise, invoking the <a href=#clone-() id=cloneable-objects:clone-()>[[Clone]]()</a> internal method must throw a
  <a id=cloneable-objects:datacloneerror href=https://heycam.github.io/webidl/#datacloneerror data-x-internal=datacloneerror>"<code>DataCloneError</code>"</a> <code id=cloneable-objects:domexception><a data-x-internal=domexception href=https://heycam.github.io/webidl/#dfn-DOMException>DOMException</a></code>. (By default, <a href=https://heycam.github.io/webidl/#dfn-platform-object id=cloneable-objects:platform-object-2 data-x-internal=platform-object>platform objects</a> are not <a href=#cloneable-objects id=cloneable-objects:cloneable-objects-4>cloneable objects</a>.)</p>

  <p><a href=https://heycam.github.io/webidl/#dfn-platform-object id=cloneable-objects:platform-object-3 data-x-internal=platform-object>Platform objects</a> that are <a href=#cloneable-objects id=cloneable-objects:cloneable-objects-5>cloneable objects</a>
  have a <a href=#clone-() id=cloneable-objects:clone-()-2>[[Clone]]()</a> internal method which is specified to run a series of steps. The
  result of running those steps must be a thrown exception or a clone of <b>this</b>, created in
  <var>targetRealm</var>. It is up such objects to define what cloning means for them.</p>

  <p>Objects defined in the JavaScript specification are handled by the <a href=#structuredclone id=cloneable-objects:structuredclone>StructuredClone</a>
  abstract operation directly.</p>

  <h4 id=transferable-objects data-lt="transferable object" data-export="">2.7.2 <dfn>Transferable objects</dfn><a href=#transferable-objects class=self-link></a></h4>

  <p><a href=#transferable-objects id=transferable-objects:transferable-objects>Transferable objects</a> support being transferred across <a href=#event-loop id=transferable-objects:event-loop>event loops</a>. Transferring is effectively recreating the object while sharing a
  reference to the underlying data and then detaching the object being transferred. This is useful
  to transfer ownership of expensive resources. Not all objects are <a href=#transferable-objects id=transferable-objects:transferable-objects-2>transferable
  objects</a> and not all aspects of objects that are <a href=#transferable-objects id=transferable-objects:transferable-objects-3>transferable objects</a> are
  necessarily preserved when transferred.</p>

  <p class=note>Transferring is an irreversible and non-idempotent operation. Once an object has
  been transferred, it cannot be transferred, or indeed used, again.</p>

  <p><a href=https://heycam.github.io/webidl/#dfn-platform-object id=transferable-objects:platform-object data-x-internal=platform-object>Platform objects</a> that are <a href=#transferable-objects id=transferable-objects:transferable-objects-4>transferable
  objects</a> have a <dfn data-dfn-for="platform object" id=detached data-dfn-type=attribute data-export="">[[Detached]]</dfn> internal slot and the following internal method:</p>

  <p><dfn id=transfer-() data-dfn-type=method data-dfn-for="platform
  object" data-lt=[[Transfer]]() data-export="">[[Transfer]]( <var>targetRealm</var> )</dfn></p>
  

  <p class=note>Whereas all <a href=https://heycam.github.io/webidl/#dfn-platform-object id=transferable-objects:platform-object-2 data-x-internal=platform-object>platform objects</a> have a
  <a href=#clone-() id=transferable-objects:clone-()>[[Clone]]()</a> internal method, not all have a <a href=#detached id=transferable-objects:detached>[[Detached]]</a> internal slot
  and a <a href=#transfer-() id=transferable-objects:transfer-()>[[Transfer]]()</a> internal method.</p>

  <p><a href=https://heycam.github.io/webidl/#dfn-platform-object id=transferable-objects:platform-object-3 data-x-internal=platform-object>Platform objects</a> that are <a href=#transferable-objects id=transferable-objects:transferable-objects-5>transferable
  objects</a> must define the <a href=#transfer-() id=transferable-objects:transfer-()-2>[[Transfer]]()</a> internal method such that it either
  throws an exception or returns a clone of <b>this</b>, created in <var>targetRealm</var>, with
  <b>this</b>'s underlying data shared with the return value, and <b>this</b>'s
  <a href=#detached id=transferable-objects:detached-2>[[Detached]]</a> internal slot value set to true. It is up to such objects to define what
  transferring means for them.</p>

  <p>Objects defined in the JavaScript specification are handled by the
  <a href=#structuredclonewithtransfer id=transferable-objects:structuredclonewithtransfer>StructuredCloneWithTransfer</a> abstract operation directly. (Technically, by
  <a href=#istransferable id=transferable-objects:istransferable>IsTransferable</a> and <a href=#transfer-abstract-op id=transferable-objects:transfer-abstract-op>Transfer</a>.)</p>

  <h4 id=structuredclonewithtransfer data-dfn-type=abstract-op data-lt=StructuredCloneWithTransfer data-export="">2.7.3 <dfn>StructuredCloneWithTransfer</dfn> ( <var>input</var>,
  <var>transferList</var>, <var>targetRealm</var> )<a href=#structuredclonewithtransfer class=self-link></a></h4>

  <ol><li>
    <p>Let <var>memory</var> be an empty map.</p>

    <p class=note>The purpose of the <var>memory</var> map, both here and in the
    <a href=#structuredclone id=structuredclonewithtransfer:structuredclone>StructuredClone</a> abstract operation, is to avoid cloning objects twice. This ends up
    preserving cycles and the identity of duplicate objects in graphs.</p>
   <li>
    <p>For each object <var>transferable</var> in <var>transferList</var>:

    <ol><li><p>If <a href=#istransferable id=structuredclonewithtransfer:istransferable>IsTransferable</a>(<var>transferable</var>) is false, then throw a
     <a id=structuredclonewithtransfer:datacloneerror href=https://heycam.github.io/webidl/#datacloneerror data-x-internal=datacloneerror>"<code>DataCloneError</code>"</a> <code id=structuredclonewithtransfer:domexception><a data-x-internal=domexception href=https://heycam.github.io/webidl/#dfn-DOMException>DOMException</a></code>.<li><p>Let <var>placeholder</var> be a user-agent-defined placeholder object.<li><p>Create an entry in <var>memory</var> with key <var>transferable</var> and value
     <var>placeholder</var>.</ol>
   <li><p>Let <var>clone</var> be the result of ?
   <a href=#structuredclone id=structuredclonewithtransfer:structuredclone-2>StructuredClone</a>(<var>input</var>, <var>targetRealm</var>,
   <var>memory</var>).<li><p>Let <var>outputTransferList</var> be a new empty <a href=https://tc39.github.io/ecma262/#sec-list-and-record-specification-type id=structuredclonewithtransfer:js-list data-x-internal=js-list>List</a>.<li>
    <p>For each object <var>transferable</var> in <var>transferList</var>:

    <ol><li><p>Let <var>placeholderResult</var> be the value of the entry in <var>memory</var> whose
     key is <var>transferable</var>.<li><p>Let <var>transferResult</var> be ? <a href=#transfer-abstract-op id=structuredclonewithtransfer:transfer-abstract-op>Transfer</a>(<var>transferable</var>,
     <var>targetRealm</var>).<li>
      <p>Within <var>clone</var>, replace references to <var>placeholderResult</var> with
      <var>transferResult</var>, such that everything holding a reference to
      <var>placeholderResult</var>, now holds a reference to <var>transferResult</var>.</p>

      <p class=note>This is a rather unusual low-level operation for which no primitives are
      defined by JavaScript.</p>
     <li><p>Add <var>transferResult</var> as the last element of
     <var>outputTransferList</var>.</ol>
   <li><p>Return { [[Clone]]: <var>clone</var>, [[TransferList]]: <var>outputTransferList</var>
   }.</ol>

  <p class=note>Originally the <a href=#structuredclonewithtransfer id=structuredclonewithtransfer:structuredclonewithtransfer>StructuredCloneWithTransfer</a> abstract operation was
  known as the "structured clone" algorithm. The <a href=#structuredclone id=structuredclonewithtransfer:structuredclone-3>StructuredClone</a> abstract operation was
  known as the "internal structured clone" algorithm. Transferring objects, now handled by the
  <a href=#structuredclonewithtransfer id=structuredclonewithtransfer:structuredclonewithtransfer-2>StructuredCloneWithTransfer</a> abstract operation, were formerly handled by parts of the
  algorithm of the <code id=structuredclonewithtransfer:dom-window-postmessage><a href=#dom-window-postmessage>postMessage()</a></code> method on the
  <code id=structuredclonewithtransfer:window><a href=#window>Window</a></code> object and the <code id=structuredclonewithtransfer:dom-messageport-postmessage><a href=#dom-messageport-postmessage>postMessage()</a></code>
  method on the <code id=structuredclonewithtransfer:messageport><a href=#messageport>MessagePort</a></code> object.</p>

  <span id=structured-clone></span>
  <h4 id=structuredclone data-dfn-type=abstract-op data-lt=StructuredClone data-export="">2.7.4 <dfn>StructuredClone</dfn> ( <var>input</var>, <var>targetRealm</var>
  [ , <var>memory</var> ] )<a href=#structuredclone class=self-link></a></h4>

  <ol><li><p>If <var>memory</var> was not supplied, let <var>memory</var> be an empty map.<li><p>If <var>memory</var> contains an entry with key <var>input</var>, then return that entry's
   value.<li><p>If <a href=https://tc39.github.io/ecma262/#sec-ecmascript-data-types-and-values id=structuredclone:js-type data-x-internal=js-type>Type</a>(<var>input</var>) is Undefined, Null, Boolean,
   String, or Number, then return <var>input</var>.<li><p>If <a href=https://tc39.github.io/ecma262/#sec-ecmascript-data-types-and-values id=structuredclone:js-type-2 data-x-internal=js-type>Type</a>(<var>input</var>) is Symbol, then throw a
   <a id=structuredclone:datacloneerror href=https://heycam.github.io/webidl/#datacloneerror data-x-internal=datacloneerror>"<code>DataCloneError</code>"</a> <code id=structuredclone:domexception><a data-x-internal=domexception href=https://heycam.github.io/webidl/#dfn-DOMException>DOMException</a></code>.<li><p>Let <var>deepClone</var> be false.<li><p>If <var>input</var> has a [[BooleanData]] internal slot, then let <var>output</var> be a
   new  Boolean object in <var>targetRealm</var> whose [[BooleanData]] internal slot value is the
   [[BooleanData]] internal slot value of <var>input</var>.<li><p>Otherwise, if <var>input</var> has a [[NumberData]] internal slot, then let
   <var>output</var> be a new Number object in <var>targetRealm</var> whose [[NumberData]] internal
   slot value is the [[NumberData]] internal slot value of <var>input</var>.<li><p>Otherwise, if <var>input</var> has a [[StringData]] internal slot, then let
   <var>output</var> be a new String object in <var>targetRealm</var> whose [[StringData]] internal
   slot value is the [[StringData]] internal slot value of <var>input</var>.<li><p>Otherwise, if <var>input</var> has a [[DateValue]] internal slot, then let
   <var>output</var> be a new Date object in <var>targetRealm</var> whose [[DateValue]] internal
   slot value is the [[DateValue]] internal slot value of <var>input</var>.<li><p>Otherwise, if <var>input</var> has a [[RegExpMatcher]] internal slot, then let
   <var>output</var> be a new RegExp object in <var>targetRealm</var> whose [[RegExpMatcher]]
   internal slot value is the [[RegExpMatcher]] internal slot value of <var>input</var>, whose
   [[OriginalSource]] internal slot value is the [[OriginalSource]] internal slot value of
   <var>input</var>, and whose whose [[OriginalFlags]] internal slot value is the [[OriginalFlags]]
   internal slot value of <var>input</var>.<li>
    <p>Otherwise, if <var>input</var> has an [[ArrayBufferData]] internal slot, then:</p>

    <ol><li><p>If <a id=structuredclone:isdetachedbuffer href=https://tc39.github.io/ecma262/#sec-isdetachedbuffer data-x-internal=isdetachedbuffer>IsDetachedBuffer</a>(<var>input</var>) is true, then throw a
     <a id=structuredclone:datacloneerror-2 href=https://heycam.github.io/webidl/#datacloneerror data-x-internal=datacloneerror>"<code>DataCloneError</code>"</a> <code id=structuredclone:domexception-2><a data-x-internal=domexception href=https://heycam.github.io/webidl/#dfn-DOMException>DOMException</a></code>.<li><p>Let <var>outputArrayBuffer</var> be the <a id=structuredclone:%arraybuffer% href=https://tc39.github.io/ecma262/#sec-arraybuffer-constructor data-x-internal=%arraybuffer%>%ArrayBuffer%</a> intrinsic object in
     <var>targetRealm</var>.

     <li><p>Let <var>output</var> be ? <a id=structuredclone:clonearraybuffer href=https://tc39.github.io/ecma262/#sec-clonearraybuffer data-x-internal=clonearraybuffer>CloneArrayBuffer</a>(<var>input</var>, 0,
     <var>outputArrayBuffer</var>).</ol>
   <li>
    <p>Otherwise, if <var>input</var> has a [[ViewedArrayBuffer]] internal slot, then:</p>

    <ol><li><p>Let <var>buffer</var> be the value of <var>input</var>'s [[ViewedArrayBuffer]] internal
     slot.<li><p>Let <var>bufferClone</var> be ? <a href=#structuredclone id=structuredclone:structuredclone>StructuredClone</a>(<var>buffer</var>,
     <var>targetRealm</var>, <var>memory</var>).<li><p>If <var>input</var> has a [[DataView]] internal slot, then let <var>output</var> be a
     new DataView object in <var>targetRealm</var> whose [[DataView]] internal slot value is true,
     whose [[ViewedArrayBuffer]] internal slot value is <var>bufferClone</var>, whose [[ByteLength]]
     internal slot value is the [[ByteLength]] internal slot value of <var>input</var>, and whose
     [[ByteOffset]] internal slot value is the [[ByteOffset]] internal slot value of
     <var>input</var>.<li>
      <p>Otherwise:</p>

      <ol><li><p>Assert: <var>input</var> has a [[TypedArrayName]] internal slot.<li><p>Let <var>constructor</var> be the intrinsic object listed in column one of <a id=structuredclone:the-typedarray-constructors href=https://tc39.github.io/ecma262/#table-49 data-x-internal=the-typedarray-constructors>The
       <var>TypedArray</var> Constructors</a> table for the value of <var>input</var>'s
       [[TypedArrayName]] internal slot in <var>targetRealm</var>.<li><p>Let <var>byteOffset</var> be <var>input</var>'s [[ByteOffset]] internal slot
       value.<li><p>Let <var>length</var> be <var>input</var>'s [[ArrayLength]] internal slot
       value.<li><p>Let <var>output</var> be ? <a id=structuredclone:typedarraycreate href=https://tc39.github.io/ecma262/#typedarray-create data-x-internal=typedarraycreate>TypedArrayCreate</a>(<var>constructor</var>,
       « <var>bufferClone</var>, <var>byteOffset</var>, <var>length</var> »).
      </ol>
