
      <p>Each <a href=#concept-task id=updating-the-image-data:concept-task-5>task</a> that is <a href=#queue-a-task id=updating-the-image-data:queue-a-task-9>queued</a> by the <a href=#networking-task-source id=updating-the-image-data:networking-task-source-4>networking task source</a> while the image is being
      fetched must update the presentation of the image, but as each new body part comes in, it must
      replace the previous image. Once one body part has been completely decoded, the user agent
      must set the <code id=updating-the-image-data:the-img-element-12><a href=#the-img-element>img</a></code> element to the <a href=#img-all id=updating-the-image-data:img-all-2>completely
      available</a> state and <a href=#queue-a-task id=updating-the-image-data:queue-a-task-10>queue a task</a> to <a href=https://dom.spec.whatwg.org/#concept-event-fire id=updating-the-image-data:concept-event-fire-5 data-x-internal=concept-event-fire>fire
      an event</a> named <code id=updating-the-image-data:event-load-2><a href=#event-load>load</a></code> at the <code id=updating-the-image-data:the-img-element-13><a href=#the-img-element>img</a></code>
      element.</p>
      

      <p class=note>The <code id=updating-the-image-data:event-progress-2><a href=#event-progress>progress</a></code> and <code id=updating-the-image-data:event-loadend-2><a href=#event-loadend>loadend</a></code> events are not fired for
      <code id=updating-the-image-data:multipart/x-mixed-replace-2><a href=#multipart/x-mixed-replace>multipart/x-mixed-replace</a></code> image streams.</p>

     <dt>If the resource type and data corresponds to a supported image format, <a href=#img-determine-type>as described below</a><dd>

      <p>The next <a href=#concept-task id=updating-the-image-data:concept-task-6>task</a> that is <a href=#queue-a-task id=updating-the-image-data:queue-a-task-11>queued</a> by the <a href=#networking-task-source id=updating-the-image-data:networking-task-source-5>networking task source</a> while the image is being
      fetched must run the following steps:</p>

      <ol><li>

        <p>If the user agent is able to determine <var>image request</var>'s image's width and height,
        and <var>image request</var> is <a href=#pending-request id=updating-the-image-data:pending-request-17>pending request</a>,
        set <var>image request</var>'s state to <a href=#img-inc id=updating-the-image-data:img-inc-3>partially available</a>.</p>

       <li>

        <p>Otherwise, if the user agent is able to determine <var>image request</var>'s image's width and height,
        and <var>image request</var> is <a href=#current-request id=updating-the-image-data:current-request-25>current request</a>,
        update the <code id=updating-the-image-data:the-img-element-14><a href=#the-img-element>img</a></code> element's presentation appropriately
        and set <var>image request</var>'s state to <a href=#img-inc id=updating-the-image-data:img-inc-4>partially available</a>.</p>

       <li>

        <p>Otherwise, if the user agent is able to determine that <var>image request</var>'s image
        is corrupted in some fatal way such that the image dimensions cannot be obtained, and
        <var>image request</var> is <a href=#pending-request id=updating-the-image-data:pending-request-18>pending request</a>, <a href=#abort-the-image-request id=updating-the-image-data:abort-the-image-request-9>abort the image
        request</a> for the <a href=#current-request id=updating-the-image-data:current-request-26>current request</a> and the <a href=#pending-request id=updating-the-image-data:pending-request-19>pending request</a>,
        <a href=#upgrade-the-pending-request-to-the-current-request id=updating-the-image-data:upgrade-the-pending-request-to-the-current-request-3>upgrade the pending request to the current request</a>, set <a href=#current-request id=updating-the-image-data:current-request-27>current
        request</a> to the <a href=#img-error id=updating-the-image-data:img-error-6>broken</a> state, <a href=https://dom.spec.whatwg.org/#concept-event-fire id=updating-the-image-data:concept-event-fire-6 data-x-internal=concept-event-fire>fire an event</a> named <code id=updating-the-image-data:event-error-3><a href=#event-error>error</a></code> at the <code id=updating-the-image-data:the-img-element-15><a href=#the-img-element>img</a></code> element, <a href=https://dom.spec.whatwg.org/#concept-event-fire id=updating-the-image-data:concept-event-fire-7 data-x-internal=concept-event-fire>fire an event</a> named <code id=updating-the-image-data:event-loadend-3><a href=#event-loadend>loadend</a></code> at the <code id=updating-the-image-data:the-img-element-16><a href=#the-img-element>img</a></code> element, and abort these
        steps.</p>

       <li>

        <p>Otherwise, if the user agent is able to determine that <var>image request</var>'s image
        is corrupted in some fatal way such that the image dimensions cannot be obtained, and
        <var>image request</var> is <a href=#current-request id=updating-the-image-data:current-request-28>current request</a>, <a href=#abort-the-image-request id=updating-the-image-data:abort-the-image-request-10>abort the image
        request</a> for <var>image request</var>, <a href=https://dom.spec.whatwg.org/#concept-event-fire id=updating-the-image-data:concept-event-fire-8 data-x-internal=concept-event-fire>fire an
        event</a> named <code id=updating-the-image-data:event-error-4><a href=#event-error>error</a></code> at the <code id=updating-the-image-data:the-img-element-17><a href=#the-img-element>img</a></code> element,
        <a href=https://dom.spec.whatwg.org/#concept-event-fire id=updating-the-image-data:concept-event-fire-9 data-x-internal=concept-event-fire>fire an event</a> named <code id=updating-the-image-data:event-loadend-4><a href=#event-loadend>loadend</a></code> at the <code id=updating-the-image-data:the-img-element-18><a href=#the-img-element>img</a></code> element, and abort these
        steps.</p>

       </ol>

      <p id=img-load>That <a href=#concept-task id=updating-the-image-data:concept-task-7>task</a>, and each subsequent <a href=#concept-task id=updating-the-image-data:concept-task-8>task</a>, that is <a href=#queue-a-task id=updating-the-image-data:queue-a-task-12>queued</a> by the
      <a href=#networking-task-source id=updating-the-image-data:networking-task-source-6>networking task source</a> while the image is being fetched, if <var>image
      request</var> is the <a href=#current-request id=updating-the-image-data:current-request-29>current request</a>, must update the presentation of the image
      appropriately (e.g., if the image is a progressive JPEG, each packet can improve the
      resolution of the image).<div class=status><input onclick=toggleStatus(this) value=⋰ type=button><p class=bugs><strong>Spec bugs:</strong> <a href="https://www.w3.org/Bugs/Public/show_bug.cgi?id=25797" title="<img> &quot;list of available images&quot; and fragment in the URL">25797</a>, <a href="https://www.w3.org/Bugs/Public/show_bug.cgi?id=25798" title="<img> should maybe cache broken images">25798</a></div>

      <p>Furthermore, the last <a href=#concept-task id=updating-the-image-data:concept-task-9>task</a> that is <a href=#queue-a-task id=updating-the-image-data:queue-a-task-13>queued</a> by the <a href=#networking-task-source id=updating-the-image-data:networking-task-source-7>networking task source</a> once the resource has been
      fetched must additionally run these steps:</p>

      <ol><li><p>If <var>image request</var> is the <a href=#pending-request id=updating-the-image-data:pending-request-20>pending request</a>,
       <a href=#abort-the-image-request id=updating-the-image-data:abort-the-image-request-11>abort the image request</a> for the <a href=#current-request id=updating-the-image-data:current-request-30>current request</a>,
       <a href=#upgrade-the-pending-request-to-the-current-request id=updating-the-image-data:upgrade-the-pending-request-to-the-current-request-4>upgrade the pending request to the current request</a> and
       update the <code id=updating-the-image-data:the-img-element-19><a href=#the-img-element>img</a></code> element's presentation appropriately.<li><p>Set <var>image request</var> to the <a href=#img-all id=updating-the-image-data:img-all-3>completely
       available</a> state.<li><p>Add the image to the <a href=#list-of-available-images id=updating-the-image-data:list-of-available-images-2>list of available images</a> using the key <var>key</var>, with the <a href=#ignore-higher-layer-caching id=updating-the-image-data:ignore-higher-layer-caching-2>ignore higher-layer caching</a> flag set.<li><p><a href=#fire-a-progress-event-or-event id=updating-the-image-data:fire-a-progress-event-or-event>Fire a progress event or event</a> named <code id=updating-the-image-data:event-load-3><a href=#event-load>load</a></code>
       at the <code id=updating-the-image-data:the-img-element-20><a href=#the-img-element>img</a></code> element, depending on the resource in <var>image request</var>.<li><p><a href=#fire-a-progress-event-or-event id=updating-the-image-data:fire-a-progress-event-or-event-2>Fire a progress event or event</a> named <code id=updating-the-image-data:event-loadend-5><a href=#event-loadend>loadend</a></code>
       at the <code id=updating-the-image-data:the-img-element-21><a href=#the-img-element>img</a></code> element, depending on the resource in <var>image request</var>.</ol>

     <dt>Otherwise<dd>

      <p>The image data is not in a supported file format; the user agent must set <var>image
      request</var> to the <a href=#img-error id=updating-the-image-data:img-error-7>broken</a> state, <a href=#abort-the-image-request id=updating-the-image-data:abort-the-image-request-12>abort the image
      request</a> for the <a href=#current-request id=updating-the-image-data:current-request-31>current request</a> and the <a href=#pending-request id=updating-the-image-data:pending-request-21>pending request</a>,
      <a href=#upgrade-the-pending-request-to-the-current-request id=updating-the-image-data:upgrade-the-pending-request-to-the-current-request-5>upgrade the pending request to the current request</a> if <var>image request</var> is
      the <a href=#pending-request id=updating-the-image-data:pending-request-22>pending request</a>, and then <a href=#queue-a-task id=updating-the-image-data:queue-a-task-14>queue a task</a> to first <a href=https://dom.spec.whatwg.org/#concept-event-fire id=updating-the-image-data:concept-event-fire-10 data-x-internal=concept-event-fire>fire an event</a> named <code id=updating-the-image-data:event-error-5><a href=#event-error>error</a></code>
      at the <code id=updating-the-image-data:the-img-element-22><a href=#the-img-element>img</a></code> element and then <a href=https://dom.spec.whatwg.org/#concept-event-fire id=updating-the-image-data:concept-event-fire-11 data-x-internal=concept-event-fire>fire an
      event</a> named <code id=updating-the-image-data:event-loadend-6><a href=#event-loadend>loadend</a></code> at the <code id=updating-the-image-data:the-img-element-23><a href=#the-img-element>img</a></code>
      element.</p>

     </dl>

   </ol>

  <p>While a user agent is running the above algorithm for an element <var>x</var>, there must be a
  strong reference from the element's <a id=updating-the-image-data:node-document-8 href=https://dom.spec.whatwg.org/#concept-node-document data-x-internal=node-document>node document</a> to the element <var>x</var>, even
  if that element is not <a id=updating-the-image-data:connected href=https://dom.spec.whatwg.org/#connected data-x-internal=connected>connected</a>.</p>

  <p>To <dfn id=abort-the-image-request>abort the image request</dfn> for an <a href=#image-request id=updating-the-image-data:image-request-3>image request</a> <var>image request</var> means to run the following steps:</p>

  <ol><li><p>Forget <var>image request</var>'s <a href=#img-req-data id=updating-the-image-data:img-req-data-3>image data</a>, if any.<li><p>Abort any instance of the <a href=https://fetch.spec.whatwg.org/#concept-fetch id=updating-the-image-data:concept-fetch-3 data-x-internal=concept-fetch>fetching</a> algorithm for
   <var>image request</var>, discarding any pending tasks generated by that algorithm.</ol>

  <p>To <dfn id=upgrade-the-pending-request-to-the-current-request>upgrade the pending request to the current request</dfn> for an <code id=updating-the-image-data:the-img-element-24><a href=#the-img-element>img</a></code> element means to run the following steps:</p>

  <ol><li><p>Let the <code id=updating-the-image-data:the-img-element-25><a href=#the-img-element>img</a></code> element's <a href=#current-request id=updating-the-image-data:current-request-32>current request</a> be the <a href=#pending-request id=updating-the-image-data:pending-request-23>pending request</a>.<li><p>Let the <code id=updating-the-image-data:the-img-element-26><a href=#the-img-element>img</a></code> element's <a href=#pending-request id=updating-the-image-data:pending-request-24>pending request</a> be null.</ol>

  <p>To <dfn id=fire-a-progress-event-or-event>fire a progress event or event</dfn> named <var>type</var> at an element <var>e</var>,
  depending on resource <var>r</var>, means to <a id=updating-the-image-data:fire-a-progress-event-3 href=https://xhr.spec.whatwg.org/#concept-event-fire-progress data-x-internal=fire-a-progress-event>fire a progress event</a> named
  <var>type</var> at <var>e</var> if <var>r</var> is <a href=#cors-same-origin id=updating-the-image-data:cors-same-origin-3>CORS-same-origin</a>, and otherwise
  <a href=https://dom.spec.whatwg.org/#concept-event-fire id=updating-the-image-data:concept-event-fire-12 data-x-internal=concept-event-fire>fire an event</a> named <var>type</var> at <var>e</var>.</p>


  <h6 id=selecting-an-image-source>4.8.4.3.5 Selecting an image source<a href=#selecting-an-image-source class=self-link></a></h6>

  <p>When asked to <dfn id=select-an-image-source>select an image source</dfn> for a given <code id=selecting-an-image-source:the-img-element><a href=#the-img-element>img</a></code> element <var>el</var>,
  user agents must do the following:</p>

  <ol><li><p><a href=#update-the-source-set id=selecting-an-image-source:update-the-source-set>Update the source set</a> for <var>el</var>.<li><p>If <var>el</var>'s <a href=#source-set id=selecting-an-image-source:source-set>source set</a> is empty,
   return null as the URL and undefined as the pixel density and abort these steps.<li><p>Otherwise, take <var>el</var>'s <a href=#source-set id=selecting-an-image-source:source-set-2>source set</a>
   and let it be <var>source set</var>.<li><p>If an entry <var>b</var> in <var>source set</var> has the same associated <a href=#pixel-density-descriptor id=selecting-an-image-source:pixel-density-descriptor>pixel
   density descriptor</a> as an earlier entry <var>a</var> in <var>source set</var>, then remove
   entry <var>b</var>. Repeat this step until none of the entries in <var>source set</var> have the
   same associated <a href=#pixel-density-descriptor id=selecting-an-image-source:pixel-density-descriptor-2>pixel density descriptor</a> as an earlier entry.<li><p>In a user agent-specific manner,
   choose one <a href=#image-source id=selecting-an-image-source:image-source>image source</a> from <var>source set</var>.
   Let this be <var>selected source</var>.<li><p>Return <var>selected source</var> and its associated pixel density.</ol>


  <h6 id=updating-the-source-set>4.8.4.3.6 Updating the source set<a href=#updating-the-source-set class=self-link></a></h6>

  <p>When asked to <dfn id=update-the-source-set>update the source set</dfn> for a given <code id=updating-the-source-set:the-img-element><a href=#the-img-element>img</a></code> element <var>el</var>,
  user agents must do the following:</p>

  <ol><li><p>Set <var>el</var>'s <a href=#source-set id=updating-the-source-set:source-set>source set</a> to an empty <a href=#source-set id=updating-the-source-set:source-set-2>source set</a>.<li><p>If <var>el</var> has a parent node and that is a <code id=updating-the-source-set:the-picture-element><a href=#the-picture-element>picture</a></code> element,
   let <var>elements</var> be an array containing <var>el</var>'s parent node's child elements, retaining relative order.
   Otherwise, let <var>elements</var> be array containing only <var>el</var>.<li><p>If <var>el</var> has a <code id=updating-the-source-set:attr-dim-width><a href=#attr-dim-width>width</a></code> attribute, and parsing
   that attribute's value using the <a href=#rules-for-parsing-dimension-values id=updating-the-source-set:rules-for-parsing-dimension-values>rules for parsing dimension values</a> doesn't generate
   an error or a percentage value, then let <var>width</var> be the returned integer value.
   Otherwise, let <var>width</var> be null.<li>

    <p>Iterate through <var>elements</var>,
    doing the following for each item <var>child</var>:</p>

    <ol><li>

      <p>If <var>child</var> is <var>el</var>:</p>

      <ol><li><p>If <var>child</var> has a <code id=updating-the-source-set:attr-img-srcset><a href=#attr-img-srcset>srcset</a></code> attribute,
       <a href=#parse-a-srcset-attribute id=updating-the-source-set:parse-a-srcset-attribute>parse <var>child</var>'s srcset attribute</a>
       and let the returned <a href=#source-set id=updating-the-source-set:source-set-3>source set</a> be <var>source set</var>.
       Otherwise, let <var>source set</var> be an empty <a href=#source-set id=updating-the-source-set:source-set-4>source set</a>.<li><p><a href=#parse-a-sizes-attribute id=updating-the-source-set:parse-a-sizes-attribute>Parse <var>child</var>'s sizes
       attribute</a> with the fallback width <var>width</var>, and let <var>source set</var>'s
       <a href=#source-size-2 id=updating-the-source-set:source-size-2>source size</a> be the returned value.<li><p>If <var>child</var> has a <code id=updating-the-source-set:attr-img-src><a href=#attr-img-src>src</a></code> attribute
       whose value is not the empty string
       and <var>source set</var> does not contain an
       <a href=#image-source id=updating-the-source-set:image-source>image source</a> with a <a href=#pixel-density-descriptor id=updating-the-source-set:pixel-density-descriptor>pixel density descriptor</a> value of 1,
       and no <a href=#image-source id=updating-the-source-set:image-source-2>image source</a> with a <a href=#width-descriptor id=updating-the-source-set:width-descriptor>width descriptor</a>,
       append <var>child</var>'s <code id=updating-the-source-set:attr-img-src-2><a href=#attr-img-src>src</a></code> attribute value to <var>source set</var>.<li><p><a href=#normalise-the-source-densities id=updating-the-source-set:normalise-the-source-densities>Normalize the source densities</a> of <var>source set</var>.<li><p>Let <var>el</var>'s <a href=#source-set id=updating-the-source-set:source-set-5>source set</a> be <var>source set</var>.<li><p>Abort this algorithm.</ol>

     <li><p>If <var>child</var> is not a <code id=updating-the-source-set:the-source-element><a href=#the-source-element>source</a></code> element, continue to the next child.
     Otherwise, <var>child</var> is a <code id=updating-the-source-set:the-source-element-2><a href=#the-source-element>source</a></code> element.<li><p>If <var>child</var> does not have a <code id=updating-the-source-set:attr-source-srcset><a href=#attr-source-srcset>srcset</a></code>
     attribute, continue to the next child.<li><p><a href=#parse-a-srcset-attribute id=updating-the-source-set:parse-a-srcset-attribute-2>Parse <var>child</var>'s srcset attribute</a> and
     let the returned <a href=#source-set id=updating-the-source-set:source-set-6>source set</a> be <var>source set</var>.<li><p>If <var>source set</var> has zero <a href=#image-source id=updating-the-source-set:image-source-3>image sources</a>,
     continue to the next child.<li><p>If <var>child</var> has a <code id=updating-the-source-set:attr-source-media><a href=#attr-source-media>media</a></code> attribute, and
     its value does not <a href=#matches-the-environment id=updating-the-source-set:matches-the-environment>match the environment</a>,
     continue to the next child.<li><p><a href=#parse-a-sizes-attribute id=updating-the-source-set:parse-a-sizes-attribute-2>Parse <var>child</var>'s sizes attribute</a>
     with the fallback width <var>width</var>, and let <var>source set</var>'s <a href=#source-size-2 id=updating-the-source-set:source-size-2-2>source
     size</a> be the returned value.<li><p>If <var>child</var> has a <code id=updating-the-source-set:attr-source-type><a href=#attr-source-type>type</a></code> attribute, and its
     value is an unknown or unsupported <a id=updating-the-source-set:mime-type href=https://mimesniff.spec.whatwg.org/#mime-type data-x-internal=mime-type>MIME type</a>, continue to the next child.<li><p><a href=#normalise-the-source-densities id=updating-the-source-set:normalise-the-source-densities-2>Normalize the source densities</a> of <var>source set</var>.<li><p>Let <var>el</var>'s <a href=#source-set id=updating-the-source-set:source-set-7>source set</a> be <var>source set</var>.<li><p>Abort this algorithm.</ol>

   </ol>

  <p class=note>Each <code id=updating-the-source-set:the-img-element-2><a href=#the-img-element>img</a></code> element independently considers its previous sibling
  <code id=updating-the-source-set:the-source-element-3><a href=#the-source-element>source</a></code> elements plus the <code id=updating-the-source-set:the-img-element-3><a href=#the-img-element>img</a></code> element itself for selecting an <a href=#image-source id=updating-the-source-set:image-source-4>image
  source</a>, ignoring any other (invalid) elements, including other <code id=updating-the-source-set:the-img-element-4><a href=#the-img-element>img</a></code> elements in
  the same <code id=updating-the-source-set:the-picture-element-2><a href=#the-picture-element>picture</a></code> element, or <code id=updating-the-source-set:the-source-element-4><a href=#the-source-element>source</a></code> elements that are following siblings
  of the relevant <code id=updating-the-source-set:the-img-element-5><a href=#the-img-element>img</a></code> element.</p>


  <h6 id=parsing-a-srcset-attribute>4.8.4.3.7 Parsing a srcset attribute<a href=#parsing-a-srcset-attribute class=self-link></a></h6>

  <p>When asked to <dfn id=parse-a-srcset-attribute>parse a srcset attribute</dfn> from an element, parse the value of the
  element's <a href=#srcset-attribute id=parsing-a-srcset-attribute:srcset-attribute>srcset attribute</a> as follows:</p>

  <ol><li><p>Let <var>input</var> be the value passed to this algorithm.<li><p>Let <var>position</var> be a pointer into <var>input</var>,
   initially pointing at the start of the string.<li><p>Let <var>candidates</var> be an initially empty <a href=#source-set id=parsing-a-srcset-attribute:source-set>source set</a>.<li><p><i>Splitting loop</i>: <a href=#collect-a-sequence-of-characters id=parsing-a-srcset-attribute:collect-a-sequence-of-characters>Collect a sequence of characters</a>
   that are <a href=#space-character id=parsing-a-srcset-attribute:space-character>space characters</a> or U+002C COMMA characters.
   If any U+002C COMMA characters were collected, that is a <a href=#concept-microsyntax-parse-error id=parsing-a-srcset-attribute:concept-microsyntax-parse-error>parse error</a>.<li><p>If <var>position</var> is past the end of <var>input</var>,
   return <var>candidates</var> and abort these steps.<li><p><a href=#collect-a-sequence-of-characters id=parsing-a-srcset-attribute:collect-a-sequence-of-characters-2>Collect a sequence of characters</a> that are not
   <a href=#space-character id=parsing-a-srcset-attribute:space-character-2>space characters</a>, and let that be <var>url</var>.<li><p>Let <var>descriptors</var> be a new empty list.<li>

    <p>If <var>url</var> ends with a U+002C COMMA character (,),
    follow these substeps:</p>

    <ol><li><p>Remove all trailing U+002C COMMA characters from <var>url</var>.
     If this removed more than one character,
     that is a <a href=#concept-microsyntax-parse-error id=parsing-a-srcset-attribute:concept-microsyntax-parse-error-2>parse error</a>.</ol>

    <p>Otherwise, follow these substeps:</p>

    <ol><li><p><i>Descriptor tokenizer</i>: <a href=#skip-whitespace id=parsing-a-srcset-attribute:skip-whitespace>Skip whitespace</a><li><p>Let <var>current descriptor</var> be the empty string.<li><p>Let <var>state</var> be <i>in descriptor</i>.<li>

      <p>Let <var>c</var> be the character at <var>position</var>.
      Do the following depending on the value of <var>state</var>.
      For the purpose of this step, "EOF" is a special character representing
      that <var>position</var> is past the end of <var>input</var>.</p>

      <dl class=switch><dt><i>In descriptor</i><dd>

        <p>Do the following, depending on the value of <var>c</var>:</p>

        <dl class=switch><dt><a href=#space-character id=parsing-a-srcset-attribute:space-character-3>Space character</a><dd><p>If <var>current descriptor</var> is not empty,
         append <var>current descriptor</var> to <var>descriptors</var>
         and let <var>current descriptor</var> be the empty string.
         Set <var>state</var> to <i>after descriptor</i>.<dt>U+002C COMMA (,)<dd><p>Advance <var>position</var> to the next character in <var>input</var>.
         If <var>current descriptor</var> is not empty,
         append <var>current descriptor</var> to <var>descriptors</var>.
         Jump to the step labeled <i>descriptor parser</i>.<dt>U+0028 LEFT PARENTHESIS (()<dd><p>Append <var>c</var> to <var>current descriptor</var>.
         Set <var>state</var> to <i>in parens</i>.<dt>EOF<dd><p>If <var>current descriptor</var> is not empty,
         append <var>current descriptor</var> to <var>descriptors</var>.
         Jump to the step labeled <i>descriptor parser</i>.<dt>Anything else<dd><p>Append <var>c</var> to <var>current descriptor</var>.</dl>

       <dt><i>In parens</i><dd>

        <p>Do the following, depending on the value of <var>c</var>:</p>

        <dl class=switch><dt>U+0029 RIGHT PARENTHESIS ())<dd><p>Append <var>c</var> to <var>current descriptor</var>.
         Set <var>state</var> to <i>in descriptor</i>.<dt>EOF<dd><p>Append <var>current descriptor</var> to <var>descriptors</var>.
         Jump to the step labeled <i>descriptor parser</i>.<dt>Anything else<dd><p>Append <var>c</var> to <var>current descriptor</var>.</dl>

       <dt><i>After descriptor</i><dd>

        <p>Do the following, depending on the value of <var>c</var>:</p>

        <dl class=switch><dt><a href=#space-character id=parsing-a-srcset-attribute:space-character-4>Space character</a><dd><p>Stay in this state.<dt>EOF<dd><p>Jump to the step labeled <i>descriptor parser</i>.<dt>Anything else<dd><p>Set <var>state</var> to <i>in descriptor</i>.
         Set <var>position</var> to the <em>previous</em> character in <var>input</var>.</dl>

       </dl>

      <p>Advance <var>position</var> to the next character in <var>input</var>.
      Repeat this substep.</p>

      <p class=note>In order to be compatible with future additions,
      this algorithm supports multiple descriptors and descriptors with parens.</p>

     </ol>

   <li><p><i>Descriptor parser</i>: Let <var>error</var> be <i>no</i>.<li><p>Let <var>width</var> be <i>absent</i>.<li><p>Let <var>density</var> be <i>absent</i>.<li><p>Let <var>future-compat-h</var> be <i>absent</i>.<li>

    <p>For each descriptor in <var>descriptors</var>,
    run the appropriate set of steps from the following list:</p>

    <dl class=switch><dt>If the descriptor consists of a <a href=#valid-non-negative-integer id=parsing-a-srcset-attribute:valid-non-negative-integer>valid non-negative integer</a>
     followed by a U+0077 LATIN SMALL LETTER W character<dd>

      <ol><li>

        <p>If the user agent does not support the <code id=parsing-a-srcset-attribute:attr-img-sizes><a href=#attr-img-sizes>sizes</a></code> attribute,
        let <var>error</var> be <i>yes</i>.</p>

        <p class=note>A conforming user agent will support the <code id=parsing-a-srcset-attribute:attr-img-sizes-2><a href=#attr-img-sizes>sizes</a></code> attribute.
        However, user agents typically implement and ship features in an incremental manner in practice.</p>

       <li><p>If <var>width</var> and <var>density</var>
       are not both <i>absent</i>,
       then let <var>error</var> be <i>yes</i>.<li><p>Apply the <a href=#rules-for-parsing-non-negative-integers id=parsing-a-srcset-attribute:rules-for-parsing-non-negative-integers>rules for parsing non-negative integers</a> to the descriptor.
       If the result is zero, let <var>error</var> be <i>yes</i>.
       Otherwise, let <var>width</var> be the result.</ol>

     <dt>If the descriptor consists of a <a href=#valid-floating-point-number id=parsing-a-srcset-attribute:valid-floating-point-number>valid floating-point number</a>
     followed by a U+0078 LATIN SMALL LETTER X character<dd>

      <ol><li><p>If <var>width</var>, <var>density</var> and <var>future-compat-h</var>
       are not all <i>absent</i>,
       then let <var>error</var> be <i>yes</i>.<li>

        <p>Apply the <a href=#rules-for-parsing-floating-point-number-values id=parsing-a-srcset-attribute:rules-for-parsing-floating-point-number-values>rules for parsing floating-point number values</a> to the descriptor.
        If the result is less than zero, let <var>error</var> be <i>yes</i>.
        Otherwise, let <var>density</var> be the result.</p>

        <p class=note>If <var>density</var> is zero,
        the <a id=parsing-a-srcset-attribute:intrinsic-dimensions href=https://drafts.csswg.org/css2/conform.html#intrinsic data-x-internal=intrinsic-dimensions>intrinsic dimensions</a> will be infinite.
        User agents are expected to have limits in how big images can be rendered,
        which is allowed by the <a href=#hardwareLimitations>hardware limitations</a> clause.</p>

       </ol>

     <dt>If the descriptor consists of a <a href=#valid-non-negative-integer id=parsing-a-srcset-attribute:valid-non-negative-integer-2>valid non-negative integer</a>
     followed by a U+0068 LATIN SMALL LETTER H character<dd>

      <p>This is a <a href=#concept-microsyntax-parse-error id=parsing-a-srcset-attribute:concept-microsyntax-parse-error-3>parse error</a>.</p>

      <ol><li><p>If <var>future-compat-h</var> and <var>density</var>
       are not both <i>absent</i>,
       then let <var>error</var> be <i>yes</i>.<li><p>Apply the <a href=#rules-for-parsing-non-negative-integers id=parsing-a-srcset-attribute:rules-for-parsing-non-negative-integers-2>rules for parsing non-negative integers</a> to the descriptor.
       If the result is zero, let <var>error</var> be <i>yes</i>.
       Otherwise, let <var>future-compat-h</var> be the result.</ol>

     <dt>Anything else<dd><p>Let <var>error</var> be <i>yes</i>.</dl>

   <li><p>If <var>future-compat-h</var> is not <i>absent</i> and <var>width</var> is <i>absent</i>,
   let <var>error</var> be <i>yes</i>.<li><p>If <var>error</var> is still <i>no</i>,
   then append a new <a href=#image-source id=parsing-a-srcset-attribute:image-source>image source</a> to <var>candidates</var>
   whose URL is <var>url</var>,
   associated with a width <var>width</var> if not <i>absent</i>
   and a pixel density <var>density</var> if not <i>absent</i>.
   Otherwise, there is a <a href=#concept-microsyntax-parse-error id=parsing-a-srcset-attribute:concept-microsyntax-parse-error-4>parse error</a>.<li><p>Return to the step labeled <i>splitting loop</i>.</ol>


  <h6 id=parsing-a-sizes-attribute>4.8.4.3.8 Parsing a sizes attribute<a href=#parsing-a-sizes-attribute class=self-link></a></h6>

  <p>When asked to <dfn id=parse-a-sizes-attribute>parse a sizes attribute</dfn> from an element, with a fallback width
  <var>width</var>, <a id=parsing-a-sizes-attribute:parse-a-comma-separated-list-of-component-values href=https://drafts.csswg.org/css-syntax/#parse-a-comma-separated-list-of-component-values data-x-internal=parse-a-comma-separated-list-of-component-values>parse a comma-separated list of component values</a> from the value of
  the element's <a href=#sizes-attribute id=parsing-a-sizes-attribute:sizes-attribute>sizes attribute</a> (or the empty string, if the attribute is
  absent), and let <var>unparsed sizes list</var> be the result. <a href=#refsCSSSYNTAX>[CSSSYNTAX]</a></p>

  <p>For each <var>unparsed size</var> in <var>unparsed sizes list</var>:</p>

  <ol><li><p>Remove all consecutive <a id=parsing-a-sizes-attribute:whitespace-token href=https://drafts.csswg.org/css-syntax/#typedef-whitespace-token data-x-internal=whitespace-token>&lt;whitespace-token></a>s
   from the end of <var>unparsed size</var>.
   If <var>unparsed size</var> is now empty,
   that is a <a href=#concept-microsyntax-parse-error id=parsing-a-sizes-attribute:concept-microsyntax-parse-error>parse error</a>;
   continue to the next iteration of this algorithm.<li><p>If the last <a id=parsing-a-sizes-attribute:component-value href=https://drafts.csswg.org/css-syntax/#component-value data-x-internal=component-value>component value</a> in <var>unparsed size</var>
   is a valid non-negative <a href=#source-size-value id=parsing-a-sizes-attribute:source-size-value>&lt;source-size-value></a>,
   let <var>size</var> be its value
   and remove the <a id=parsing-a-sizes-attribute:component-value-2 href=https://drafts.csswg.org/css-syntax/#component-value data-x-internal=component-value>component value</a> from <var>unparsed size</var>.
   Any CSS function other than the <a id="parsing-a-sizes-attribute:'calc()'" href=https://drafts.csswg.org/css-values/#funcdef-calc data-x-internal="'calc()'">'calc()'</a> function is invalid.
   Otherwise, there is a <a href=#concept-microsyntax-parse-error id=parsing-a-sizes-attribute:concept-microsyntax-parse-error-2>parse error</a>;
   continue to the next iteration of this algorithm.<li><p>Remove all consecutive <a id=parsing-a-sizes-attribute:whitespace-token-2 href=https://drafts.csswg.org/css-syntax/#typedef-whitespace-token data-x-internal=whitespace-token>&lt;whitespace-token></a>s
   from the end of <var>unparsed size</var>.
   If <var>unparsed size</var> is now empty,
   return <var>size</var> and exit this algorithm.
   If this was not the last item in <var>unparsed sizes list</var>,
   that is a <a href=#concept-microsyntax-parse-error id=parsing-a-sizes-attribute:concept-microsyntax-parse-error-3>parse error</a>.<li><p>Parse the remaining <a href=https://drafts.csswg.org/css-syntax/#component-value id=parsing-a-sizes-attribute:component-value-3 data-x-internal=component-value>component values</a> in <var>unparsed size</var>
   as a <a id=parsing-a-sizes-attribute:media-condition href=https://drafts.csswg.org/mediaqueries/#typedef-media-condition data-x-internal=media-condition>&lt;media-condition></a>.
   If it does not parse correctly,
   or it does parse correctly but the <a id=parsing-a-sizes-attribute:media-condition-2 href=https://drafts.csswg.org/mediaqueries/#typedef-media-condition data-x-internal=media-condition>&lt;media-condition></a> evaluates to false,
   continue to the next iteration of this algorithm. <a href=#refsMQ>[MQ]</a><li><p>Return <var>size</var> and exit this algorithm.</ol>

  <p>If the above algorithm exhausts <var>unparsed sizes list</var> without returning a
  <var>size</var> value, follow these steps:</p>

  <ol><li><p>If <var>width</var> is not null, return a <a id=parsing-a-sizes-attribute:length href=https://drafts.csswg.org/css-values/#lengths data-x-internal=length>&lt;length></a> with the value
   <var>width</var> and the unit <a id="parsing-a-sizes-attribute:'px'" href=https://drafts.csswg.org/css-values/#px data-x-internal="'px'">'px'</a>.<li><p>Return <code>100vw</code>.</ol>

  <p class=note>While a <a href=#valid-source-size-list id=parsing-a-sizes-attribute:valid-source-size-list>valid source size list</a> only contains a bare <a href=#source-size-value id=parsing-a-sizes-attribute:source-size-value-2>&lt;source-size-value></a>
  (without an accompanying <a id=parsing-a-sizes-attribute:media-condition-3 href=https://drafts.csswg.org/mediaqueries/#typedef-media-condition data-x-internal=media-condition>&lt;media-condition></a>)
  as the last entry in the <a href=#source-size-list id=parsing-a-sizes-attribute:source-size-list>&lt;source-size-list></a>,
  the parsing algorithm technically allows such at any point in the list,
  and will accept it immediately as the size
  if the preceding entries in the list weren't used.
  This is to enable future extensions,
  and protect against simple author errors such as a final trailing comma.</p>


  <h6 id=normalizing-the-source-densities>4.8.4.3.9 Normalizing the source densities<a href=#normalizing-the-source-densities class=self-link></a></h6>

  <p>An <a href=#image-source id=normalizing-the-source-densities:image-source>image source</a> can have a <a href=#pixel-density-descriptor id=normalizing-the-source-densities:pixel-density-descriptor>pixel density descriptor</a>, a <a href=#width-descriptor id=normalizing-the-source-densities:width-descriptor>width
  descriptor</a>, or no descriptor at all accompanying its URL. Normalizing a <a href=#source-set id=normalizing-the-source-densities:source-set>source
  set</a> gives every <a href=#image-source id=normalizing-the-source-densities:image-source-2>image source</a> a <a href=#pixel-density-descriptor id=normalizing-the-source-densities:pixel-density-descriptor-2>pixel density descriptor</a>.</p>

  <p>When asked to <dfn id=normalise-the-source-densities>normalize the source
  densities</dfn> of a <a href=#source-set id=normalizing-the-source-densities:source-set-2>source set</a> <var>source set</var>, the user agent must do the
  following:</p>

  <ol><li><p>Let <var>source size</var> be <var>source set</var>'s <a href=#source-size-2 id=normalizing-the-source-densities:source-size-2>source size</a>.<li>

    <p>For each <a href=#image-source id=normalizing-the-source-densities:image-source-3>image source</a> in <var>source set</var>:</p>

    <ol><li><p>If the <a href=#image-source id=normalizing-the-source-densities:image-source-4>image source</a> has a <a href=#pixel-density-descriptor id=normalizing-the-source-densities:pixel-density-descriptor-3>pixel density descriptor</a>, continue to the next
     <a href=#image-source id=normalizing-the-source-densities:image-source-5>image source</a>.<li>

      <p>Otherwise, if the <a href=#image-source id=normalizing-the-source-densities:image-source-6>image source</a> has a <a href=#width-descriptor id=normalizing-the-source-densities:width-descriptor-2>width descriptor</a>, replace the <a href=#width-descriptor id=normalizing-the-source-densities:width-descriptor-3>width
      descriptor</a> with a <a href=#pixel-density-descriptor id=normalizing-the-source-densities:pixel-density-descriptor-4>pixel density descriptor</a> with a <a href=#pixel-density-descriptor-value id=normalizing-the-source-densities:pixel-density-descriptor-value>value</a> of the <a href=#width-descriptor-value id=normalizing-the-source-densities:width-descriptor-value>width descriptor value</a> divided by the <a href=#source-size-2 id=normalizing-the-source-densities:source-size-2-2>source size</a> and a unit
      of <code>x</code>.</p>

      <p class=note>If the <a href=#source-size-2 id=normalizing-the-source-densities:source-size-2-3>source size</a> is zero,
      the density would be infinity,
      which results in the <a id=normalizing-the-source-densities:intrinsic-dimensions href=https://drafts.csswg.org/css2/conform.html#intrinsic data-x-internal=intrinsic-dimensions>intrinsic dimensions</a> being zero by zero.</p>

     <li><p>Otherwise, give the <a href=#image-source id=normalizing-the-source-densities:image-source-7>image source</a> a <a href=#pixel-density-descriptor id=normalizing-the-source-densities:pixel-density-descriptor-5>pixel density descriptor</a> of <code>1x</code>.</ol>

   </ol>


  <h6 id=reacting-to-environment-changes>4.8.4.3.10 Reacting to environment changes<a href=#reacting-to-environment-changes class=self-link></a></h6>

  <p id=img-environment-changes>The user agent may at any time run the following algorithm to update an <code id=reacting-to-environment-changes:the-img-element><a href=#the-img-element>img</a></code>
  element's image in order to react to changes in the environment. (User agents are <em>not
  required</em> to ever run this algorithm; for example, if the user is not looking at the page any
  more, the user agent might want to wait until the user has returned to the page before determining
  which image to use, in case the environment changes again in the meantime.)</p>

  <p class=note>User agents are encouraged to run this algorithm in particular when the user changes
  the <a id=reacting-to-environment-changes:viewport href=https://drafts.csswg.org/css2/visuren.html#viewport data-x-internal=viewport>viewport</a>'s size (e.g. by resizing the window or changing the page zoom), and when
  an <code id=reacting-to-environment-changes:the-img-element-2><a href=#the-img-element>img</a></code> element is <a href=#insert-an-element-into-a-document id=reacting-to-environment-changes:insert-an-element-into-a-document>inserted into a
  document</a>, so that the <a href=#density-corrected-intrinsic-width-and-height id=reacting-to-environment-changes:density-corrected-intrinsic-width-and-height>density-corrected intrinsic width and height</a> match the
  new <a id=reacting-to-environment-changes:viewport-2 href=https://drafts.csswg.org/css2/visuren.html#viewport data-x-internal=viewport>viewport</a>, and so that the correct image is chosen when <a href=#art-direction id=reacting-to-environment-changes:art-direction>art direction</a>
  is involved.</p>

  <ol><li><p><a href=#await-a-stable-state id=reacting-to-environment-changes:await-a-stable-state>Await a stable state</a>. The <a href=#synchronous-section id=reacting-to-environment-changes:synchronous-section>synchronous section</a>
   consists of all the remaining steps of this algorithm until the algorithm says the
   <a href=#synchronous-section id=reacting-to-environment-changes:synchronous-section-2>synchronous section</a> has ended. (Steps in <a href=#synchronous-section id=reacting-to-environment-changes:synchronous-section-3>synchronous sections</a> are marked with ⌛.)<li><p>⌛ If the <code id=reacting-to-environment-changes:the-img-element-3><a href=#the-img-element>img</a></code> element does not <a href=#use-srcset-or-picture id=reacting-to-environment-changes:use-srcset-or-picture>use <code>srcset</code> or
   <code>picture</code></a>, its <a id=reacting-to-environment-changes:node-document href=https://dom.spec.whatwg.org/#concept-node-document data-x-internal=node-document>node document</a> is not the <a href=#active-document id=reacting-to-environment-changes:active-document>active
   document</a>, has image data whose resource type is <code id=reacting-to-environment-changes:multipart/x-mixed-replace><a href=#multipart/x-mixed-replace>multipart/x-mixed-replace</a></code>, or
   the <a href=#pending-request id=reacting-to-environment-changes:pending-request>pending request</a> is not null, then abort this algorithm.<li><p>⌛ Let <var>selected source</var> and <var>selected pixel
   density</var> be the URL and pixel density that results from <a href=#select-an-image-source id=reacting-to-environment-changes:select-an-image-source>selecting an image source</a>, respectively.<li><p>⌛ If <var>selected source</var> is null, then abort these steps.<li><p>⌛ If <var>selected source</var> and <var>selected pixel
   density</var> are the same as the element's <a href=#last-selected-source id=reacting-to-environment-changes:last-selected-source>last selected source</a> and <a href=#current-pixel-density id=reacting-to-environment-changes:current-pixel-density>current
   pixel density</a>, then abort these steps.<li><p>⌛ <a href=#parse-a-url id=reacting-to-environment-changes:parse-a-url>Parse</a> <var>selected source</var>, relative to
   the element's <a id=reacting-to-environment-changes:node-document-2 href=https://dom.spec.whatwg.org/#concept-node-document data-x-internal=node-document>node document</a>, and let <var>urlString</var> be the <a href=#resulting-url-string id=reacting-to-environment-changes:resulting-url-string>resulting URL
   string</a>. If that is not successful, abort these steps.<li><p>⌛ Let <var>corsAttributeState</var> be the state of the element's <code id=reacting-to-environment-changes:attr-img-crossorigin><a href=#attr-img-crossorigin>crossorigin</a></code> content attribute.<li><p>⌛ Let <var>origin</var> be the <a href=#concept-origin id=reacting-to-environment-changes:concept-origin>origin</a> of the <code id=reacting-to-environment-changes:the-img-element-4><a href=#the-img-element>img</a></code> element's <a id=reacting-to-environment-changes:node-document-3 href=https://dom.spec.whatwg.org/#concept-node-document data-x-internal=node-document>node document</a>.<li><p>⌛ Let <var>client</var> be the <code id=reacting-to-environment-changes:the-img-element-5><a href=#the-img-element>img</a></code> element's <a id=reacting-to-environment-changes:node-document-4 href=https://dom.spec.whatwg.org/#concept-node-document data-x-internal=node-document>node
   document</a>'s <code id=reacting-to-environment-changes:window><a href=#window>Window</a></code> object's <a href=#environment-settings-object id=reacting-to-environment-changes:environment-settings-object>environment settings object</a>.<li><p>⌛ Let <var>key</var> be a tuple consisting of <var>urlString</var>,
   <var>corsAttributeState</var>, and, if <var>corsAttributeState</var> is not <a href=#attr-crossorigin-none id=reacting-to-environment-changes:attr-crossorigin-none>No CORS</a>, <var>origin</var>.<li><p>⌛ Let <var>image request</var> be a new <a href=#image-request id=reacting-to-environment-changes:image-request>image request</a>
   whose <a href=#img-req-url id=reacting-to-environment-changes:img-req-url>current URL</a> is <var>urlString</var><li><p>⌛ Let the element's <a href=#pending-request id=reacting-to-environment-changes:pending-request-2>pending request</a> be <var>image request</var>.<li><p>End the <a href=#synchronous-section id=reacting-to-environment-changes:synchronous-section-4>synchronous section</a>, continuing the remaining steps
   <a href=#in-parallel id=reacting-to-environment-changes:in-parallel>in parallel</a>.<li>

    <p>If the <a href=#list-of-available-images id=reacting-to-environment-changes:list-of-available-images>list of available images</a> contains an entry for <var>key</var>,
    then set <var>image request</var>'s <a href=#img-req-data id=reacting-to-environment-changes:img-req-data>image data</a> to that of the entry.
    Continue to the next step.</p>

    <p>Otherwise, run these substeps:</p>

    <ol><li><p>Let <var>request</var> be the result of <a href=#create-a-potential-cors-request id=reacting-to-environment-changes:create-a-potential-cors-request>creating a potential-CORS request</a> given
     <var>urlString</var>, "<code>image</code>", and
     <var>corsAttributeState</var>.<li><p>Set <var>request</var>'s <a href=https://fetch.spec.whatwg.org/#concept-request-client id=reacting-to-environment-changes:concept-request-client data-x-internal=concept-request-client>client</a> to
     <var>client</var>, <a href=https://fetch.spec.whatwg.org/#concept-request-type id=reacting-to-environment-changes:concept-request-type data-x-internal=concept-request-type>type</a> to "<code>image</code>", <a href=https://fetch.spec.whatwg.org/#concept-request-initiator id=reacting-to-environment-changes:concept-request-initiator data-x-internal=concept-request-initiator>initiator</a> to "<code>imageset</code>", and set <var>request</var>'s <a id=reacting-to-environment-changes:synchronous-flag href=https://fetch.spec.whatwg.org/#synchronous-flag data-x-internal=synchronous-flag>synchronous
     flag</a>.<li><p>Set <var>request</var>'s
     <a href=https://fetch.spec.whatwg.org/#concept-request-referrer-policy id=reacting-to-environment-changes:concept-request-referrer-policy data-x-internal=concept-request-referrer-policy>referrer policy</a> to the current state of
     the element's <code id=reacting-to-environment-changes:attr-img-referrerpolicy><a href=#attr-img-referrerpolicy>referrerpolicy</a></code> attribute.<li><p>Let <var>response</var> be the result of <a href=https://fetch.spec.whatwg.org/#concept-fetch id=reacting-to-environment-changes:concept-fetch data-x-internal=concept-fetch>fetching</a> <var>request</var>.<li><p>If <var>response</var>'s <a href=#unsafe-response id=reacting-to-environment-changes:unsafe-response>unsafe response</a> is a <a id=reacting-to-environment-changes:network-error href=https://fetch.spec.whatwg.org/#concept-network-error data-x-internal=network-error>network error</a> or
     if the image format is unsupported (as determined by applying the <a href=https://mimesniff.spec.whatwg.org/#rules-for-sniffing-images-specifically id=reacting-to-environment-changes:content-type-sniffing:-image data-x-internal=content-type-sniffing:-image>image sniffing rules</a>, again as mentioned earlier),
     or if the user agent is able to determine that <var>image request</var>'s image is corrupted in
     some fatal way such that the image dimensions cannot be obtained, or if the resource type is
     <code id=reacting-to-environment-changes:multipart/x-mixed-replace-2><a href=#multipart/x-mixed-replace>multipart/x-mixed-replace</a></code>, then let <a href=#pending-request id=reacting-to-environment-changes:pending-request-3>pending request</a> be null and abort
     these steps.<li><p>Otherwise, <var>response</var>'s <a href=#unsafe-response id=reacting-to-environment-changes:unsafe-response-2>unsafe response</a> is <var>image
     request</var>'s <a href=#img-req-data id=reacting-to-environment-changes:img-req-data-2>image data</a>. It can be either
     <a href=#cors-same-origin id=reacting-to-environment-changes:cors-same-origin>CORS-same-origin</a> or <a href=#cors-cross-origin id=reacting-to-environment-changes:cors-cross-origin>CORS-cross-origin</a>; this affects the
     <a href=#concept-origin id=reacting-to-environment-changes:concept-origin-2>origin</a> of the image itself (e.g., when used on a <code id=reacting-to-environment-changes:the-canvas-element><a href=#the-canvas-element>canvas</a></code>).</ol>

   <li>

    <p><a href=#queue-a-task id=reacting-to-environment-changes:queue-a-task>Queue a task</a> to run the following substeps:</p>

    <ol><li><p>If the <code id=reacting-to-environment-changes:the-img-element-6><a href=#the-img-element>img</a></code> element has experienced <a href=#relevant-mutations id=reacting-to-environment-changes:relevant-mutations>relevant mutations</a>
     since this algorithm started, then let <a href=#pending-request id=reacting-to-environment-changes:pending-request-4>pending request</a> be null and abort these steps.</p>

     <li><p>Let the <code id=reacting-to-environment-changes:the-img-element-7><a href=#the-img-element>img</a></code> element's <a href=#last-selected-source id=reacting-to-environment-changes:last-selected-source-2>last selected source</a> be <var>selected source</var>
     and the <code id=reacting-to-environment-changes:the-img-element-8><a href=#the-img-element>img</a></code> element's <a href=#current-pixel-density id=reacting-to-environment-changes:current-pixel-density-2>current pixel density</a> be <var>selected pixel density</var>.<li><p>Set <var>image request</var> to the <a href=#img-all id=reacting-to-environment-changes:img-all>completely available</a> state.<li><p>Add the image to the <a href=#list-of-available-images id=reacting-to-environment-changes:list-of-available-images-2>list of available images</a> using the key <var>key</var>,
     with the <a href=#ignore-higher-layer-caching id=reacting-to-environment-changes:ignore-higher-layer-caching>ignore higher-layer caching</a> flag set.<li><p><a href=#upgrade-the-pending-request-to-the-current-request id=reacting-to-environment-changes:upgrade-the-pending-request-to-the-current-request>Upgrade the pending request to the current request</a>.<li><p>Update the <code id=reacting-to-environment-changes:the-img-element-9><a href=#the-img-element>img</a></code> element's presentation appropriately.<li><p><a href=https://dom.spec.whatwg.org/#concept-event-fire id=reacting-to-environment-changes:concept-event-fire data-x-internal=concept-event-fire>Fire an event</a> named <code id=reacting-to-environment-changes:event-load><a href=#event-load>load</a></code> at the <code id=reacting-to-environment-changes:the-img-element-10><a href=#the-img-element>img</a></code> element.</ol>

   </ol>

  


  <h5 id=alt>4.8.4.4 Requirements for providing text to act as an alternative for images<a href=#alt class=self-link></a></h5>


  <h6 id=general-guidelines>4.8.4.4.1 General guidelines<a href=#general-guidelines class=self-link></a></h6>

  <p>Except where otherwise specified, the <code id=general-guidelines:attr-img-alt><a href=#attr-img-alt>alt</a></code> attribute must be
  specified and its value must not be empty; the value must be an appropriate replacement for the
  image. The specific requirements for the <code id=general-guidelines:attr-img-alt-2><a href=#attr-img-alt>alt</a></code> attribute depend on
  what the image is intended to represent, as described in the following sections.</p>

  <p>The most general rule to consider when writing alternative text is the following: <strong>the
  intent is that replacing every image with the text of its <code id=general-guidelines:attr-img-alt-3><a href=#attr-img-alt>alt</a></code>
  attribute not change the meaning of the page</strong>.</p>

  <p>So, in general, alternative text can be written by considering what one would have written had
  one not been able to include the image.</p>

  <p>A corollary to this is that the <code id=general-guidelines:attr-img-alt-4><a href=#attr-img-alt>alt</a></code> attribute's value should
  never contain text that could be considered the image's <em>caption</em>, <em>title</em>, or
  <em>legend</em>. It is supposed to contain replacement text that could be used by users
  <em>instead</em> of the image; it is not meant to supplement the image. The <code id=general-guidelines:attr-title><a href=#attr-title>title</a></code> attribute can be used for supplemental information.</p>

  <p>Another corollary is that the <code id=general-guidelines:attr-img-alt-5><a href=#attr-img-alt>alt</a></code> attribute's value should
  not repeat information that is already provided in the prose next to the image.</p>

  <p class=note>One way to think of alternative text is to think about how you would read the page
  containing the image to someone over the phone, without mentioning that there is an image present.
  Whatever you say instead of the image is typically a good start for writing the alternative
  text.</p>


  <h6 id=a-link-or-button-containing-nothing-but-the-image>4.8.4.4.2 A link or button containing nothing but the image<a href=#a-link-or-button-containing-nothing-but-the-image class=self-link></a></h6>

  <p>When an <a href=#the-a-element id=a-link-or-button-containing-nothing-but-the-image:the-a-element>a</a> element that creates a <a href=#hyperlink id=a-link-or-button-containing-nothing-but-the-image:hyperlink>hyperlink</a>, or a <code id=a-link-or-button-containing-nothing-but-the-image:the-button-element><a href=#the-button-element>button</a></code>
  element, has no textual content but contains one or more images, the <code id=a-link-or-button-containing-nothing-but-the-image:attr-img-alt><a href=#attr-img-alt>alt</a></code> attributes must contain text that together convey the purpose of
  the link or button.</p>

  <div class=example>

   <p>In this example, a user is asked to pick their preferred color from a list of three. Each color
   is given by an image, but for users who have configured their user agent not to display images,
   the color names are used instead:</p>

   <pre>&lt;h1>Pick your color&lt;/h1>
&lt;ul>
 &lt;li>&lt;a href="green.html"><strong>&lt;img src="green.jpeg" alt="Green"></strong>&lt;/a>&lt;/li>
 &lt;li>&lt;a href="blue.html"><strong>&lt;img src="blue.jpeg" alt="Blue"></strong>&lt;/a>&lt;/li>
 &lt;li>&lt;a href="red.html"><strong>&lt;img src="red.jpeg" alt="Red"></strong>&lt;/a>&lt;/li>
&lt;/ul></pre>

  </div>

  <div class=example>

   <p>In this example, each button has a set of images to indicate the kind of color output desired
   by the user. The first image is used in each case to give the alternative text.</p>

   <pre>&lt;button name="rgb"><strong>&lt;img src="red" alt="RGB">&lt;img src="green" alt="">&lt;img src="blue" alt=""></strong>&lt;/button>
&lt;button name="cmyk"><strong>&lt;img src="cyan" alt="CMYK">&lt;img src="magenta" alt="">&lt;img src="yellow" alt="">&lt;img src="black" alt=""></strong>&lt;/button></pre>

   <p>Since each image represents one part of the text, it could also be written like this:</p>

   <pre>&lt;button name="rgb"><strong>&lt;img src="red" alt="R">&lt;img src="green" alt="G">&lt;img src="blue" alt="B"></strong>&lt;/button>
&lt;button name="cmyk"><strong>&lt;img src="cyan" alt="C">&lt;img src="magenta" alt="M">&lt;img src="yellow" alt="Y">&lt;img src="black" alt="K"></strong>&lt;/button></pre>

   <p>However, with other alternative text, this might not work, and putting all the alternative
   text into one image in each case might make more sense:</p>

   <pre>&lt;button name="rgb"><strong>&lt;img src="red" alt="sRGB profile">&lt;img src="green" alt="">&lt;img src="blue" alt=""></strong>&lt;/button>
&lt;button name="cmyk"><strong>&lt;img src="cyan" alt="CMYK profile">&lt;img src="magenta" alt="">&lt;img src="yellow" alt="">&lt;img src="black" alt=""></strong>&lt;/button></pre>

  </div>



  <h6 id=a-phrase-or-paragraph-with-an-alternative-graphical-representation:-charts,-diagrams,-graphs,-maps,-illustrations>4.8.4.4.3 A phrase or paragraph with an alternative graphical representation: charts, diagrams, graphs, maps, illustrations<a href=#a-phrase-or-paragraph-with-an-alternative-graphical-representation:-charts,-diagrams,-graphs,-maps,-illustrations class=self-link></a></h6>

  <p>Sometimes something can be more clearly stated in graphical form, for example as a flowchart, a
  diagram, a graph, or a simple map showing directions. In such cases, an image can be given using
  the <code id=a-phrase-or-paragraph-with-an-alternative-graphical-representation:-charts,-diagrams,-graphs,-maps,-illustrations:the-img-element><a href=#the-img-element>img</a></code> element, but the lesser textual version must still be given, so that users
  who are unable to view the image (e.g. because they have a very slow connection, or because they
  are using a text-only browser, or because they are listening to the page being read out by a
  hands-free automobile voice Web browser, or simply because they are blind) are still able to
  understand the message being conveyed.</p>

  <p>The text must be given in the <code id=a-phrase-or-paragraph-with-an-alternative-graphical-representation:-charts,-diagrams,-graphs,-maps,-illustrations:attr-img-alt><a href=#attr-img-alt>alt</a></code> attribute, and must convey
  the same message as the image specified in the <code id=a-phrase-or-paragraph-with-an-alternative-graphical-representation:-charts,-diagrams,-graphs,-maps,-illustrations:attr-img-src><a href=#attr-img-src>src</a></code>
  attribute.</p>

  <p>It is important to realize that the alternative text is a <em>replacement</em> for the image,
  not a description of the image.</p>

  <div class=example>

   <p>In the following example we have <a href=images/parsing-model-overview.png>a flowchart</a>
   in image form, with text in the <code id=a-phrase-or-paragraph-with-an-alternative-graphical-representation:-charts,-diagrams,-graphs,-maps,-illustrations:attr-img-alt-2><a href=#attr-img-alt>alt</a></code> attribute rephrasing the
   flowchart in prose form:</p>

   <pre>&lt;p>In the common case, the data handled by the tokenization stage
comes from the network, but it can also come from script.&lt;/p>
&lt;p><strong>&lt;img src="images/parsing-model-overview.png" alt="The Network
passes data to the Input Stream Preprocessor, which passes it to the
Tokenizer, which passes it to the Tree Construction stage. From there,
data goes to both the DOM and to Script Execution. Script Execution is
linked to the DOM, and, using document.write(), passes data to the
Tokenizer."></strong>&lt;/p></pre>

  </div>

  <div class=example>

   <p>Here's another example, showing a good solution and a bad solution to the problem of including
   an image in a description.</p>

   <p>First, here's the good solution. This sample shows how the alternative text should just be
   what you would have put in the prose if the image had never existed.</p>

   <pre>&lt;!-- This is the correct way to do things. -->
&lt;p>
 You are standing in an open field west of a house.
 <strong>&lt;img src="house.jpeg" alt="The house is white, with a boarded front door."></strong>
 There is a small mailbox here.
&lt;/p></pre>

   <p>Second, here's the bad solution. In this incorrect way of doing things, the alternative text
   is simply a description of the image, instead of a textual replacement for the image. It's bad
   because when the image isn't shown, the text doesn't flow as well as in the first example.</p>

   <pre class=bad>&lt;!-- <em>This is the wrong way to do things.</em> -->
&lt;p>
 You are standing in an open field west of a house.
 &lt;img src="house.jpeg" alt="A white house, with a boarded front door.">
 There is a small mailbox here.
&lt;/p></pre>

   <p>Text such as "Photo of white house with boarded door" would be equally bad alternative text
   (though it could be suitable for the <code id=a-phrase-or-paragraph-with-an-alternative-graphical-representation:-charts,-diagrams,-graphs,-maps,-illustrations:attr-title><a href=#attr-title>title</a></code> attribute or in the
   <code id=a-phrase-or-paragraph-with-an-alternative-graphical-representation:-charts,-diagrams,-graphs,-maps,-illustrations:the-figcaption-element><a href=#the-figcaption-element>figcaption</a></code> element of a <code id=a-phrase-or-paragraph-with-an-alternative-graphical-representation:-charts,-diagrams,-graphs,-maps,-illustrations:the-figure-element><a href=#the-figure-element>figure</a></code> with this image).</p>

  </div>


  <h6 id=a-short-phrase-or-label-with-an-alternative-graphical-representation:-icons,-logos>4.8.4.4.4 A short phrase or label with an alternative graphical representation: icons, logos<a href=#a-short-phrase-or-label-with-an-alternative-graphical-representation:-icons,-logos class=self-link></a></h6>

  <p>A document can contain information in iconic form. The icon is intended to help users of visual
  browsers to recognize features at a glance.</p>

  <p>In some cases, the icon is supplemental to a text label conveying the same meaning. In those
  cases, the <code id=a-short-phrase-or-label-with-an-alternative-graphical-representation:-icons,-logos:attr-img-alt><a href=#attr-img-alt>alt</a></code> attribute must be present but must be empty.</p>

  <div class=example>

   <p>Here the icons are next to text that conveys the same meaning, so they have an empty <code id=a-short-phrase-or-label-with-an-alternative-graphical-representation:-icons,-logos:attr-img-alt-2><a href=#attr-img-alt>alt</a></code> attribute:</p>

   <pre>&lt;nav>
 &lt;p>&lt;a href="/help/"><strong>&lt;img src="/icons/help.png" alt=""></strong> Help&lt;/a>&lt;/p>
 &lt;p>&lt;a href="/configure/"><strong>&lt;img src="/icons/configuration.png" alt=""></strong>
 Configuration Tools&lt;/a>&lt;/p>
&lt;/nav></pre>

  </div>

  <p>In other cases, the icon has no text next to it describing what it means; the icon is supposed
  to be self-explanatory. In those cases, an equivalent textual label must be given in the <code id=a-short-phrase-or-label-with-an-alternative-graphical-representation:-icons,-logos:attr-img-alt-3><a href=#attr-img-alt>alt</a></code> attribute.</p>

  <div class=example>

   <p>Here, posts on a news site are labeled with an icon indicating their topic.</p>

   <pre>&lt;body>
 &lt;article>
  &lt;header>
   &lt;h1>Ratatouille wins &lt;i>Best Movie of the Year&lt;/i> award&lt;/h1>
   &lt;p><strong>&lt;img src="movies.png" alt="Movies"></strong>&lt;/p>
  &lt;/header>
  &lt;p>Pixar has won yet another &lt;i>Best Movie of the Year&lt;/i> award,
  making this its 8th win in the last 12 years.&lt;/p>
 &lt;/article>
 &lt;article>
  &lt;header>
   &lt;h1>Latest TWiT episode is online&lt;/h1>
   &lt;p><strong>&lt;img src="podcasts.png" alt="Podcasts"></strong>&lt;/p>
  &lt;/header>
  &lt;p>The latest TWiT episode has been posted, in which we hear
  several tech news stories as well as learning much more about the
  iPhone. This week, the panelists compare how reflective their
  iPhones' Apple logos are.&lt;/p>
 &lt;/article>
&lt;/body></pre>

  </div>

  <p>Many pages include logos, insignia, flags, or emblems, which stand for a particular entity such
  as a company, organization, project, band, software package, country, or some such.</p>

  <p>If the logo is being used to represent the entity, e.g. as a page heading, the <code id=a-short-phrase-or-label-with-an-alternative-graphical-representation:-icons,-logos:attr-img-alt-4><a href=#attr-img-alt>alt</a></code> attribute must contain the name of the entity being represented by
  the logo. The <code id=a-short-phrase-or-label-with-an-alternative-graphical-representation:-icons,-logos:attr-img-alt-5><a href=#attr-img-alt>alt</a></code> attribute must <em>not</em> contain text like
  the word "logo", as it is not the fact that it is a logo that is being conveyed, it's the entity
  itself.</p>

  <p>If the logo is being used next to the name of the entity that it represents, then the logo is
  supplemental, and its <code id=a-short-phrase-or-label-with-an-alternative-graphical-representation:-icons,-logos:attr-img-alt-6><a href=#attr-img-alt>alt</a></code> attribute must instead be empty.</p>

  <p>If the logo is merely used as decorative material (as branding, or, for example, as a side
  image in an article that mentions the entity to which the logo belongs), then the entry below on
  purely decorative images applies. If the logo is actually being discussed, then it is being used
  as a phrase or paragraph (the description of the logo) with an alternative graphical
  representation (the logo itself), and the first entry above applies.</p>

  <div class=example>

   <p>In the following snippets, all four of the above cases are present. First, we see a logo used
   to represent a company:</p>

   <pre>&lt;h1><strong>&lt;img src="XYZ.gif" alt="The XYZ company"></strong>&lt;/h1></pre>

   <p>Next, we see a paragraph which uses a logo right next to the company name, and so doesn't have
   any alternative text:

   <pre>&lt;article>
 &lt;h2>News&lt;/h2>
 &lt;p>We have recently been looking at buying the <strong>&lt;img src="alpha.gif"
 alt=""> ΑΒΓ company</strong>, a small Greek company
 specializing in our type of product.&lt;/p></pre>

   <p>In this third snippet, we have a logo being used in an aside, as part of the larger article
   discussing the acquisition:</p>

<pre> <strong>&lt;aside>&lt;p>&lt;img src="alpha-large.gif" alt="">&lt;/p>&lt;/aside></strong>
 &lt;p>The ΑΒΓ company has had a good quarter, and our
 pie chart studies of their accounts suggest a much bigger blue slice
 than its green and orange slices, which is always a good sign.&lt;/p>
&lt;/article></pre>

   <p>Finally, we have an opinion piece talking about a logo, and the logo is therefore described in
   detail in the alternative text.</p>

   <pre>&lt;p>Consider for a moment their logo:&lt;/p>

<strong>&lt;p>&lt;img src="/images/logo" alt="It consists of a green circle with a
green question mark centered inside it.">&lt;/p></strong>

&lt;p>How unoriginal can you get? I mean, oooooh, a question mark, how
&lt;em>revolutionary&lt;/em>, how utterly &lt;em>ground-breaking&lt;/em>, I'm
sure everyone will rush to adopt those specifications now! They could
at least have tried for some sort of, I don't know, sequence of
rounded squares with varying shades of green and bold white outlines,
at least that would look good on the cover of a blue book.&lt;/p></pre>

   <p>This example shows how the alternative text should be written such that if the image isn't <i id=a-short-phrase-or-label-with-an-alternative-graphical-representation:-icons,-logos:img-available><a href=#img-available>available</a></i>, and the text is used instead, the text flows seamlessly into
   the surrounding text, as if the image had never been there in the first place.</p>

  </div>


  <h6 id=text-that-has-been-rendered-to-a-graphic-for-typographical-effect>4.8.4.4.5 Text that has been rendered to a graphic for typographical effect<a href=#text-that-has-been-rendered-to-a-graphic-for-typographical-effect class=self-link></a></h6>

  <p>Sometimes, an image just consists of text, and the purpose of the image is not to highlight the
  actual typographic effects used to render the text, but just to convey the text itself.</p>

  <p>In such cases, the <code id=text-that-has-been-rendered-to-a-graphic-for-typographical-effect:attr-img-alt><a href=#attr-img-alt>alt</a></code> attribute must be present but must
  consist of the same text as written in the image itself.</p>

  <div class=example>

   <p>Consider a graphic containing the text "Earth Day", but with the letters all decorated with
   flowers and plants. If the text is merely being used as a heading, to spice up the page for
   graphical users, then the correct alternative text is just the same text "Earth Day", and no
   mention need be made of the decorations:</p>

   <pre>&lt;h1><strong>&lt;img src="earthdayheading.png" alt="Earth Day"></strong>&lt;/h1></pre>

  </div>

  <div class=example>

   <p>An illuminated manuscript might use graphics for some of its images. The alternative text in
   such a situation is just the character that the image represents.</p>

   <pre>&lt;p>&lt;img src="initials/o.svg" alt="O">nce upon a time and a long long time ago, late at
night, when it was dark, over the hills, through the woods, across a great ocean, in a land far
away, in a small house, on a hill, under a full moon...</pre> 

  </div>

  <p>When an image is used to represent a character that cannot otherwise be represented in Unicode,
  for example gaiji, itaiji, or new characters such as novel currency symbols, the alternative text
  should be a more conventional way of writing the same thing, e.g. using the phonetic hiragana or
  katakana to give the character's pronunciation.</p>

  <div class=example>

   <p>In this example from 1997, a new-fangled currency symbol that looks like a curly E with two
   bars in the middle instead of one is represented using an image. The alternative text gives the
   character's pronunciation.</p>

   <pre>&lt;p>Only &lt;img src="euro.png" alt="euro ">5.99!</pre>

  </div>

  <p>An image should not be used if Unicode characters would serve an identical purpose. Only when
  the text cannot be directly represented using Unicode, e.g. because of decorations or because the
  character is not in the Unicode character set (as in the case of gaiji), would an image be
  appropriate.</p>

  <p class=note>If an author is tempted to use an image because their default system font does not
  support a given character, then Web Fonts are a better solution than images.</p>



  <h6 id=a-graphical-representation-of-some-of-the-surrounding-text>4.8.4.4.6 A graphical representation of some of the surrounding text<a href=#a-graphical-representation-of-some-of-the-surrounding-text class=self-link></a></h6>

  <p>In many cases, the image is actually just supplementary, and its presence merely reinforces the
  surrounding text. In these cases, the <code id=a-graphical-representation-of-some-of-the-surrounding-text:attr-img-alt><a href=#attr-img-alt>alt</a></code> attribute must be
  present but its value must be the empty string.</p>

  <p>In general, an image falls into this category if removing the image doesn't make the page any
  less useful, but including the image makes it a lot easier for users of visual browsers to
  understand the concept.</p>

  <div class=example>

   <p>A flowchart that repeats the previous paragraph in graphical form:</p>

   <pre>&lt;p>The Network passes data to the Input Stream Preprocessor, which
passes it to the Tokenizer, which passes it to the Tree Construction
stage. From there, data goes to both the DOM and to Script Execution.
Script Execution is linked to the DOM, and, using document.write(),
passes data to the Tokenizer.&lt;/p>
<strong>&lt;p>&lt;img src="images/parsing-model-overview.png" alt="">&lt;/p></strong></pre>

   <p>In these cases, it would be wrong to include alternative text that consists of just a caption.
   If a caption is to be included, then either the <code id=a-graphical-representation-of-some-of-the-surrounding-text:attr-title><a href=#attr-title>title</a></code> attribute
   can be used, or the <code id=a-graphical-representation-of-some-of-the-surrounding-text:the-figure-element><a href=#the-figure-element>figure</a></code> and <code id=a-graphical-representation-of-some-of-the-surrounding-text:the-figcaption-element><a href=#the-figcaption-element>figcaption</a></code> elements can be used. In the
   latter case, the image would in fact be a phrase or paragraph with an alternative graphical
   representation, and would thus require alternative text.</p>

   <pre>&lt;!-- Using the title="" attribute -->
&lt;p>The Network passes data to the Input Stream Preprocessor, which
passes it to the Tokenizer, which passes it to the Tree Construction
stage. From there, data goes to both the DOM and to Script Execution.
Script Execution is linked to the DOM, and, using document.write(),
passes data to the Tokenizer.&lt;/p>
&lt;p><strong>&lt;img src="images/parsing-model-overview.png" alt=""
        title="Flowchart representation of the parsing model."></strong>&lt;/p></pre>

   <pre>&lt;!-- Using &lt;figure> and &lt;figcaption> -->
&lt;p>The Network passes data to the Input Stream Preprocessor, which
passes it to the Tokenizer, which passes it to the Tree Construction
stage. From there, data goes to both the DOM and to Script Execution.
Script Execution is linked to the DOM, and, using document.write(),
passes data to the Tokenizer.&lt;/p>
&lt;figure>
 <strong>&lt;img src="images/parsing-model-overview.png" alt="The Network leads to
 the Input Stream Preprocessor, which leads to the Tokenizer, which
 leads to the Tree Construction stage. The Tree Construction stage
 leads to two items. The first is Script Execution, which leads via
 document.write() back to the Tokenizer. The second item from which
 Tree Construction leads is the DOM. The DOM is related to the Script
 Execution."></strong>
 &lt;figcaption>Flowchart representation of the parsing model.&lt;/figcaption>
&lt;/figure></pre>

   <pre class=bad>&lt;!-- This is WRONG. Do not do this. Instead, do what the above examples do. -->
&lt;p>The Network passes data to the Input Stream Preprocessor, which
passes it to the Tokenizer, which passes it to the Tree Construction
stage. From there, data goes to both the DOM and to Script Execution.
Script Execution is linked to the DOM, and, using document.write(),
passes data to the Tokenizer.&lt;/p>
&lt;p>&lt;img src="images/parsing-model-overview.png"
        alt="Flowchart representation of the parsing model.">&lt;/p>
&lt;!-- Never put the image's caption in the alt="" attribute! --></pre>

  </div>

  <div class=example>

   <p>A graph that repeats the previous paragraph in graphical form:</p>

   <pre>&lt;p>According to a study covering several billion pages,
about 62% of documents on the Web in 2007 triggered the Quirks
rendering mode of Web browsers, about 30% triggered the Almost
Standards mode, and about 9% triggered the Standards mode.&lt;/p>
<strong>&lt;p>&lt;img src="rendering-mode-pie-chart.png" alt="">&lt;/p></strong></pre>

  </div>



  <h6 id=ancillary-images>4.8.4.4.7 Ancillary images<a href=#ancillary-images class=self-link></a></h6>

  <p>Sometimes, an image is not critical to the content, but is nonetheless neither purely
  decorative nor entirely redundant with the text. In these cases, the <code id=ancillary-images:attr-img-alt><a href=#attr-img-alt>alt</a></code> attribute must be present, and its value should either be the
  empty string, or a textual representation of the information that the image conveys. If the image
  has a caption giving the image's title, then the <code id=ancillary-images:attr-img-alt-2><a href=#attr-img-alt>alt</a></code>
  attribute's value must not be empty (as that would be quite confusing for non-visual readers).</p>

  <div class=example>

   <p>Consider a news article about a political figure, in which the individual's face was shown in
   an image that, through a style sheet, is floated to the right. The image is not purely
   decorative, as it is relevant to the story. The image is not entirely redundant with the story
   either, as it shows what the politician looks like. Whether any alternative text need be provided
   is an authoring decision, in part influenced by whether the image colors the interpretation of
   the prose.</p>
